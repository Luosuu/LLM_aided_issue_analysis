{
  "issue_number": 7104,
  "title": "tikv panic",
  "body": "## Bug Report\r\n\r\n<!-- Thanks for your bug report! Don't worry if you can't fill out all the sections. -->\r\n\r\n### What version of TiKV are you using?\r\n<!-- You can run `tikv-server --version` -->\r\nrelease-3.1 latest\r\n\r\n### What operating system and CPU are you using?\r\n<!-- If you're using Linux, you can run `cat /proc/cpuinfo` -->\r\n\r\n### Steps to reproduce\r\n<!-- If possible, provide a recipe for reproducing the error. A complete runnable program is good. -->\r\nrun tiflash daily regression test\r\n\r\n### What did you expect?\r\nsuccess\r\n\r\n### What did happened?\r\nfailed\r\n\r\nhttps://internal.pingcap.net/idc-jenkins/blue/rest/organizations/jenkins/pipelines/tiflash_regression_test_daily/runs/425/nodes/75/steps/87/log/?start=0\r\n\r\n```\r\n[2020-03-15T23:55:24.834Z] [2020/03/15 23:54:38.616 +00:00] [FATAL] [lib.rs:499] [\"assertion failed: `(left == right)`\\n  left: `Uuid { bytes: [40, 214, 25, 49, 134, 63, 70, 5, 137, 53, 63, 40, 200, 138, 68, 98] }`,\\n right: `Uuid { bytes: [179, 166, 229, 196, 36, 120, 77, 25, 146, 34, 193, 16, 201, 120, 244, 112] }`\"] [backtrace=\"stack backtrace:\\n   0:     0x562e1a8e359d - backtrace::backtrace::libunwind::trace::ha2cc8d323c36108c\\n                        at /rust/registry/src/github.com-1ecc6299db9ec823/backtrace-0.2.3/src/backtrace/libunwind.rs:54\\n                         - backtrace::backtrace::trace::h5994851d20d8217f\\n                        at /rust/registry/src/github.com-1ecc6299db9ec823/backtrace-0.2.3/src/backtrace/mod.rs:70\\n   1:     0x562e1b7e9fdc - tikv_util::set_panic_hook::{{closure}}::h2c3ef6c15736db19\\n                        at /home/jenkins/.target/release/build/backtrace-a6bcdf23841e02bc/out/capture.rs:79\\n   2:     0x562e1b14723c - std::panicking::rust_panic_with_hook::h9d80a6967ad27edd\\n                        at src/libstd/panicking.rs:475\\n   3:     0x562e1b14700c - rust_begin_unwind\\n                        at src/libstd/panicking.rs:375\\n   4:     0x562e1b146f9f - std::panicking::begin_panic_fmt::hfc689a5d4f19de26\\n                        at src/libstd/panicking.rs:326\\n   5:     0x562e1aae0806 - tikv::raftstore::store::fsm::peer::PeerFsmDelegate<T,C>::post_raft_ready_append::h5fbc9f07d57c43bd\\n                        at /home/jenkins/agent/workspace/ld_tikv_multi_branch_release-3.1/tikv/src/raftstore/store/fsm/peer.rs:0\\n                         - tikv::raftstore::store::fsm::store::RaftPoller<T,C>::handle_raft_ready::h98d37c7140e1f7f2\\n                        at /home/jenkins/agent/workspace/ld_tikv_multi_branch_release-3.1/tikv/src/raftstore/store/fsm/store.rs:535\\n   6:     0x562e1aac180d - <tikv::raftstore::store::fsm::store::RaftPoller<T,C> as batch_system::batch::PollHandler<tikv::raftstore::store::fsm::peer::PeerFsm,tikv::raftstore::store::fsm::store::StoreFsm>>::end::hcd7cfb415eeb5763\\n                        at /home/jenkins/agent/workspace/ld_tikv_multi_branch_release-3.1/tikv/src/raftstore/store/fsm/store.rs:650\\n                         - batch_system::batch::Poller<N,C,Handler>::poll::h63bff340f59cf564\\n                        at /home/jenkins/agent/workspace/ld_tikv_multi_branch_release-3.1/tikv/components/batch-system/src/batch.rs:345\\n                         - batch_system::batch::BatchSystem<N,C>::spawn::{{closure}}::h16ddfa04b1d9669f\\n                        at /home/jenkins/agent/workspace/ld_tikv_multi_branch_release-3.1/tikv/components/batch-system/src/batch.rs:408\\n                         - std::sys_common::backtrace::__rust_begin_short_backtrace::hd04ccf16886f77b2\\n                        at /rustc/0de96d37fbcc54978458c18f5067cd9817669bc8/src/libstd/sys_common/backtrace.rs:136\\n   7:     0x562e1aabed05 - std::thread::Builder::spawn_unchecked::{{closure}}::{{closure}}::hb13ed34875183051\\n                        at /rustc/0de96d37fbcc54978458c18f5067cd9817669bc8/src/libstd/thread/mod.rs:469\\n                         - <std::panic::AssertUnwindSafe<F> as core::ops::function::FnOnce<()>>::call_once::h75bd052afa84db6c\\n                        at /rustc/0de96d37fbcc54978458c18f5067cd9817669bc8/src/libstd/panic.rs:318\\n                         - std::panicking::try::do_call::hadd9c28f18f01e55\\n                        at /rustc/0de96d37fbcc54978458c18f5067cd9817669bc8/src/libstd/panicking.rs:292\\n                         - std::panicking::try::h235880368b88a827\\n                        at /rustc/0de96d37fbcc54978458c18f5067cd9817669bc8//src/libpanic_abort/lib.rs:28\\n                         - std::panic::catch_unwind::hc0f5c5a6df0c0071\\n                        at /rustc/0de96d37fbcc54978458c18f5067cd9817669bc8/src/libstd/panic.rs:394\\n                         - std::thread::Builder::spawn_unchecked::{{closure}}::he8e05911ef17879d\\n                        at /rustc/0de96d37fbcc54978458c18f5067cd9817669bc8/src/libstd/thread/mod.rs:468\\n                         - core::ops::function::FnOnce::call_once{{vtable.shim}}::h754b646e36a6b402\\n                        at /rustc/0de96d37fbcc54978458c18f5067cd9817669bc8/src/libcore/ops/function.rs:232\\n   8:     0x562e1b15b67e - <alloc::boxed::Box<F> as core::ops::function::FnOnce<A>>::call_once::hbabfae4f70ab9609\\n                        at /rustc/0de96d37fbcc54978458c18f5067cd9817669bc8/src/liballoc/boxed.rs:1022\\n   9:     0x562e1b15d89b - <alloc::boxed::Box<F> as core::ops::function::FnOnce<A>>::call_once::h8471b989095c2da7\\n                        at /rustc/0de96d37fbcc54978458c18f5067cd9817669bc8/src/liballoc/boxed.rs:1022\\n                         - std::sys_common::thread::start_thread::h0647e91c8800cb8c\\n                        at src/libstd/sys_common/thread.rs:13\\n                         - std::sys::unix::thread::Thread::new::thread_start::h3f42d1616b825de5\\n                        at src/libstd/sys/unix/thread.rs:80\\n  10:     0x7fe60773f2dd - start_thread\\n  11:     0x7fe606e4aa62 - clone\\n  12:                0x0 - <unknown>\"] [location=src/raftstore/store/read_queue.rs:169] [thread_name=raftstore-4-0]\r\n```\r\n",
  "state": "closed",
  "created_at": "2020-03-16T07:32:25Z",
  "updated_at": "2020-08-28T09:12:20Z",
  "closed_at": "2020-08-28T09:12:20Z",
  "labels": [
    "type/bug"
  ],
  "comments_data": []
}