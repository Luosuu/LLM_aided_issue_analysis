{
  "issue_number": 12024,
  "title": " The two testcase test_rate_limited_light_flow,test_rate_limited_hybrid_flow failed by running `make test`",
  "body": "## Bug Report\r\n\r\n<!-- Thanks for your bug report! Don't worry if you can't fill out all the sections. -->\r\n\r\n### What version of TiKV are you using?\r\nc92681f45bf0d1d8a395c7cbd569346e5d4f8f49\r\n\r\n### What operating system and CPU are you using?\r\n<!-- If you're using Linux, you can run `cat /proc/cpuinfo` -->\r\nKVM which has 12 vcpu count\r\n```\r\nprocessor       : 0                                                                                                                                                                                     \r\nvendor_id       : GenuineIntel                                                                                                                                                                          \r\ncpu family      : 6                                                                                                                                                                                     \r\nmodel           : 61                                                                                                                                                                                    \r\nmodel name      : Intel Core Processor (Broadwell, IBRS)                                                                                                                                                \r\nstepping        : 2                                                                                                                                                                                     \r\nmicrocode       : 0x1                                                                                                                                                                                   \r\ncpu MHz         : 2199.996                                                                                                                                                                              \r\ncache size      : 4096 KB                                                                                                                                                                               \r\nphysical id     : 0                                                                                                                                                                                     \r\nsiblings        : 1                                                                                                                                                                                     \r\ncore id         : 0                                                                                                                                                                                     \r\ncpu cores       : 1                                                                                                                                                                                     \r\napicid          : 0                                                                                                                                                                                     \r\ninitial apicid  : 0                                                                                                                                                                                     \r\nfpu             : yes                                                                                                                                                                                   \r\nfpu_exception   : yes                                                                                                                                                                                   \r\ncpuid level     : 13                                                                                                                                                                                    \r\nwp              : yes                                                                                                                                                                                   \r\nflags           : fpu de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush mmx fxsr sse sse2 syscall nx rdtscp lm constant_tsc rep_good nopl cpuid tsc_known_freq pni pclmulqdq ssse3\r\n fma cx16 pcid sse4_1 sse4_2 x2apic movbe popcnt tsc_deadline_timer aes xsave avx hypervisor lahf_lm 3dnowprefetch invpcid_single pti ibrs ibpb fsgsbase bmi1 hle avx2 smep bmi2 erms invpcid rtm rdseed\r\n adx smap xsaveopt                                                                                                                                                                                      \r\nbugs            : cpu_meltdown spectre_v1 spectre_v2 spec_store_bypass l1tf mds swapgs taa itlb_multihit srbds                                                                                          \r\nbogomips        : 4399.99                                                                                                                                                                               \r\nclflush size    : 64                                                                                                                                                                                    \r\ncache_alignment : 64                                                                                                                                                                                    \r\naddress sizes   : 46 bits physical, 48 bits virtual                                                                                                                                                     \r\npower management:         \r\n\r\n...\r\n...\r\n...                                                                                                                                                                              \r\n```\r\n\r\n### Steps to reproduce\r\nJust run make test.\r\n\r\n### What did you expect?\r\n`make test` pass\r\n\r\n### What did happened?\r\n\r\n```\r\n...\r\n...\r\nrunning 19 tests                                                                                                                                                                                        \r\ntest file::tests::test_unix_file_allocate_failure ... ok                                                                                                                                                \r\ntest tests::test_delete_file_if_exist ... ok                                                                                                                                                            \r\ntest tests::test_create_delete_dir ... ok                                                                                                                                                               \r\ntest tests::test_file_exists ... ok                                                                                                                                                                     \r\ntest rate_limiter::tests::bench_critical_section ... ok                                                                                                                                                 \r\ntest tests::test_get_file_size ... ok                                                                                                                                                                   \r\ntest tests::test_sync_dir ... ok                                                                                                                                                                        \r\ntest tests::test_reserve_space_for_recover ... ok                                                                                                                                                       \r\ntest thread_io::tests::bench_fetch_thread_io_bytes ... ok                                                                                                                                               \r\ntest thread_io::tests::test_read_bytes ... ok                                                                                                                                                           \r\ntest thread_io::tests::test_write_bytes ... ok                                                                                                                                                          \r\nthread 'rate_limiter::tests::test_rate_limited_light_flow' panicked at 'assertion failed: (stats.fetch(IOType::Compaction, IOOp::Write) as f64) >=\\n    (actual_kbytes_per_sec as f64 * duration.as_secs\r\n_f64() * 1000.0) * 0.85', components/file_system/src/rate_limiter.rs:757:9                                                                                                                              \r\nstack backtrace:                                                                                                                                                                                        \r\nthread 'rate_limiter::tests::test_rate_limited_hybrid_flow' panicked at 'assertion failed: (write_bytes as f64) >=\\n    ((write_work * bytes_per_sec / 100) as f64 * duration.as_secs_f64()) *\\n        \r\n0.85', components/file_system/src/rate_limiter.rs:812:9                                                                                                                                                 \r\ntest file::tests::test_instrumented_file ... ok                                                                                                                                                         \r\ntest tests::test_calc_crc32 ... ok\r\n   0:     0x55a780c0e08c - std::backtrace_rs::backtrace::libunwind::trace::h38d656af46687c91                                                                                                            \r\n                               at /rustc/1e12aef3fab243407f9d71ba9956cb2a1bf105d5/library/std/src/../../backtrace/src/backtrace/libunwind.rs:93:5                                                       \r\n   1:     0x55a780c0e08c - std::backtrace_rs::backtrace::trace_unsynchronized::h6463e81b43d545da                                                                                                        \r\n                               at /rustc/1e12aef3fab243407f9d71ba9956cb2a1bf105d5/library/std/src/../../backtrace/src/backtrace/mod.rs:66:5                                                             \r\n   2:     0x55a780c0e08c - std::sys_common::backtrace::_print_fmt::h7d0aeff1635ad318                                                                                                                    \r\n                               at /rustc/1e12aef3fab243407f9d71ba9956cb2a1bf105d5/library/std/src/sys_common/backtrace.rs:66:5                                                                          \r\n   3:     0x55a780c0e08c - <std::sys_common::backtrace::_print::DisplayBacktrace as core::fmt::Display>::fmt::he9ed9f7bc97615c6                                                                         \r\n                               at /rustc/1e12aef3fab243407f9d71ba9956cb2a1bf105d5/library/std/src/sys_common/backtrace.rs:45:22                                                                         \r\n   4:     0x55a780c3553c - core::fmt::write::h26fb070fd492e04f                                                                                                                                          \r\n                               at /rustc/1e12aef3fab243407f9d71ba9956cb2a1bf105d5/library/core/src/fmt/mod.rs:1190:17                                                                                   \r\n   5:     0x55a780c095f8 - std::io::Write::write_fmt::ha7a1cfea3d855428                                                                                                                                 \r\n                               at /rustc/1e12aef3fab243407f9d71ba9956cb2a1bf105d5/library/std/src/io/mod.rs:1657:15                                                                                     \r\n   6:     0x55a780c101b7 - std::sys_common::backtrace::_print::h6a43ee74b02286e0                                                                                                                        \r\n                               at /rustc/1e12aef3fab243407f9d71ba9956cb2a1bf105d5/library/std/src/sys_common/backtrace.rs:48:5                                                                          \r\n   7:     0x55a780c101b7 - std::sys_common::backtrace::print::hfe9d3eef26a9b46f                                                                                                                         \r\n                               at /rustc/1e12aef3fab243407f9d71ba9956cb2a1bf105d5/library/std/src/sys_common/backtrace.rs:35:9                                                                          \r\n   8:     0x55a780c101b7 - std::panicking::default_hook::{{closure}}::he3bbb991ed25ca71                                                                                                                 \r\n                               at /rustc/1e12aef3fab243407f9d71ba9956cb2a1bf105d5/library/std/src/panicking.rs:295:22                                                                                   \r\n   9:     0x55a780c0fe7f - std::panicking::default_hook::h4e425f0c50c308bd                                                                                                                              \r\n                               at /rustc/1e12aef3fab243407f9d71ba9956cb2a1bf105d5/library/std/src/panicking.rs:314:9\r\n  10:     0x55a780c1091a - std::panicking::rust_panic_with_hook::h22c18dec3fc9e708\r\n                               at /rustc/1e12aef3fab243407f9d71ba9956cb2a1bf105d5/library/std/src/panicking.rs:698:17\r\n  11:     0x55a780c105c9 - std::panicking::begin_panic_handler::{{closure}}::hd86c4a70dd9a9d4a\r\n                               at /rustc/1e12aef3fab243407f9d71ba9956cb2a1bf105d5/library/std/src/panicking.rs:586:13\r\n  12:     0x55a780c0e534 - std::sys_common::backtrace::__rust_end_short_backtrace::ha98c5d7cc0ee2da0\r\n                               at /rustc/1e12aef3fab243407f9d71ba9956cb2a1bf105d5/library/std/src/sys_common/backtrace.rs:138:18\r\n  13:     0x55a780c10309 - rust_begin_unwind\r\n                               at /rustc/1e12aef3fab243407f9d71ba9956cb2a1bf105d5/library/std/src/panicking.rs:584:5\r\n  14:     0x55a780325503 - core::panicking::panic_fmt::h53f61fbdec3080b3\r\n                               at /rustc/1e12aef3fab243407f9d71ba9956cb2a1bf105d5/library/core/src/panicking.rs:143:14\r\n  15:     0x55a7803253cd - core::panicking::panic::h950eea06a1dc9ad4\r\n                               at /rustc/1e12aef3fab243407f9d71ba9956cb2a1bf105d5/library/core/src/panicking.rs:48:5\r\n  16:     0x55a78032ebe7 - file_system::rate_limiter::tests::test_rate_limited_light_flow::h933cddd5c791294b\r\n                               at /home/cosven/pingcap/tikv/components/file_system/src/rate_limiter.rs:757:9\r\n  17:     0x55a78033b19a - file_system::rate_limiter::tests::test_rate_limited_light_flow::{{closure}}::ha2e01ec65707cb87\r\n                               at /home/cosven/pingcap/tikv/components/file_system/src/rate_limiter.rs:736:5\r\n  18:     0x55a78033e88e - core::ops::function::FnOnce::call_once::h62f400ec4ded3162\r\n                               at /rustc/1e12aef3fab243407f9d71ba9956cb2a1bf105d5/library/core/src/ops/function.rs:227:5\r\n  19:     0x55a780be2493 - core::ops::function::FnOnce::call_once::hc8bba15014c4beea\r\n                               at /rustc/1e12aef3fab243407f9d71ba9956cb2a1bf105d5/library/core/src/ops/function.rs:227:5\r\n  20:     0x55a780be2493 - test::__rust_begin_short_backtrace::hd460fd9f75eeba5f\r\n                               at /rustc/1e12aef3fab243407f9d71ba9956cb2a1bf105d5/library/test/src/lib.rs:575:5\r\n  21:     0x55a780be115d - <alloc::boxed::Box<F,A> as core::ops::function::FnOnce<Args>>::call_once::h4ee9be99affacb0f\r\n                               at /rustc/1e12aef3fab243407f9d71ba9956cb2a1bf105d5/library/alloc/src/boxed.rs:1854:9\r\n  22:     0x55a780be115d - <core::panic::unwind_safe::AssertUnwindSafe<F> as core::ops::function::FnOnce<()>>::call_once::h28201f0d6ec2068a\r\n                               at /rustc/1e12aef3fab243407f9d71ba9956cb2a1bf105d5/library/core/src/panic/unwind_safe.rs:271:9\r\n  23:     0x55a780be115d - std::panicking::try::do_call::hc6185aa5fff2063e\r\n                               at /rustc/1e12aef3fab243407f9d71ba9956cb2a1bf105d5/library/std/src/panicking.rs:492:40\r\n  24:     0x55a780be115d - std::panicking::try::hb602029255393744\r\n                               at /rustc/1e12aef3fab243407f9d71ba9956cb2a1bf105d5/library/std/src/panicking.rs:456:19\r\n  25:     0x55a780be115d - std::panic::catch_unwind::heeeeea0671593c22\r\n                               at /rustc/1e12aef3fab243407f9d71ba9956cb2a1bf105d5/library/std/src/panic.rs:137:14\r\n  26:     0x55a780be115d - test::run_test_in_process::h3ce9cfc9fdbcee7a\r\n                               at /rustc/1e12aef3fab243407f9d71ba9956cb2a1bf105d5/library/test/src/lib.rs:598:18\r\n  27:     0x55a780be115d - test::run_test::run_test_inner::{{closure}}::hdff2b3e1656f98cd\r\n                               at /rustc/1e12aef3fab243407f9d71ba9956cb2a1bf105d5/library/test/src/lib.rs:492:39\r\n  28:     0x55a780beaa21 - test::run_test::run_test_inner::{{closure}}::h9f1d586a6ef9df4b\r\n                               at /rustc/1e12aef3fab243407f9d71ba9956cb2a1bf105d5/library/test/src/lib.rs:519:37\r\n  29:     0x55a780beaa21 - std::sys_common::backtrace::__rust_begin_short_backtrace::h00494840398bee50\r\n                               at /rustc/1e12aef3fab243407f9d71ba9956cb2a1bf105d5/library/std/src/sys_common/backtrace.rs:122:18\r\n  30:     0x55a780bb6a7f - std::thread::Builder::spawn_unchecked_::{{closure}}::{{closure}}::h67c40c52080f039b\r\n                               at /rustc/1e12aef3fab243407f9d71ba9956cb2a1bf105d5/library/std/src/thread/mod.rs:498:17\r\n  31:     0x55a780bb6a7f - <core::panic::unwind_safe::AssertUnwindSafe<F> as core::ops::function::FnOnce<()>>::call_once::h0170d0df3f1089c7\r\n                               at /rustc/1e12aef3fab243407f9d71ba9956cb2a1bf105d5/library/core/src/panic/unwind_safe.rs:271:9\r\n  32:     0x55a780bb6a7f - std::panicking::try::do_call::h58c11b7f9ff3e26a\r\n                               at /rustc/1e12aef3fab243407f9d71ba9956cb2a1bf105d5/library/std/src/panicking.rs:492:40\r\n  33:     0x55a780bb6a7f - std::panicking::try::h34ff80b8b781efbd\r\n                               at /rustc/1e12aef3fab243407f9d71ba9956cb2a1bf105d5/library/std/src/panicking.rs:456:19\r\n  34:     0x55a780bb6a7f - std::panic::catch_unwind::h342638075d359033\r\n                               at /rustc/1e12aef3fab243407f9d71ba9956cb2a1bf105d5/library/std/src/panic.rs:137:14\r\n  35:     0x55a780bb6a7f - std::thread::Builder::spawn_unchecked_::{{closure}}::h50918b4d51ab8a21\r\n                               at /rustc/1e12aef3fab243407f9d71ba9956cb2a1bf105d5/library/std/src/thread/mod.rs:497:30\r\n  36:     0x55a780bb6a7f - core::ops::function::FnOnce::call_once{{vtable.shim}}::hda7049ec592f5801\r\n                               at /rustc/1e12aef3fab243407f9d71ba9956cb2a1bf105d5/library/core/src/ops/function.rs:227:5\r\n  37:     0x55a780c17323 - <alloc::boxed::Box<F,A> as core::ops::function::FnOnce<Args>>::call_once::h353fa42c42b20ec5\r\n                               at /rustc/1e12aef3fab243407f9d71ba9956cb2a1bf105d5/library/alloc/src/boxed.rs:1854:9\r\n  38:     0x55a780c17323 - <alloc::boxed::Box<F,A> as core::ops::function::FnOnce<Args>>::call_once::h0930c1c2fa5dac80\r\n                               at /rustc/1e12aef3fab243407f9d71ba9956cb2a1bf105d5/library/alloc/src/boxed.rs:1854:9\r\n  39:     0x55a780c17323 - std::sys::unix::thread::Thread::new::thread_start::hb3ede8336acd4f71\r\n                               at /rustc/1e12aef3fab243407f9d71ba9956cb2a1bf105d5/library/std/src/sys/unix/thread.rs:108:17\r\n  40:     0x7f7d1843c6db - start_thread\r\n                               at /build/glibc-2ORdQG/glibc-2.27/nptl/pthread_create.c:463\r\n  41:     0x7f7d177a3a3f - clone\r\n                               at /build/glibc-2ORdQG/glibc-2.27/misc/../sysdeps/unix/sysv/linux/x86_64/clone.S:95\r\n  42:                0x0 - <unknown>\r\nstack backtrace:                                                                                                                                                                                        \r\n   0:     0x55a780c0e08c - std::backtrace_rs::backtrace::libunwind::trace::h38d656af46687c91                                                                                                            \r\n                               at /rustc/1e12aef3fab243407f9d71ba9956cb2a1bf105d5/library/std/src/../../backtrace/src/backtrace/libunwind.rs:93:5\r\n   1:     0x55a780c0e08c - std::backtrace_rs::backtrace::trace_unsynchronized::h6463e81b43d545da\r\n                               at /rustc/1e12aef3fab243407f9d71ba9956cb2a1bf105d5/library/std/src/../../backtrace/src/backtrace/mod.rs:66:5\r\n   2:     0x55a780c0e08c - std::sys_common::backtrace::_print_fmt::h7d0aeff1635ad318\r\n                               at /rustc/1e12aef3fab243407f9d71ba9956cb2a1bf105d5/library/std/src/sys_common/backtrace.rs:66:5\r\n   3:     0x55a780c0e08c - <std::sys_common::backtrace::_print::DisplayBacktrace as core::fmt::Display>::fmt::he9ed9f7bc97615c6\r\n                               at /rustc/1e12aef3fab243407f9d71ba9956cb2a1bf105d5/library/std/src/sys_common/backtrace.rs:45:22\r\n   4:     0x55a780c3553c - core::fmt::write::h26fb070fd492e04f\r\n                               at /rustc/1e12aef3fab243407f9d71ba9956cb2a1bf105d5/library/core/src/fmt/mod.rs:1190:17\r\n   5:     0x55a780c095f8 - std::io::Write::write_fmt::ha7a1cfea3d855428\r\n                               at /rustc/1e12aef3fab243407f9d71ba9956cb2a1bf105d5/library/std/src/io/mod.rs:1657:15\r\n   6:     0x55a780c101b7 - std::sys_common::backtrace::_print::h6a43ee74b02286e0\r\n                               at /rustc/1e12aef3fab243407f9d71ba9956cb2a1bf105d5/library/std/src/sys_common/backtrace.rs:48:5\r\n   7:     0x55a780c101b7 - std::sys_common::backtrace::print::hfe9d3eef26a9b46f\r\n                               at /rustc/1e12aef3fab243407f9d71ba9956cb2a1bf105d5/library/std/src/sys_common/backtrace.rs:35:9\r\n   8:     0x55a780c101b7 - std::panicking::default_hook::{{closure}}::he3bbb991ed25ca71\r\n                               at /rustc/1e12aef3fab243407f9d71ba9956cb2a1bf105d5/library/std/src/panicking.rs:295:22\r\n   9:    test rate_limiter::tests::test_rate_limited_light_flow ...  FAILED0x\r\n55a780c0fe7f - std::panicking::default_hook::h4e425f0c50c308bd\r\n                               at /rustc/1e12aef3fab243407f9d71ba9956cb2a1bf105d5/library/std/src/panicking.rs:314:9\r\n  10:     0x55a780c1091a - std::panicking::rust_panic_with_hook::h22c18dec3fc9e708\r\n                               at /rustc/1e12aef3fab243407f9d71ba9956cb2a1bf105d5/library/std/src/panicking.rs:698:17\r\n  11:     0x55a780c105c9 - std::panicking::begin_panic_handler::{{closure}}::hd86c4a70dd9a9d4a\r\n                               at /rustc/1e12aef3fab243407f9d71ba9956cb2a1bf105d5/library/std/src/panicking.rs:586:13\r\n  12:     0x55a780c0e534 - std::sys_common::backtrace::__rust_end_short_backtrace::ha98c5d7cc0ee2da0\r\n                               at /rustc/1e12aef3fab243407f9d71ba9956cb2a1bf105d5/library/std/src/sys_common/backtrace.rs:138:18\r\n  13:     0x55a780c10309 - rust_begin_unwind\r\n                               at /rustc/1e12aef3fab243407f9d71ba9956cb2a1bf105d5/library/std/src/panicking.rs:584:5\r\n  14:     0x55a780325503 - core::panicking::panic_fmt::h53f61fbdec3080b3\r\n                               at /rustc/1e12aef3fab243407f9d71ba9956cb2a1bf105d5/library/core/src/panicking.rs:143:14\r\n  15:     0x55a7803253cd - core::panicking::panic::h950eea06a1dc9ad4\r\n                               at /rustc/1e12aef3fab243407f9d71ba9956cb2a1bf105d5/library/core/src/panicking.rs:48:5\r\n  16:     0x55a78032f4d1 - file_system::rate_limiter::tests::test_rate_limited_hybrid_flow::h65c9529b1ba6391b\r\n                               at /home/cosven/pingcap/tikv/components/file_system/src/rate_limiter.rs:812:9\r\n  17:     0x55a78033b1ba - file_system::rate_limiter::tests::test_rate_limited_hybrid_flow::{{closure}}::hd03f1f208b21336c\r\n                               at /home/cosven/pingcap/tikv/components/file_system/src/rate_limiter.rs:764:5\r\n  18:     0x55a78033ee2e - core::ops::function::FnOnce::call_once::he79cace1d0d0f441\r\n                               at /rustc/1e12aef3fab243407f9d71ba9956cb2a1bf105d5/library/core/src/ops/function.rs:227:5\r\n  19:     0x55a780be2493 - core::ops::function::FnOnce::call_once::hc8bba15014c4beea\r\n                               at /rustc/1e12aef3fab243407f9d71ba9956cb2a1bf105d5/library/core/src/ops/function.rs:227:5\r\n  20:     0x55a780be2493 - test::__rust_begin_short_backtrace::hd460fd9f75eeba5f\r\n                               at /rustc/1e12aef3fab243407f9d71ba9956cb2a1bf105d5/library/test/src/lib.rs:575:5\r\n  21:     0x55a780be115d - <alloc::boxed::Box<F,A> as core::ops::function::FnOnce<Args>>::call_once::h4ee9be99affacb0f\r\n                               at /rustc/1e12aef3fab243407f9d71ba9956cb2a1bf105d5/library/alloc/src/boxed.rs:1854:9\r\n  22:     0x55a780be115d - <core::panic::unwind_safe::AssertUnwindSafe<F> as core::ops::function::FnOnce<()>>::call_once::h28201f0d6ec2068a\r\n                               at /rustc/1e12aef3fab243407f9d71ba9956cb2a1bf105d5/library/core/src/panic/unwind_safe.rs:271:9\r\n  23:     0x55a780be115d - std::panicking::try::do_call::hc6185aa5fff2063e\r\n                               at /rustc/1e12aef3fab243407f9d71ba9956cb2a1bf105d5/library/std/src/panicking.rs:492:40\r\n  24:     0x55a780be115d - std::panicking::try::hb602029255393744\r\n                               at /rustc/1e12aef3fab243407f9d71ba9956cb2a1bf105d5/library/std/src/panicking.rs:456:19\r\n  25:     0x55a780be115d - std::panic::catch_unwind::heeeeea0671593c22\r\n                               at /rustc/1e12aef3fab243407f9d71ba9956cb2a1bf105d5/library/std/src/panic.rs:137:14\r\n  26:     0x55a780be115d - test::run_test_in_process::h3ce9cfc9fdbcee7a\r\n                               at /rustc/1e12aef3fab243407f9d71ba9956cb2a1bf105d5/library/test/src/lib.rs:598:18\r\n  27:     0x55a780be115d - test::run_test::run_test_inner::{{closure}}::hdff2b3e1656f98cd\r\n                               at /rustc/1e12aef3fab243407f9d71ba9956cb2a1bf105d5/library/test/src/lib.rs:492:39\r\n  28:     0x55a780beaa21 - test::run_test::run_test_inner::{{closure}}::h9f1d586a6ef9df4b\r\n                               at /rustc/1e12aef3fab243407f9d71ba9956cb2a1bf105d5/library/test/src/lib.rs:519:37\r\n  29:     0x55a780beaa21 - std::sys_common::backtrace::__rust_begin_short_backtrace::h00494840398bee50\r\n                               at /rustc/1e12aef3fab243407f9d71ba9956cb2a1bf105d5/library/std/src/sys_common/backtrace.rs:122:18\r\n  30:     0x55a780bb6a7f - std::thread::Builder::spawn_unchecked_::{{closure}}::{{closure}}::h67c40c52080f039b\r\n                               at /rustc/1e12aef3fab243407f9d71ba9956cb2a1bf105d5/library/std/src/thread/mod.rs:498:17\r\n  31:     0x55a780bb6a7f - <core::panic::unwind_safe::AssertUnwindSafe<F> as core::ops::function::FnOnce<()>>::call_once::h0170d0df3f1089c7\r\n                               at /rustc/1e12aef3fab243407f9d71ba9956cb2a1bf105d5/library/core/src/panic/unwind_safe.rs:271:9\r\n  32:     0x55a780bb6a7f - std::panicking::try::do_call::h58c11b7f9ff3e26a\r\n                               at /rustc/1e12aef3fab243407f9d71ba9956cb2a1bf105d5/library/std/src/panicking.rs:492:40\r\n  33:     0x55a780bb6a7f - std::panicking::try::h34ff80b8b781efbd\r\n                               at /rustc/1e12aef3fab243407f9d71ba9956cb2a1bf105d5/library/std/src/panicking.rs:456:19\r\n  34:     0x55a780bb6a7f - std::panic::catch_unwind::h342638075d359033\r\n                               at /rustc/1e12aef3fab243407f9d71ba9956cb2a1bf105d5/library/std/src/panic.rs:137:14\r\n  35:     0x55a780bb6a7f - std::thread::Builder::spawn_unchecked_::{{closure}}::h50918b4d51ab8a21\r\n                               at /rustc/1e12aef3fab243407f9d71ba9956cb2a1bf105d5/library/std/src/thread/mod.rs:497:30\r\n  36:     0x55a780bb6a7f - core::ops::function::FnOnce::call_once{{vtable.shim}}::hda7049ec592f5801\r\n                               at /rustc/1e12aef3fab243407f9d71ba9956cb2a1bf105d5/library/core/src/ops/function.rs:227:5\r\n  37:     0x55a780c17323 - <alloc::boxed::Box<F,A> as core::ops::function::FnOnce<Args>>::call_once::h353fa42c42b20ec5\r\n                               at /rustc/1e12aef3fab243407f9d71ba9956cb2a1bf105d5/library/alloc/src/boxed.rs:1854:9\r\n  38:     0x55a780c17323 - <alloc::boxed::Box<F,A> as core::ops::function::FnOnce<Args>>::call_once::h0930c1c2fa5dac80\r\n                               at /rustc/1e12aef3fab243407f9d71ba9956cb2a1bf105d5/library/alloc/src/boxed.rs:1854:9\r\n  39:     0x55a780c17323 - std::sys::unix::thread::Thread::new::thread_start::hb3ede8336acd4f71\r\n                               at /rustc/1e12aef3fab243407f9d71ba9956cb2a1bf105d5/library/std/src/sys/unix/thread.rs:108:17\r\n  40:     0x7f7d1843c6db - start_thread\r\n                               at /build/glibc-2ORdQG/glibc-2.27/nptl/pthread_create.c:463\r\n  41:     0x7f7d177a3a3f - clone\r\n                               at /build/glibc-2ORdQG/glibc-2.27/misc/../sysdeps/unix/sysv/linux/x86_64/clone.S:95\r\n  42:                0x0 - <unknown>\r\ntest rate_limiter::tests::test_rate_limited_hybrid_flow ... FAILED\r\ntest tests::test_sha256 ... ok\r\ntest rate_limiter::tests::test_rate_limit_toggle ... ok\r\ntest rate_limiter::tests::test_rate_limit_dynamic_priority ... ok\r\ntest rate_limiter::tests::test_rate_limited_heavy_flow ... ok\r\n\r\nfailures:\r\n\r\nfailures:\r\n    rate_limiter::tests::test_rate_limited_hybrid_flow\r\n    rate_limiter::tests::test_rate_limited_light_flow\r\n\r\ntest result: FAILED. 17 passed; 2 failed; 0 ignored; 0 measured; 0 filtered out; finished in 6.09s\r\n\r\nerror: test failed, to rerun pass '-p file_system --lib'\r\nMakefile:252: recipe for target 'run' failed\r\nmake[1]: *** [run] Error 101\r\nmake[1]: Leaving directory '/home/cosven/pingcap/tikv'\r\nMakefile:260: recipe for target 'test' failed\r\nmake: *** [test] Error 2\r\n```\r\n",
  "state": "open",
  "created_at": "2022-02-25T03:02:03Z",
  "updated_at": "2022-04-20T09:33:43Z",
  "closed_at": null,
  "labels": [
    "type/bug",
    "severity/minor",
    "component/test"
  ],
  "comments_data": [
    {
      "id": 1050477024,
      "user": "cosven",
      "created_at": "2022-02-25T03:10:39Z",
      "body": "I found https://github.com/tikv/tikv/pull/10304 tried to fix this issue once, however, the two testcases may still fail."
    },
    {
      "id": 1067500849,
      "user": "Lily2025",
      "created_at": "2022-03-15T02:37:02Z",
      "body": "/component test"
    },
    {
      "id": 1067502327,
      "user": "cosven",
      "created_at": "2022-03-15T02:39:38Z",
      "body": "/assign @tabokie "
    }
  ]
}