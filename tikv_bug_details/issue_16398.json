{
  "issue_number": 16398,
  "title": "\"thread_id\" field in log is wrong and always 0x5",
  "body": "## Bug Report\r\n\r\n<!-- Thanks for your bug report! Don't worry if you can't fill out all the sections. -->\r\n\r\nAs title, see logs below.\r\n\r\n```\r\n[2024/01/03 15:11:49.005 +08:00] [INFO] [lib.rs:88] [\"Welcome to TiKV\"] [thread_id=0x5]\r\n[2024/01/03 15:11:49.006 +08:00] [INFO] [lib.rs:93] [\"Release Version:   7.6.0-alpha\"] [thread_id=0x5]\r\n[2024/01/03 15:11:49.006 +08:00] [INFO] [lib.rs:93] [\"Edition:           Community\"] [thread_id=0x5]\r\n[2024/01/03 15:11:49.006 +08:00] [INFO] [lib.rs:93] [\"Git Commit Hash:   78d835d91b07fb5c18e1158c21841fd43116bc02\"] [thread_id=0x5]\r\n[2024/01/03 15:11:49.006 +08:00] [INFO] [lib.rs:93] [\"Git Commit Branch: heads/refs/tags/v7.6.0-alpha\"] [thread_id=0x5]\r\n[2024/01/03 15:11:49.006 +08:00] [INFO] [lib.rs:93] [\"UTC Build Time:    Unknown (env var does not exist when building)\"] [thread_id=0x5]\r\n[2024/01/03 15:11:49.006 +08:00] [INFO] [lib.rs:93] [\"Rust Version:      rustc 1.67.0-nightly (96ddd32c4 2022-11-14)\"] [thread_id=0x5]\r\n[2024/01/03 15:11:49.006 +08:00] [INFO] [lib.rs:93] [\"Enable Features:   pprof-fp jemalloc mem-profiling portable sse test-engine-kv-rocksdb test-engine-raft-raft-engine cloud-aws cloud-gcp cloud-azure\"] [thread_id=0x5]\r\n[2024/01/03 15:11:49.006 +08:00] [INFO] [lib.rs:93] [\"Profile:           dist_release\"] [thread_id=0x5]\r\n[2024/01/03 15:11:49.006 +08:00] [INFO] [mod.rs:80] [\"cgroup quota: memory=Some(9223372036854771712), cpu=None, cores={2, 3, 5, 7, 4, 0, 1, 6}\"] [thread_id=0x5]\r\n[2024/01/03 15:11:49.006 +08:00] [INFO] [mod.rs:87] [\"memory limit in bytes: 34770685952, cpu cores quota: 8\"] [thread_id=0x5]\r\n[2024/01/03 15:11:49.006 +08:00] [WARN] [lib.rs:557] [\"environment variable `TZ` is missing, using `/etc/localtime`\"] [thread_id=0x5]\r\n[2024/01/03 15:11:49.006 +08:00] [WARN] [server.rs:1615] [\"check: kernel\"] [err=\"kernel parameters net.core.somaxconn got 128, expect 32768\"] [thread_id=0x5]\r\n[2024/01/03 15:11:49.006 +08:00] [WARN] [server.rs:1615] [\"check: kernel\"] [err=\"kernel parameters net.ipv4.tcp_syncookies got 1, expect 0\"] [thread_id=0x5]\r\n[2024/01/03 15:11:49.006 +08:00] [WARN] [server.rs:1615] [\"check: kernel\"] [err=\"kernel parameters vm.swappiness got 30, expect 0\"] [thread_id=0x5]\r\n[2024/01/03 15:11:49.009 +08:00] [INFO] [util.rs:638] [\"connecting to PD endpoint\"] [endpoints=127.0.0.1:3379] [thread_id=0x5]\r\n[2024/01/03 15:11:49.011 +08:00] [INFO] [<unknown>] [\"TCP_USER_TIMEOUT is available. TCP_USER_TIMEOUT will be used thereafter\"] [thread_id=0x5]\r\n[2024/01/03 15:11:51.011 +08:00] [INFO] [util.rs:600] [\"PD failed to respond\"] [err=\"Grpc(RpcFailure(RpcStatus { code: 4-DEADLINE_EXCEEDED, message: \\\"Deadline Exceeded\\\", details: [] }))\"] [endpoints=127.0.0.1:3379] [thread_id=0x5]\r\n[2024/01/03 15:11:51.011 +08:00] [WARN] [client.rs:169] [\"validate PD endpoints failed\"] [err=\"Other(\\\"[components/pd_client/src/util.rs:633]: PD cluster failed to respond\\\")\"] [thread_id=0x5]\r\n[2024/01/03 15:11:51.312 +08:00] [INFO] [util.rs:638] [\"connecting to PD endpoint\"] [endpoints=127.0.0.1:3379] [thread_id=0x5]\r\n[2024/01/03 15:11:51.738 +08:00] [INFO] [util.rs:638] [\"connecting to PD endpoint\"] [endpoints=127.0.0.1:3379] [thread_id=0x5]\r\n[2024/01/03 15:11:51.745 +08:00] [INFO] [util.rs:638] [\"connecting to PD endpoint\"] [endpoints=https://127.0.0.1:3379] [thread_id=0x5]\r\n[2024/01/03 15:11:51.751 +08:00] [INFO] [util.rs:638] [\"connecting to PD endpoint\"] [endpoints=https://127.0.0.1:3379] [thread_id=0x5]\r\n[2024/01/03 15:11:51.757 +08:00] [INFO] [util.rs:807] [\"connected to PD member\"] [endpoints=https://127.0.0.1:3379] [thread_id=0x5]\r\n[2024/01/03 15:11:51.757 +08:00] [INFO] [util.rs:630] [\"all PD endpoints are consistent\"] [endpoints=\"[\\\"127.0.0.1:3379\\\"]\"] [thread_id=0x5]\r\n[2024/01/03 15:11:51.757 +08:00] [INFO] [common.rs:327] [\"connect to PD cluster\"] [cluster_id=7296781250045487992] [thread_id=0x5]\r\n[2024/01/03 15:11:51.758 +08:00] [INFO] [mod.rs:2538] [\"readpool.storage.use-unified-pool is not set, set to true by default\"] [thread_id=0x5]\r\n[2024/01/03 15:11:51.758 +08:00] [INFO] [mod.rs:2561] [\"readpool.coprocessor.use-unified-pool is not set, set to true by default\"] [thread_id=0x5]\r\n[2024/01/03 15:11:51.759 +08:00] [WARN] [config.rs:668] [\"Election timeout ticks needs to be same across all the cluster, otherwise it may lead to inconsistency.\"] [thread_id=0x5]\r\n[2024/01/03 15:11:51.762 +08:00] [WARN] [config.rs:668] [\"Election timeout ticks needs to be same across all the cluster, otherwise it may lead to inconsistency.\"] [thread_id=0x5]\r\n[2024/01/03 15:11:51.762 +08:00] [INFO] [common.rs:447] [\"beginning system configuration check\"] [thread_id=0x5]\r\n[2024/01/03 15:11:51.762 +08:00] [INFO] [config.rs:1077] [\"data dir\"] [mount_fs=\"FsInfo { tp: \\\"ext4\\\", opts: \\\"rw,relatime\\\", mnt_dir: \\\"/\\\", fsname: \\\"/dev/vda3\\\" }\"] [data_path=/home/stn/stash/cluster/mini-insecure/tidb-data/tikv-21160] [thread_id=0x5]\r\n[2024/01/03 15:11:51.762 +08:00] [WARN] [config.rs:1080] [\"not on SSD device\"] [data_path=/home/stn/stash/cluster/mini-insecure/tidb-data/tikv-21160] [thread_id=0x5]\r\n[2024/01/03 15:11:51.762 +08:00] [INFO] [config.rs:1077] [\"data dir\"] [mount_fs=\"FsInfo { tp: \\\"ext4\\\", opts: \\\"rw,relatime\\\", mnt_dir: \\\"/\\\", fsname: \\\"/dev/vda3\\\" }\"] [data_path=/home/stn/stash/cluster/mini-insecure/tidb-data/tikv-21160/raft] [thread_id=0x5]\r\n[2024/01/03 15:11:51.762 +08:00] [WARN] [config.rs:1080] [\"not on SSD device\"] [data_path=/home/stn/stash/cluster/mini-insecure/tidb-data/tikv-21160/raft] [thread_id=0x5]\r\n...\r\n[2024/01/03 15:11:52.081 +08:00] [INFO] [store.rs:1323] [\"start store\"] [takes=2.812964ms] [merge_count=0] [applying_count=0] [tombstone_count=0] [region_count=60] [store_id=1] [thread_id=0x5]\r\n[2024/01/03 15:11:52.081 +08:00] [INFO] [store.rs:1379] [\"cleans up garbage data\"] [takes=28.839<C2><B5>s] [garbage_range_count=61] [store_id=1] [thread_id=0x5]\r\n[2024/01/03 15:11:52.083 +08:00] [INFO] [peer.rs:5401] [\"require updating max ts\"] [initial_status=47244640264] [region_id=2] [thread_id=0x5]\r\n[2024/01/03 15:11:52.083 +08:00] [INFO] [peer.rs:5401] [\"require updating max ts\"] [initial_status=47244640262] [region_id=4] [thread_id=0x5]\r\n[2024/01/03 15:11:52.083 +08:00] [INFO] [peer.rs:5401] [\"require updating max ts\"] [initial_status=47244640264] [region_id=6] [thread_id=0x5]\r\n[2024/01/03 15:11:52.083 +08:00] [INFO] [peer.rs:5401] [\"require updating max ts\"] [initial_status=47244640266] [region_id=8] [thread_id=0x5]\r\n[2024/01/03 15:11:52.083 +08:00] [INFO] [peer.rs:5401] [\"require updating max ts\"] [initial_status=47244640268] [region_id=10] [thread_id=0x5]\r\n[2024/01/03 15:11:52.083 +08:00] [INFO] [peer.rs:5401] [\"require updating max ts\"] [initial_status=47244640270] [region_id=12] [thread_id=0x5]\r\n[2024/01/03 15:11:52.083 +08:00] [INFO] [peer.rs:5401] [\"require updating max ts\"] [initial_status=47244640276] [region_id=16] [thread_id=0x5]\r\n```\r\n\r\nCc #15638\r\n\r\n### Steps to reproduce\r\n<!-- If possible, provide a recipe for reproducing the error. A complete runnable program is good. -->\r\n\r\nJust run TiKV.\r\n",
  "state": "closed",
  "created_at": "2024-01-17T07:52:26Z",
  "updated_at": "2024-01-17T09:54:18Z",
  "closed_at": "2024-01-17T09:54:18Z",
  "labels": [
    "type/bug",
    "severity/minor",
    "affects-7.5",
    "affects-7.6"
  ],
  "comments_data": []
}