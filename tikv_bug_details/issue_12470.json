{
  "issue_number": 12470,
  "title": "Raft Engine is in inconsistent state after snapshot apply is interrupted",
  "body": "## Bug Report\r\n\r\n### What version of TiKV are you using?\r\nThe developing binary:\r\n```\r\nRelease Version:   6.0.0-alpha\r\nEdition:           Community\r\nGit Commit Hash:   96d1b512850255a7c216ef9f7580e6a99991d31b\r\nGit Commit Branch: br-stream-test\r\nUTC Build Time:    2022-04-18 09:15:15\r\nRust Version:      rustc 1.60.0-nightly (1e12aef3f 2022-02-13)\r\nEnable Features:   jemalloc mem-profiling portable sse test-engines-rocksdb cloud-aws cloud-gcp cloud-azure\r\nProfile:           debug\r\n```\r\nYou can find this branch at [`96d1b512`](https://github.com/tikv/tikv/tree/96d1b512850255a7c216ef9f7580e6a99991d31b). (Also note that this is a *DEBUG* build).\r\n\r\n### What operating system and CPU are you using?\r\n<!-- If you're using Linux, you can run `cat /proc/cpuinfo` -->\r\n`Intel(R) Xeon(R) Silver 4214R CPU @ 2.40GHz`\r\n\r\n### Steps to reproduce\r\n<!-- If possible, provide a recipe for reproducing the error. A complete runnable program is good. -->\r\nWe just built many requests with 1/2 max raft entry size, and send them to RaftStore directly via the `RaftStoreRouter`. \r\n\r\n### What did you expect?\r\nThe write should success. \r\n\r\n### What did happened?\r\nThe write failed and the tikv-server paniked with message “sync-writer failed to write to raft engine”. \r\n![middle_img_v2_0d5cccc0-7021-4881-83e6-f0a76ead604g](https://user-images.githubusercontent.com/36239017/167347451-2945dbac-48b3-4411-bc8e-293478f180b9.png)\r\n\r\nAnd the server cannot be bootstrapped again because the `memtable %d has a hole`.\r\n![iGDMIz5no6](https://user-images.githubusercontent.com/36239017/167347520-8c48b853-56cd-4f05-8f95-7ccee9344a8e.jpg)\r\n",
  "state": "closed",
  "created_at": "2022-05-09T06:17:06Z",
  "updated_at": "2022-05-25T12:52:48Z",
  "closed_at": "2022-05-25T12:52:48Z",
  "labels": [
    "type/bug",
    "severity/major",
    "affects-6.0",
    "affects-6.1"
  ],
  "comments_data": [
    {
      "id": 1120689650,
      "user": "tabokie",
      "created_at": "2022-05-09T06:21:45Z",
      "body": "Logs for region 11629 before the first panic:\r\n```\r\n[2022/05/09 11:46:33.112 +08:00] [INFO] [apply.rs:1385] [\"execute admin command\"] [command=\"cmd_type: BatchSplit splits { requests { split_key: 7480000000000000FF925F698000000000FF000001FB00000000FB new_region_id: 11565 new_peer_ids: 11566 new_peer_ids: 11567 new_peer_ids: 11568 } requests { split_key: 7480000000000000FF925F72FFFFFFFFFFFFFFFFFF0000000000FB new_region_id: 11569 new_peer_ids: 11570 new_peer_ids: 11571 new_peer_ids: 11572 } requests { split_key: 7480000000000000FF935F698000000000FF000001FB00000000FB new_region_id: 11573 new_peer_ids: 11574 new_peer_ids: 11575 new_peer_ids: 11576 } requests { split_key: 7480000000000000FF935F72FFFFFFFFFFFFFFFFFF0000000000FB new_region_id: 11577 new_peer_ids: 11578 new_peer_ids: 11579 new_peer_ids: 11580 } requests { split_key: 7480000000000000FF945F698000000000FF000001FB00000000FB new_region_id: 11581 new_peer_ids: 11582 new_peer_ids: 11583 new_peer_ids: 11584 } requests { split_key: 7480000000000000FF945F72FFFFFFFFFFFFFFFFFF0000000000FB new_region_id: 11585 new_peer_ids: 11586 new_peer_ids: 11587 new_peer_ids: 11588 } requests { split_key: 7480000000000000FF955F698000000000FF000001FB00000000FB new_region_id: 11589 new_peer_ids: 11590 new_peer_ids: 11591 new_peer_ids: 11592 } requests { split_key: 7480000000000000FF955F72FFFFFFFFFFFFFFFFFF0000000000FB new_region_id: 11593 new_peer_ids: 11594 new_peer_ids: 11595 new_peer_ids: 11596 } requests { split_key: 7480000000000000FF965F698000000000FF000001FB00000000FB new_region_id: 11597 new_peer_ids: 11598 new_peer_ids: 11599 new_peer_ids: 11600 } requests { split_key: 7480000000000000FF965F72FFFFFFFFFFFFFFFFFF0000000000FB new_region_id: 11601 new_peer_ids: 11602 new_peer_ids: 11603 new_peer_ids: 11604 } requests { split_key: 7480000000000000FF975F698000000000FF000001FB00000000FB new_region_id: 11605 new_peer_ids: 11606 new_peer_ids: 11607 new_peer_ids: 11608 } requests { split_key: 7480000000000000FF975F72FFFFFFFFFFFFFFFFFF0000000000FB new_region_id: 11609 new_peer_ids: 11610 new_peer_ids: 11611 new_peer_ids: 11612 } requests { split_key: 7480000000000000FF985F698000000000FF000001FB00000000FB new_region_id: 11613 new_peer_ids: 11614 new_peer_ids: 11615 new_peer_ids: 11616 } requests { split_key: 7480000000000000FF985F72FFFFFFFFFFFFFFFFFF0000000000FB new_region_id: 11617 new_peer_ids: 11618 new_peer_ids: 11619 new_peer_ids: 11620 } requests { split_key: 7480000000000000FF995F698000000000FF000001FB00000000FB new_region_id: 11621 new_peer_ids: 11622 new_peer_ids: 11623 new_peer_ids: 11624 } requests { split_key: 7480000000000000FF995F72FFFFFFFFFFFFFFFFFF0000000000FB new_region_id: 11625 new_peer_ids: 11626 new_peer_ids: 11627 new_peer_ids: 11628 } requests { split_key: 7480000000000000FF9A5F698000000000FF000001FB00000000FB new_region_id: 11629 new_peer_ids: 11630 new_peer_ids: 11631 new_peer_ids: 11632 } requests { split_key: 7480000000000000FF9A5F72FFFFFFFFFFFFFFFFFF0000000000FB new_region_id: 11633 new_peer_ids: 11634 new_peer_ids: 11635 new_peer_ids: 11636 } requests { split_key: 7480000000000000FF9B5F698000000000FF000001FB00000000FB new_region_id: 11637 new_peer_ids: 11638 new_peer_ids: 11639 new_peer_ids: 11640 } requests { split_key: 7480000000000000FF9B5F72FFFFFFFFFFFFFFFFFF0000000000FB new_region_id: 11641 new_peer_ids: 11642 new_peer_ids: 11643 new_peer_ids: 11644 } right_derive: true }\"] [index=631] [term=9] [peer_id=4621] [region_id=4620]\r\n[2022/05/09 11:46:33.130 +08:00] [INFO] [peer.rs:3168] [\"insert new region\"] [region=\"id: 11629 start_key: 7480000000000000FF995F72FFFFFFFFFFFFFFFFFF0000000000FB end_key: 7480000000000000FF9A5F698000000000FF000001FB00000000FB region_epoch { conf_ver: 17 version: 143 } peers { id: 11630 store_id: 1 } peers { id: 11631 store_id: 5 } peers { id: 11632 store_id: 4 }\"] [region_id=11629]\r\n[2022/05/09 11:46:33.130 +08:00] [INFO] [peer.rs:242] [\"create peer\"] [peer_id=11630] [region_id=11629]\r\n[2022/05/09 11:46:33.130 +08:00] [INFO] [raft.rs:2646] [\"switched to configuration\"] [config=\"Configuration { voters: Configuration { incoming: Configuration { voters: {11632, 11630, 11631} }, outgoing: Configuration { voters: {} } }, learners: {}, learners_next: {}, auto_leave: false }\"] [raft_id=11630] [region_id=11629]\r\n[2022/05/09 11:46:33.130 +08:00] [INFO] [raft.rs:1120] [\"became follower at term 5\"] [term=5] [raft_id=11630] [region_id=11629]\r\n[2022/05/09 11:46:33.130 +08:00] [INFO] [raft.rs:384] [newRaft] [peers=\"Configuration { incoming: Configuration { voters: {11632, 11630, 11631} }, outgoing: Configuration { voters: {} } }\"] [\"last term\"=5] [\"last index\"=5] [applied=5] [commit=5] [term=5] [raft_id=11630] [region_id=11629]\r\n[2022/05/09 11:46:33.130 +08:00] [INFO] [raw_node.rs:315] [\"RawNode created with id 11630.\"] [id=11630] [raft_id=11630] [region_id=11629]\r\n[2022/05/09 11:46:33.770 +08:00] [INFO] [raft.rs:1565] [\"[logterm: 5, index: 5, vote: 0] cast vote for 11632 [logterm: 5, index: 5] at term 5\"] [\"msg type\"=MsgRequestPreVote] [term=5] [msg_index=5] [msg_term=5] [from=11632] [vote=0] [log_index=5] [log_term=5] [raft_id=11630] [region_id=11629]\r\n[2022/05/09 11:46:33.776 +08:00] [INFO] [raft.rs:1364] [\"received a message with higher term from 11632\"] [\"msg type\"=MsgRequestVote] [message_term=6] [term=5] [from=11632] [raft_id=11630] [region_id=11629]\r\n[2022/05/09 11:46:33.776 +08:00] [INFO] [raft.rs:1120] [\"became follower at term 6\"] [term=6] [raft_id=11630] [region_id=11629]\r\n[2022/05/09 11:46:33.776 +08:00] [INFO] [raft.rs:1565] [\"[logterm: 5, index: 5, vote: 0] cast vote for 11632 [logterm: 5, index: 5] at term 6\"] [\"msg type\"=MsgRequestVote] [term=6] [msg_index=5] [msg_term=5] [from=11632] [vote=0] [log_index=5] [log_term=5] [raft_id=11630] [region_id=11629]\r\n[2022/05/09 11:46:33.782 +08:00] [INFO] [endpoint.rs:692] [\"backup stream: on_modify_observe\"] [op=\"Stop { region: id: 11629 start_key: 7480000000000000FF995F72FFFFFFFFFFFFFFFFFF0000000000FB end_key: 7480000000000000FF9A5F698000000000FF000001FB00000000FB region_epoch { conf_ver: 17 version: 143 } peers { id: 11630 store_id: 1 } peers { id: 11631 store_id: 5 } peers { id: 11632 store_id: 4 } }\"]\r\n[2022/05/09 11:46:33.782 +08:00] [WARN] [subscription_track.rs:143] [\"trying to deregister region not registered\"] [region_id=11629]\r\n[2022/05/09 11:46:33.808 +08:00] [INFO] [raft.rs:1364] [\"received a message with higher term from 11631\"] [\"msg type\"=MsgRequestVote] [message_term=7] [term=6] [from=11631] [raft_id=11630] [region_id=11629]\r\n[2022/05/09 11:46:33.808 +08:00] [INFO] [raft.rs:1120] [\"became follower at term 7\"] [term=7] [raft_id=11630] [region_id=11629]\r\n[2022/05/09 11:46:33.808 +08:00] [INFO] [raft.rs:1565] [\"[logterm: 6, index: 6, vote: 0] cast vote for 11631 [logterm: 6, index: 6] at term 7\"] [\"msg type\"=MsgRequestVote] [term=7] [msg_index=6] [msg_term=6] [from=11631] [vote=0] [log_index=6] [log_term=6] [raft_id=11630] [region_id=11629]\r\n[2022/05/09 11:46:33.808 +08:00] [INFO] [endpoint.rs:692] [\"backup stream: on_modify_observe\"] [op=\"Stop { region: id: 11629 start_key: 7480000000000000FF995F72FFFFFFFFFFFFFFFFFF0000000000FB end_key: 7480000000000000FF9A5F698000000000FF000001FB00000000FB region_epoch { conf_ver: 17 version: 143 } peers { id: 11630 store_id: 1 } peers { id: 11631 store_id: 5 } peers { id: 11632 store_id: 4 } }\"]\r\n[2022/05/09 11:46:33.808 +08:00] [WARN] [subscription_track.rs:143] [\"trying to deregister region not registered\"] [region_id=11629]\r\n[2022/05/09 11:46:33.810 +08:00] [INFO] [endpoint.rs:692] [\"backup stream: on_modify_observe\"] [op=\"Stop { region: id: 11629 start_key: 7480000000000000FF995F72FFFFFFFFFFFFFFFFFF0000000000FB end_key: 7480000000000000FF9A5F698000000000FF000001FB00000000FB region_epoch { conf_ver: 17 version: 143 } peers { id: 11630 store_id: 1 } peers { id: 11631 store_id: 5 } peers { id: 11632 store_id: 4 } }\"]\r\n[2022/05/09 11:46:33.810 +08:00] [WARN] [subscription_track.rs:143] [\"trying to deregister region not registered\"] [region_id=11629]\r\n[2022/05/09 11:46:48.361 +08:00] [INFO] [sst_importer.rs:199] [download] [range=\"Some(start: 7480000000000000FF9A5F698000000000FF0000010380000000FF000000B303800000FF0000004E9A000000FCF9FD85C61563FFD9 end: 7480000000000000FF9A5F698000000000FF0000010380000000FF0000032503800000FF00000136B2000000FCF9FD85BDF5B3FFDE)\"] [name=8_223_66_e7591a906cd11f79dbcad3570564167ae9a5c2158a327a5af68b9dc1db255df5_1651927738772_write.sst] [meta=\"uuid: BFF6C498A81D4C97930F5E5924BC0AD0 range { start: 7480000000000000FF9A5F698000000000FF000001 end: 7480000000000000FF9A5F698000000000FF000001FB00000000FB } length: 1056968 cf_name: \\\"write\\\" region_id: 11629 region_epoch { conf_ver: 17 version: 143 } cipher_iv: 6CB839C76FE19B4D538445430C48A733\"]\r\n[2022/05/09 11:46:49.227 +08:00] [INFO] [sst_importer.rs:138] [ingest] [metas=\"[SSTMetaInfo { total_bytes: 6779700, total_kvs: 90396, meta: uuid: BFF6C498A81D4C97930F5E5924BC0AD0 range { start: 7480000000000000FF9A5F698000000000FF0000010380000000FF000000B303800000FF0000004E9A000000FC end: 7480000000000000FF9A5F698000000000FF0000010380000000FF0000032503800000FF00000136B2000000FC } length: 1056968 cf_name: \\\"write\\\" region_id: 11629 region_epoch { conf_ver: 17 version: 143 } cipher_iv: 6CB839C76FE19B4D538445430C48A733 }, SSTMetaInfo { total_bytes: 6825600, total_kvs: 91008, meta: uuid: 3F402E1865514DD08C003ABB1A0C561D range { start: 7480000000000000FF9B5F698000000000FF0000010380000000FF000000C103800000FF0000011E9E000000FC end: 7480000000000000FF9B5F698000000000FF0000010380000000FF0000034303800000FF00000119F6000000FC } length: 1073584 cf_name: \\\"write\\\" region_id: 11637 region_epoch { conf_ver: 17 version: 143 } cipher_iv: 9D71240A2D8BE5578F8E30FE857513CC }, SSTMetaInfo { total_bytes: 22689396, total_kvs: 90396, meta: uuid: 6FB7BD3D93B146698446B01CDEB5C046 range { start: 7480000000000000FF9A5F728000000000FF0000010000000000FA end: 7480000000000000FF9A5F728000000000FF01611C0000000000FA } length: 9413325 cf_name: \\\"write\\\" region_id: 11633 region_epoch { conf_ver: 17 version: 143 } cipher_iv: 6B6957D8BDF4B19FD49A7173E8FFAC5E }, SSTMetaInfo { total_bytes: 22557872, total_kvs: 89872, meta: uuid: D5DFC2023267420AAD72D5C808CD29EC range { start: 7480000000000000FF965F728000000000FF0000010000000000FA end: 7480000000000000FF965F728000000000FF015F100000000000FA } length: 9362258 cf_name: \\\"write\\\" region_id: 11601 region_epoch { conf_ver: 23 version: 143 } cipher_iv: 29F2DDF71FF20F19DE98B3614C52B0F8 }]\"]\r\n[2022/05/09 11:46:49.228 +08:00] [INFO] [sst_importer.rs:103] [delete] [path=\"ImportPath { save: \\\"/data2/pitr-1/tikv-31161/data/import/bff6c498-a81d-4c97-930f-5e5924bc0ad0_11629_17_143_write.sst\\\", temp: \\\"/data2/pitr-1/tikv-31161/data/import/.temp/bff6c498-a81d-4c97-930f-5e5924bc0ad0_11629_17_143_write.sst\\\", clone: \\\"/data2/pitr-1/tikv-31161/data/import/.clone/bff6c498-a81d-4c97-930f-5e5924bc0ad0_11629_17_143_write.sst\\\" }\"]\r\n[2022/05/09 11:50:05.318 +08:00] [INFO] [peer.rs:242] [\"create peer\"] [peer_id=11630] [region_id=11629]\r\n[2022/05/09 11:50:05.318 +08:00] [INFO] [raft.rs:2646] [\"switched to configuration\"] [config=\"Configuration { voters: Configuration { incoming: Configuration { voters: {11632, 11630, 11631} }, outgoing: Configuration { voters: {} } }, learners: {}, learners_next: {}, auto_leave: false }\"] [raft_id=11630] [region_id=11629]\r\n[2022/05/09 11:50:05.318 +08:00] [INFO] [raft.rs:1120] [\"became follower at term 7\"] [term=7] [raft_id=11630] [region_id=11629]\r\n[2022/05/09 11:50:05.318 +08:00] [INFO] [raft.rs:384] [newRaft] [peers=\"Configuration { incoming: Configuration { voters: {11632, 11630, 11631} }, outgoing: Configuration { voters: {} } }\"] [\"last term\"=7] [\"last index\"=8] [applied=8] [commit=8] [term=7] [raft_id=11630] [region_id=11629]\r\n[2022/05/09 11:50:05.318 +08:00] [INFO] [raw_node.rs:315] [\"RawNode created with id 11630.\"] [id=11630] [raft_id=11630] [region_id=11629]\r\n[2022/05/09 11:50:39.489 +08:00] [INFO] [raft.rs:1364] [\"received a message with higher term from 11632\"] [\"msg type\"=MsgHeartbeat] [message_term=8] [term=7] [from=11632] [raft_id=11630] [region_id=11629]\r\n[2022/05/09 11:50:39.489 +08:00] [INFO] [raft.rs:1120] [\"became follower at term 8\"] [term=8] [raft_id=11630] [region_id=11629]\r\n[2022/05/09 11:50:39.489 +08:00] [INFO] [endpoint.rs:692] [\"backup stream: on_modify_observe\"] [op=\"Stop { region: id: 11629 start_key: 7480000000000000FF995F72FFFFFFFFFFFFFFFFFF0000000000FB end_key: 7480000000000000FF9A5F698000000000FF000001FB00000000FB region_epoch { conf_ver: 17 version: 143 } peers { id: 11630 store_id: 1 } peers { id: 11631 store_id: 5 } peers { id: 11632 store_id: 4 } }\"]\r\n[2022/05/09 11:50:39.489 +08:00] [WARN] [subscription_track.rs:143] [\"trying to deregister region not registered\"] [region_id=11629]\r\n[2022/05/09 11:51:36.924 +08:00] [INFO] [snap.rs:249] [\"saving snapshot file\"] [file=/data2/pitr-1/tikv-31161/data/snap/rev_11629_8_86_(default|lock|write).sst] [snap_key=11629_8_86]\r\n\r\n[2022/05/09 11:51:39.344 +08:00] [INFO] [raft_log.rs:627] [\"log [committed=8, persisted=8, applied=8, unstable.offset=9, unstable.entries.len()=0] starts to restore snapshot [index: 86, term: 8]\"] [snapshot_term=8] [snapshot_index=86] [log=\"committed=8, persisted=8, applied=8, unstable.offset=9, unstable.entries.len()=0\"] [raft_id=11630] [region_id=11629]\r\n[2022/05/09 11:51:39.345 +08:00] [INFO] [raft.rs:2646] [\"switched to configuration\"] [config=\"Configuration { voters: Configuration { incoming: Configuration { voters: {11632, 11630, 11631} }, outgoing: Configuration { voters: {} } }, learners: {}, learners_next: {}, auto_leave: false }\"] [raft_id=11630] [region_id=11629]\r\n[2022/05/09 11:51:39.345 +08:00] [INFO] [raft.rs:2630] [\"restored snapshot\"] [snapshot_term=8] [snapshot_index=86] [last_term=8] [last_index=86] [commit=86] [raft_id=11630] [region_id=11629]\r\n[2022/05/09 11:51:39.345 +08:00] [INFO] [raft.rs:2511] [\"[commit: 86, term: 8] restored snapshot [index: 86, term: 8]\"] [snapshot_term=8] [snapshot_index=86] [commit=86] [term=8] [raft_id=11630] [region_id=11629]\r\n[2022/05/09 11:51:39.345 +08:00] [INFO] [peer_storage.rs:1444] [\"begin to apply snapshot\"] [peer_id=11630] [region_id=11629]\r\n[2022/05/09 11:51:39.345 +08:00] [INFO] [peer_storage.rs:1870] [\"finish clear peer meta\"] [takes=23.876µs] [raft_key=1] [apply_key=1] [meta_key=1] [region_id=11629]\r\n[2022/05/09 11:51:39.345 +08:00] [INFO] [peer_storage.rs:1518] [\"apply snapshot with state ok\"] [state=\"applied_index: 86 commit_index: 8 commit_term: 7 truncated_state { index: 86 term: 8 }\"] [region=\"id: 11629 start_key: 7480000000000000FF9A5F698000000000FF0000010380000000FF000001F303800000FF00003F35BD000000FC end_key: 7480000000000000FF9A5F698000000000FF000001FB00000000FB region_epoch { conf_ver: 17 version: 144 } peers { id: 11630 store_id: 1 } peers { id: 11631 store_id: 5 } peers { id: 11632 store_id: 4 }\"] [peer_id=11630] [region_id=11629]\r\n[2022/05/09 11:51:44.220 +08:00] [FATAL] [lib.rs:483] [\"store 1: sync-writer failed to write to raft engine: Other(\\\"[components/raft_log_engine/src/engine.rs:445]: Invalid Argument: Content too long 2176790974\\\")\"]\r\n[2022/05/09 11:53:36.755 +08:00] [INFO] [store.rs:1061] [\"region is applying snapshot\"] [store_id=1] [region=\"id: 11629 start_key: 7480000000000000FF9A5F698000000000FF0000010380000000FF000001F303800000FF00003F35BD000000FC end_key: 7480000000000000FF9A5F698000000000FF000001FB00000000FB region_epoch { conf_ver: 17 version: 144 } peers { id: 11630 store_id: 1 } peers { id: 11631 store_id: 5 } peers { id: 11632 store_id: 4 }\"]\r\n[2022/05/09 11:53:36.755 +08:00] [INFO] [peer.rs:242] [\"create peer\"] [peer_id=11630] [region_id=11629]\r\n[2022/05/09 11:53:36.755 +08:00] [INFO] [raft.rs:2646] [\"switched to configuration\"] [config=\"Configuration { voters: Configuration { incoming: Configuration { voters: {11632, 11630, 11631} }, outgoing: Configuration { voters: {} } }, learners: {}, learners_next: {}, auto_leave: false }\"] [raft_id=11630] [region_id=11629]\r\n[2022/05/09 11:53:36.755 +08:00] [INFO] [raft.rs:1120] [\"became follower at term 8\"] [term=8] [raft_id=11630] [region_id=11629]\r\n[2022/05/09 11:53:36.755 +08:00] [INFO] [raft.rs:384] [newRaft] [peers=\"Configuration { incoming: Configuration { voters: {11632, 11630, 11631} }, outgoing: Configuration { voters: {} } }\"] [\"last term\"=8] [\"last index\"=86] [applied=86] [commit=86] [term=8] [raft_id=11630] [region_id=11629]\r\n[2022/05/09 11:53:36.755 +08:00] [INFO] [raw_node.rs:315] [\"RawNode created with id 11630.\"] [id=11630] [raft_id=11630] [region_id=11629]\r\n[2022/05/09 11:53:36.757 +08:00] [INFO] [region.rs:326] [\"begin apply snap data\"] [region_id=11629]\r\n[2022/05/09 11:53:37.200 +08:00] [INFO] [region.rs:399] [\"apply new data\"] [time_takes=73.324248ms] [region_id=11629]\r\n[2022/05/09 11:53:58.572 +08:00] [INFO] [raft.rs:1364] [\"received a message with higher term from 11632\"] [\"msg type\"=MsgHeartbeat] [message_term=9] [term=8] [from=11632] [raft_id=11630] [region_id=11629]\r\n[2022/05/09 11:53:58.572 +08:00] [INFO] [raft.rs:1120] [\"became follower at term 9\"] [term=9] [raft_id=11630] [region_id=11629]\r\n[2022/05/09 11:53:58.572 +08:00] [INFO] [endpoint.rs:692] [\"backup stream: on_modify_observe\"] [op=\"Stop { region: id: 11629 start_key: 7480000000000000FF9A5F698000000000FF0000010380000000FF000001F303800000FF00003F35BD000000FC end_key: 7480000000000000FF9A5F698000000000FF000001FB00000000FB region_epoch { conf_ver: 17 version: 144 } peers { id: 11630 store_id: 1 } peers { id: 11631 store_id: 5 } peers { id: 11632 store_id: 4 } }\"]\r\n[2022/05/09 11:53:58.572 +08:00] [WARN] [region_info_accessor.rs:310] [\"role change on region but the region doesn't exist. create it.\"] [region_id=11629]\r\n[2022/05/09 11:53:58.572 +08:00] [WARN] [subscription_track.rs:143] [\"trying to deregister region not registered\"] [region_id=11629]\r\n```"
    },
    {
      "id": 1120696653,
      "user": "YuJuncen",
      "created_at": "2022-05-09T06:32:43Z",
      "body": "The full log: [tikv-raft-engine-failure.log](https://github.com/tikv/tikv/files/8649230/tikv-raft-engine-failure.log)\r\n"
    },
    {
      "id": 1134114806,
      "user": "zhangjinpeng87",
      "created_at": "2022-05-23T02:53:04Z",
      "body": "@tabokie what is the root cause?\r\n"
    }
  ]
}