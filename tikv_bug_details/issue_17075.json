{
  "issue_number": 17075,
  "title": "make docker fails in v8.1.0",
  "body": "## Bug Report\r\n\r\n<!-- Thanks for your bug report! Don't worry if you can't fill out all the sections. -->\r\n\r\n### What version of TiKV are you using?\r\nv8.1.0\r\n\r\n### Steps to reproduce\r\nRun `make docker`\r\n\r\n### What did happened?\r\nI get an error that rust-toolchain is missing.\r\n\r\n```\r\ndocker build \\\r\n        -t pingcap/tikv:latest \\\r\n        -f Dockerfile \\\r\n        --build-arg GIT_HASH=ba73b0d92d94463d74543550d0efe61fa6a6f416 \\\r\n        --build-arg GIT_TAG=v8.1.0 \\\r\n        --build-arg GIT_BRANCH=heads/v8.1.0 \\\r\n        .\r\n[+] Building 0.8s (15/35)\r\n => [internal] load build definition from Dockerfile                                                                                                                                                                                   0.0s\r\n => => transferring dockerfile: 4.04kB                                                                                                                                                                                                 0.0s\r\n => [internal] load .dockerignore                                                                                                                                                                                                      0.0s\r\n => => transferring context: 566B                                                                                                                                                                                                      0.0s\r\n => [internal] load metadata for docker.io/pingcap/alpine-glibc:latest                                                                                                                                                                 0.7s\r\n => [internal] load metadata for docker.io/library/centos:7.6.1810                                                                                                                                                                     0.6s\r\n => CACHED [stage-2 1/4] FROM docker.io/pingcap/alpine-glibc@sha256:ac1e1b97fcba333a13c4adf1ec45de696a52260762a10dc2d6aadfbd81ae8e1d                                                                                                   0.0s\r\n => [prepare 1/5] FROM docker.io/library/centos:7.6.1810@sha256:62d9e1c2daa91166139b51577fe4f4f6b4cc41a3a2c7fc36bd895e2a17a3e4e6                                                                                                       0.0s\r\n => [internal] load build context                                                                                                                                                                                                      0.0s\r\n => => transferring context: 106.39kB                                                                                                                                                                                                  0.0s\r\n => CACHED [builder  2/22] RUN yum install -y epel-release &&     yum clean all &&     yum makecache                                                                                                                                   0.0s\r\n => CACHED [builder  3/22] RUN yum install -y centos-release-scl &&     yum install -y       devtoolset-8       perl cmake3 &&     yum clean all                                                                                       0.0s\r\n => CACHED [builder  4/22] RUN ln -s /usr/bin/cmake3 /usr/bin/cmake                                                                                                                                                                    0.0s\r\n => CACHED [builder  5/22] RUN curl -LO \"https://github.com/protocolbuffers/protobuf/releases/download/v3.15.8/protoc-3.15.8-linux-x86_64.zip\"                                                                                         0.0s\r\n => CACHED [builder  6/22] RUN unzip protoc-3.15.8-linux-x86_64.zip -d /usr/local/                                                                                                                                                     0.0s\r\n => CACHED [builder  7/22] RUN curl https://sh.rustup.rs -sSf | sh -s -- --no-modify-path --default-toolchain none -y                                                                                                                  0.0s\r\n => CACHED [builder  8/22] WORKDIR /tikv                                                                                                                                                                                               0.0s\r\n => ERROR [builder  9/22] COPY rust-toolchain ./                                                                                                                                                                                       0.0s\r\n------\r\n > [builder  9/22] COPY rust-toolchain ./:\r\n------\r\nDockerfile:64\r\n--------------------\r\n  62 |     # Install the Rust toolchain\r\n  63 |     WORKDIR /tikv\r\n  64 | >>> COPY rust-toolchain ./\r\n  65 |     RUN rustup self update \\\r\n  66 |       && rustup set profile minimal \\\r\n--------------------\r\nerror: failed to solve: failed to compute cache key: failed to calculate checksum of ref bf81a72e-d9a6-401f-8f37-bd641a0e088d::jggocswmer3kqfj34x94mepvk: \"/rust-toolchain\": not found\r\nmake: *** [Makefile:406: docker] Error 1\r\n```\r\n\r\n`rust-toolchain` seems to have been changed to `rust-toolchain.toml` in this commit.\r\nhttps://github.com/tikv/tikv/commit/26054366368e2288ce43468610b34d29e417c20f\r\n\r\nTherefore, the following command will fail.\r\nhttps://github.com/tikv/tikv/blob/55cafccd3ba359abd12aa88c03635e8866fb3cd9/Dockerfile#L64-L67\r\n",
  "state": "closed",
  "created_at": "2024-05-29T05:17:19Z",
  "updated_at": "2024-06-08T13:07:29Z",
  "closed_at": "2024-06-08T13:07:29Z",
  "labels": [
    "type/bug",
    "severity/minor",
    "affects-8.1"
  ],
  "comments_data": []
}