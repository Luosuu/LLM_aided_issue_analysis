{
  "issue_number": 13862,
  "title": "TiKV boost failed.",
  "body": "- Version \r\n ./tikv-server --version\r\nTiKV\r\nRelease Version:   6.5.0-alpha\r\nEdition:           Community\r\nGit Commit Hash:   372ea1af320e8ba4e63dce989ddf6331e37142ac\r\nGit Commit Branch: master\r\nUTC Build Time:    2022-11-16 02:22:30\r\nRust Version:      rustc 1.67.0-nightly (96ddd32c4 2022-11-14)\r\nEnable Features:   pprof-fp jemalloc mem-profiling portable sse test-engine-kv-rocksdb test-engine-raft-raft-engine cloud-aws cloud-gcp cloud-azure\r\nProfile:           dist_release\r\n\r\n```\r\n [FATAL] [lib.rs:495] [\"there is no reactor running, must be called from the context of a Tokio 1.x runtime\"] [backtrace=\" 0: tikv_util::set_panic_hook::{{closure}}\r\n at /data4/zak/tikv/components/tikv_util/src/lib.rs:494:18\r\n 1: <alloc::boxed::Box<F,A> as core::ops::function::Fn<Args>>::call\r\n at /root/.rustup/toolchains/nightly-2022-11-15-x86_64-unknown-linux-gnu/lib/rustlib/src/rust/library/alloc/src/boxed.rs:2032:9\r\n std::panicking::rust_panic_with_hook\r\n at /root/.rustup/toolchains/nightly-2022-11-15-x86_64-unknown-linux-gnu/lib/rustlib/src/rust/library/std/src/panicking.rs:692:13\r\n 2: std::panicking::begin_panic_handler::{{closure}}\r\n at /root/.rustup/toolchains/nightly-2022-11-15-x86_64-unknown-linux-gnu/lib/rustlib/src/rust/library/std/src/panicking.rs:579:13\r\n 3: std::sys_common::backtrace::__rust_end_short_backtrace\r\n at /root/.rustup/toolchains/nightly-2022-11-15-x86_64-unknown-linux-gnu/lib/rustlib/src/rust/library/std/src/sys_common/backtrace.rs:137:18\r\n 4: rust_begin_unwind\r\n at /root/.rustup/toolchains/nightly-2022-11-15-x86_64-unknown-linux-gnu/lib/rustlib/src/rust/library/std/src/panicking.rs:575:5\r\n 5: core::panicking::panic_fmt\r\n at /root/.rustup/toolchains/nightly-2022-11-15-x86_64-unknown-linux-gnu/lib/rustlib/src/rust/library/core/src/panicking.rs:65:14\r\n 6: core::panicking::panic_display\r\n at /root/.rustup/toolchains/nightly-2022-11-15-x86_64-unknown-linux-gnu/lib/rustlib/src/rust/library/core/src/panicking.rs:138:5\r\n 7: core::panicking::panic_str\r\n at /root/.rustup/toolchains/nightly-2022-11-15-x86_64-unknown-linux-gnu/lib/rustlib/src/rust/library/core/src/panicking.rs:122:5\r\n 8: core::option::expect_failed\r\n at /root/.rustup/toolchains/nightly-2022-11-15-x86_64-unknown-linux-gnu/lib/rustlib/src/rust/library/core/src/option.rs:1879:5\r\n 9: core::option::Option<T>::expect\r\n at /root/.rustup/toolchains/nightly-2022-11-15-x86_64-unknown-linux-gnu/lib/rustlib/src/rust/library/core/src/option.rs:741:21\r\n tokio::runtime::context::time_handle::{{closure}}\r\n at /root/.cargo/registry/src/github.com-1ecc6299db9ec823/tokio-1.17.0/src/runtime/context.rs:54:13\r\n std::thread::local::LocalKey<T>::try_with\r\n at /root/.rustup/toolchains/nightly-2022-11-15-x86_64-unknown-linux-gnu/lib/rustlib/src/rust/library/std/src/thread/local.rs:446:16\r\n tokio::runtime::context::time_handle\r\n at /root/.cargo/registry/src/github.com-1ecc6299db9ec823/tokio-1.17.0/src/runtime/context.rs:52:15\r\n tokio::time::driver::handle::Handle::current\r\n at /root/.cargo/registry/src/github.com-1ecc6299db9ec823/tokio-1.17.0/src/time/driver/handle.rs:57:13\r\n tokio::time::driver::sleep::Sleep::new_timeout\r\n at /root/.cargo/registry/src/github.com-1ecc6299db9ec823/tokio-1.17.0/src/time/driver/sleep.rs:257:22\r\n 10: tikv::import::sst_service::ImportSstService<E,Router>::tick::{{closure}}\r\n at /data4/zak/tikv/src/import/sst_service.rs:114:13\r\n <core::future::from_generator::GenFuture<T> as core::future::future::Future>::poll\r\n at /root/.rustup/toolchains/nightly-2022-11-15-x86_64-unknown-linux-gnu/lib/rustlib/src/rust/library/core/src/future/mod.rs:91:19\r\n 11: <futures_task::future_obj::LocalFutureObj<T> as core::future::future::Future>::poll\r\n at /root/.cargo/registry/src/github.com-1ecc6299db9ec823/futures-task-0.3.15/src/future_obj.rs:84:18\r\n <futures_task::future_obj::FutureObj<T> as core::future::future::Future>::poll\r\n at /root/.cargo/registry/src/github.com-1ecc6299db9ec823/futures-task-0.3.15/src/future_obj.rs:127:9\r\n futures_util::future::future::FutureExt::poll_unpin\r\n at /root/.cargo/registry/src/github.com-1ecc6299db9ec823/futures-util-0.3.15/src/future/future/mod.rs:562:9\r\n futures_executor::thread_pool::Task::run\r\n at /root/.cargo/registry/src/github.com-1ecc6299db9ec823/futures-executor-0.3.15/src/thread_pool.rs:322:27\r\n futures_executor::thread_pool::PoolState::work\r\n at /root/.cargo/registry/src/github.com-1ecc6299db9ec823/futures-executor-0.3.15/src/thread_pool.rs:154:39\r\n futures_executor::thread_pool::ThreadPoolBuilder::create::{{closure}}\r\n at /root/.cargo/registry/src/github.com-1ecc6299db9ec823/futures-executor-0.3.15/src/thread_pool.rs:284:42\r\n std::sys_common::backtrace::__rust_begin_short_backtrace\r\n at /root/.rustup/toolchains/nightly-2022-11-15-x86_64-unknown-linux-gnu/lib/rustlib/src/rust/library/std/src/sys_common/backtrace.rs:121:18\r\n 12: std::thread::Builder::spawn_unchecked_::{{closure}}::{{closure}}\r\n at /root/.rustup/toolchains/nightly-2022-11-15-x86_64-unknown-linux-gnu/lib/rustlib/src/rust/library/std/src/thread/mod.rs:551:17\r\n <core::panic::unwind_safe::AssertUnwindSafe<F> as core::ops::function::FnOnce<()>>::call_once\r\n at /root/.rustup/toolchains/nightly-2022-11-15-x86_64-unknown-linux-gnu/lib/rustlib/src/rust/library/core/src/panic/unwind_safe.rs:271:9\r\n std::panicking::try::do_call\r\n at /root/.rustup/toolchains/nightly-2022-11-15-x86_64-unknown-linux-gnu/lib/rustlib/src/rust/library/std/src/panicking.rs:483:40\r\n std::panicking::try\r\n at /root/.rustup/toolchains/nightly-2022-11-15-x86_64-unknown-linux-gnu/lib/rustlib/src/rust/library/std/src/panicking.rs:447:19\r\n std::panic::catch_unwind\r\n at /root/.rustup/toolchains/nightly-2022-11-15-x86_64-unknown-linux-gnu/lib/rustlib/src/rust/library/std/src/panic.rs:137:14\r\n std::thread::Builder::spawn_unchecked_::{{closure}}\r\n at /root/.rustup/toolchains/nightly-2022-11-15-x86_64-unknown-linux-gnu/lib/rustlib/src/rust/library/std/src/thread/mod.rs:550:30\r\n core::ops::function::FnOnce::call_once{{vtable.shim}}\r\n at /root/.rustup/toolchains/nightly-2022-11-15-x86_64-unknown-linux-gnu/lib/rustlib/src/rust/library/core/src/ops/function.rs:513:5\r\n 13: <alloc::boxed::Box<F,A> as core::ops::function::FnOnce<Args>>::call_once\r\n at /root/.rustup/toolchains/nightly-2022-11-15-x86_64-unknown-linux-gnu/lib/rustlib/src/rust/library/alloc/src/boxed.rs:2000:9\r\n <alloc::boxed::Box<F,A> as core::ops::function::FnOnce<Args>>::call_once\r\n at /root/.rustup/toolchains/nightly-2022-11-15-x86_64-unknown-linux-gnu/lib/rustlib/src/rust/library/alloc/src/boxed.rs:2000:9\r\n std::sys::unix::thread::Thread::new::thread_start\r\n at /root/.rustup/toolchains/nightly-2022-11-15-x86_64-unknown-linux-gnu/lib/rustlib/src/rust/library/std/src/sys/unix/thread.rs:108:17\r\n 14: start_thread\r\n 15: clone\r\n\"] [location=/root/.cargo/registry/src/github.com-1ecc6299db9ec823/tokio-1.17.0/src/runtime/context.rs:54] [thread_name=sst-importer1]\r\n```",
  "state": "closed",
  "created_at": "2022-11-30T16:10:46Z",
  "updated_at": "2022-12-01T03:06:02Z",
  "closed_at": "2022-12-01T03:06:02Z",
  "labels": [
    "type/bug",
    "severity/moderate",
    "may-affects-6.4"
  ],
  "comments_data": [
    {
      "id": 1332406199,
      "user": "joccau",
      "created_at": "2022-11-30T16:11:37Z",
      "body": "/type bug"
    },
    {
      "id": 1332435928,
      "user": "joccau",
      "created_at": "2022-11-30T16:33:52Z",
      "body": "\r\n/severity moderate"
    },
    {
      "id": 1332437886,
      "user": "joccau",
      "created_at": "2022-11-30T16:35:25Z",
      "body": "/remove-severity critical"
    },
    {
      "id": 1332439239,
      "user": "joccau",
      "created_at": "2022-11-30T16:36:31Z",
      "body": "/remove-label may-affects-4.0\r\n/remove-label may-affects-5.0\r\n/remove-label may-affects-5.1\r\n/remove-label may-affects-5.2\r\n/remove-label may-affects-5.3\r\n/remove-label may-affects-5.4\r\n/remove-label may-affects-6.0\r\n/remove-label may-affects-6.1\r\n/remove-label may-affects-6.2\r\n/remove-label may-affects-6.3\r\n/remove-label may-affects-6.4\r\n"
    },
    {
      "id": 1332439369,
      "user": "ti-chi-bot",
      "created_at": "2022-11-30T16:36:39Z",
      "body": "@joccau: The label(s) `may-affects-6.4` cannot be applied. These labels are supported: `challenge-program, compatibility-breaker, high-performance, hptc, wontfix, do-not-merge/cherry-pick-not-approved, needs-cherry-pick-release-2.1, needs-cherry-pick-release-3.0, needs-cherry-pick-release-3.1, needs-cherry-pick-release-4.0, needs-cherry-pick-release-5.0, needs-cherry-pick-release-5.1, needs-cherry-pick-release-5.2, needs-cherry-pick-release-5.3, needs-cherry-pick-release-5.4, needs-cherry-pick-release-6.0, needs-cherry-pick-release-6.1, needs-cherry-pick-release-6.2, needs-cherry-pick-release-6.3, needs-cherry-pick-release-6.4, affects-4.0, affects-5.0, affects-5.1, affects-5.2, affects-5.3, affects-5.4, affects-6.0, affects-6.1, affects-6.2, affects-6.3, may-affects-4.0, may-affects-5.0, may-affects-5.1, may-affects-5.2, may-affects-5.3, may-affects-5.4, may-affects-6.0, may-affects-6.1, may-affects-6.2, may-affects-6.3`.\n\n<details>\n\nIn response to [this](https://github.com/tikv/tikv/issues/13862#issuecomment-1332439239):\n\n>/remove-label may-affects-4.0\r\n>/remove-label may-affects-5.0\r\n>/remove-label may-affects-5.1\r\n>/remove-label may-affects-5.2\r\n>/remove-label may-affects-5.3\r\n>/remove-label may-affects-5.4\r\n>/remove-label may-affects-6.0\r\n>/remove-label may-affects-6.1\r\n>/remove-label may-affects-6.2\r\n>/remove-label may-affects-6.3\r\n>/remove-label may-affects-6.4\r\n>\n\n\nInstructions for interacting with me using PR comments are available [here](https://prow.tidb.net/command-help).  If you have questions or suggestions related to my behavior, please file an issue against the [ti-community-infra/tichi](https://github.com/ti-community-infra/tichi/issues/new?title=Prow%20issue:) repository.\n</details>"
    },
    {
      "id": 1332439998,
      "user": "joccau",
      "created_at": "2022-11-30T16:37:09Z",
      "body": "/remove-label may-affects-6.4"
    },
    {
      "id": 1332440053,
      "user": "ti-chi-bot",
      "created_at": "2022-11-30T16:37:12Z",
      "body": "@joccau: The label(s) `may-affects-6.4` cannot be applied. These labels are supported: `challenge-program, compatibility-breaker, high-performance, hptc, wontfix, do-not-merge/cherry-pick-not-approved, needs-cherry-pick-release-2.1, needs-cherry-pick-release-3.0, needs-cherry-pick-release-3.1, needs-cherry-pick-release-4.0, needs-cherry-pick-release-5.0, needs-cherry-pick-release-5.1, needs-cherry-pick-release-5.2, needs-cherry-pick-release-5.3, needs-cherry-pick-release-5.4, needs-cherry-pick-release-6.0, needs-cherry-pick-release-6.1, needs-cherry-pick-release-6.2, needs-cherry-pick-release-6.3, needs-cherry-pick-release-6.4, affects-4.0, affects-5.0, affects-5.1, affects-5.2, affects-5.3, affects-5.4, affects-6.0, affects-6.1, affects-6.2, affects-6.3, may-affects-4.0, may-affects-5.0, may-affects-5.1, may-affects-5.2, may-affects-5.3, may-affects-5.4, may-affects-6.0, may-affects-6.1, may-affects-6.2, may-affects-6.3`.\n\n<details>\n\nIn response to [this](https://github.com/tikv/tikv/issues/13862#issuecomment-1332439998):\n\n>/remove-label may-affects-6.4\n\n\nInstructions for interacting with me using PR comments are available [here](https://prow.tidb.net/command-help).  If you have questions or suggestions related to my behavior, please file an issue against the [ti-community-infra/tichi](https://github.com/ti-community-infra/tichi/issues/new?title=Prow%20issue:) repository.\n</details>"
    }
  ]
}