{
  "issue_number": 15122,
  "title": "snap_restore: when there are message dropping, snap_restore may fail",
  "body": "## Bug Report\r\n\r\n<!-- Thanks for your bug report! Don't worry if you can't fill out all the sections. -->\r\n\r\n### What version of TiKV are you using?\r\nv6.5.3\r\n\r\n### What operating system and CPU are you using?\r\nLinux, amd64\r\n\r\n### Steps to reproduce\r\nRun snapshot restore with about 20k regions per store.\r\n\r\n### What did you expect?\r\nRestore success.\r\n\r\n### What did happened?\r\nRestore got stuck. That is probably because there are some election messages are dropped due to `full`.\r\n",
  "state": "closed",
  "created_at": "2023-07-14T02:47:12Z",
  "updated_at": "2023-08-01T08:56:40Z",
  "closed_at": "2023-08-01T08:56:40Z",
  "labels": [
    "type/bug",
    "severity/major",
    "affects-6.5",
    "affects-7.1"
  ],
  "comments_data": []
}