{
  "issue_number": 14038,
  "title": "txn: the left pessimistic lock may break the constraint check",
  "body": "## Bug Report\r\n\r\nSee https://github.com/pingcap/tidb/issues/40114 for details of the bug. This issue is recorded here to link from the PR.\r\n\r\nA reasonable way to fix the problem is to do the `should_not_exist` check when handling `acquire_pessimistic_lock` requests sent to the keys that are already locked by the same transaction.\r\n\r\n\r\n\r\n",
  "state": "closed",
  "created_at": "2023-01-11T13:34:27Z",
  "updated_at": "2023-01-13T04:16:28Z",
  "closed_at": "2023-01-13T03:49:47Z",
  "labels": [
    "type/bug",
    "severity/critical",
    "affects-5.3",
    "affects-5.4",
    "affects-6.1",
    "affects-6.5"
  ],
  "comments_data": []
}