{
  "issue_number": 15210,
  "title": "[Dynamic Regions] region split may led PD returned no region",
  "body": "## Bug Report\r\n\r\n<!-- Thanks for your bug report! Don't worry if you can't fill out all the sections. -->\r\n\r\n### What version of TiKV are you using?\r\n<!-- You can run `tikv-server --version` -->\r\n 0774262d1799785610846f45e9da7a949dc3382a\r\n### What operating system and CPU are you using?\r\n<!-- If you're using Linux, you can run `cat /proc/cpuinfo` -->\r\n\r\n### Steps to reproduce\r\n<!-- If possible, provide a recipe for reproducing the error. A complete runnable program is good. -->\r\n1. use partitioned-raft-kv start a cluster\r\n2. ` tiup playground nightly --kv.config etc/config-template.toml --tiflash 0`\r\n3. execute the follow sql\r\n```sql\r\ndrop table if exists t2;\r\ncreate table t2 (a int, b varchar(10), unique index idx_a(a)) partition by hash (a) partitions 3;\r\ninsert into t2 values (1,'a'), (11, 'h'), (22, 'o');\r\nshow table t2 regions; \r\nshow table t2 regions;\r\nshow table t2 regions;\r\nshow table t2 regions;\r\nshow table t2 regions;\r\nshow table t2 regions;\r\nshow table t2 regions;\r\nshow table t2 regions;\r\nshow table t2 regions;\r\nshow table t2 regions;\r\nshow table t2 regions;\r\nshow table t2 regions;\r\nshow table t2 regions;\r\nshow table t2 regions;\r\nshow table t2 regions;\r\nshow table t2 regions;\r\nshow table t2 regions;\r\nshow table t2 regions;\r\nshow table t2 regions;\r\nshow table t2 regions;\r\nshow table t2 regions;\r\nshow table t2 regions;\r\nshow table t2 regions;\r\nshow table t2 regions;\r\nshow table t2 regions;\r\n```\r\n4. `show table t2 regions;`\r\n### What did you expect?\r\nall queries return correct result\r\n### What did happened?\r\nPD returned no region\r\n```sql\r\n[10:45:20]TiDB root:test> show table t2 regions;\r\n+-----------+-----------+--------------------+-----------+-----------------+-------+------------+---------------+------------+----------------------+------------------+------------------------+------------------+\r\n| REGION_ID | START_KEY | END_KEY            | LEADER_ID | LEADER_STORE_ID | PEERS | SCATTERING | WRITTEN_BYTES | READ_BYTES | APPROXIMATE_SIZE(MB) | APPROXIMATE_KEYS | SCHEDULING_CONSTRAINTS | SCHEDULING_STATE |\r\n+-----------+-----------+--------------------+-----------+-----------------+-------+------------+---------------+------------+----------------------+------------------+------------------------+------------------+\r\n| 22        | t_121_    | t_281474976710649_ | 23        | 1               | 23    | 0          | 0             | 0          | 1                    | 2                |                        |                  |\r\n+-----------+-----------+--------------------+-----------+-----------------+-------+------------+---------------+------------+----------------------+------------------+------------------------+------------------+\r\n1 row in set\r\nTime: 0.007s\r\n[10:45:20]TiDB root:test> show table t2 regions;\r\n(1105, 'PD returned no region, startKey: \"7480000000000000795F720000000000000000\", endKey: \"7480000000000000795F72FFFFFFFFFFFFFFFF\", limit: 128')\r\n[10:45:32]TiDB root:test> show table t2 regions;\r\n+-----------+-----------+--------------------+-----------+-----------------+-------+------------+---------------+------------+----------------------+------------------+------------------------+------------------+\r\n| REGION_ID | START_KEY | END_KEY            | LEADER_ID | LEADER_STORE_ID | PEERS | SCATTERING | WRITTEN_BYTES | READ_BYTES | APPROXIMATE_SIZE(MB) | APPROXIMATE_KEYS | SCHEDULING_CONSTRAINTS | SCHEDULING_STATE |\r\n+-----------+-----------+--------------------+-----------+-----------------+-------+------------+---------------+------------+----------------------+------------------+------------------------+------------------+\r\n| 144       | t_121_    | t_122_             | 145       | 1               | 145   | 0          | 0             | 0          | 1                    | 0                |                        |                  |\r\n| 146       | t_122_    | t_123_             | 147       | 1               | 147   | 0          | 0             | 0          | 1                    | 0                |                        |                  |\r\n| 22        | t_123_    | t_281474976710649_ | 23        | 1               | 23    | 0          | 0             | 0          | 1                    | 0                |                        |                  |\r\n+-----------+-----------+--------------------+-----------+-----------------+-------+------------+---------------+------------+----------------------+------------------+------------------------+------------------+\r\n```\r\n",
  "state": "closed",
  "created_at": "2023-07-26T02:48:19Z",
  "updated_at": "2023-09-21T02:30:15Z",
  "closed_at": "2023-09-21T02:30:15Z",
  "labels": [
    "type/bug",
    "severity/major"
  ],
  "comments_data": [
    {
      "id": 1652821765,
      "user": "bufferflies",
      "created_at": "2023-07-27T02:29:58Z",
      "body": "ref: https://github.com/tikv/pd/pull/4230"
    }
  ]
}