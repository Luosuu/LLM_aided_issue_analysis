{
  "issue_number": 12463,
  "title": "tikv can't start when running go-ycsb rawkv workload",
  "body": "## Bug Report\r\n\r\n<!-- Thanks for your bug report! Don't worry if you can't fill out all the sections. -->\r\n\r\n### What version of TiKV are you using?\r\n<!-- You can run `tikv-server --version` -->\r\n```\r\n/ # /tikv-server -V\r\nTiKV \r\nRelease Version:   6.0.0-alpha\r\nEdition:           Community\r\nGit Commit Hash:   51dc281fbb3c64df6f77750595b5be9927d5ba85\r\nGit Commit Branch: heads/refs/tags/v6.1.0-nightly\r\nUTC Build Time:    2022-05-05 08:57:43\r\nRust Version:      rustc 1.60.0-nightly (1e12aef3f 2022-02-13)\r\nEnable Features:   jemalloc mem-profiling portable sse test-engines-rocksdb cloud-aws cloud-gcp cloud-azure\r\nProfile:           dist_release\r\n```\r\n\r\n### What operating system and CPU are you using?\r\n<!-- If you're using Linux, you can run `cat /proc/cpuinfo` -->\r\n\r\n### Steps to reproduce\r\n<!-- If possible, provide a recipe for reproducing the error. A complete runnable program is good. -->\r\n1. go-ycsb load tikv -P workloada\r\n2. go-ycsb run tikv -P workloada\r\n3. update tikv config (at 23:57)\r\n```\r\n  config-file: |                                                                                                                                 \r\n    log-file = \"/var/lib/tikv/log/tikv.log\"                                                                                                                                                                                                                                             \r\n    [rocksdb]                                                                                                                                    \r\n      max-background-jobs = 4                                                                                                                                                                                                                    \r\n    [storage]                                                                                                                                    \r\n      reserve-space = \"0MB\"                                                                                                                      \r\n```\r\n\r\n### What did you expect?\r\nNo panic.\r\n\r\n### What did happened?\r\nOne tikv bagin to restart due to configuration updating. However, it panics and can't start due to the following error\r\n![image](https://user-images.githubusercontent.com/4962134/167236704-ebeb91aa-b1fa-4775-b1d7-20f041893d26.png)\r\n```\r\n[lib.rs:476] [\"failed to open raft engine: Other(\"[components/raft_log_engine/src/engine.rs:464]: Codec Error: eof\")\"] [backtrace=\"   0: tikv_util::set_panic_hook::{{closure}}\r\n             at home/jenkins/agent/workspace/build-common/go/src/github.com/pingcap/tikv/components/tikv_util/src/lib.rs:475:18\r\n   1: std::panicking::rust_panic_with_hook\r\n             at rustc/1e12aef3fab243407f9d71ba9956cb2a1bf105d5/library/std/src/panicking.rs:702:17\r\n   2: std::panicking::begin_panic_handler::{{closure}}\r\n             at rustc/1e12aef3fab243407f9d71ba9956cb2a1bf105d5/library/std/src/panicking.rs:588:13\r\n   3: std::sys_common::backtrace::__rust_end_short_backtrace\r\n             at rustc/1e12aef3fab243407f9d71ba9956cb2a1bf105d5/library/std/src/sys_common/backtrace.rs:138:18\r\n   4: rust_begin_unwind\r\n             at rustc/1e12aef3fab243407f9d71ba9956cb2a1bf105d5/library/std/src/panicking.rs:584:5\r\n   5: core::panicking::panic_fmt\r\n             at rustc/1e12aef3fab243407f9d71ba9956cb2a1bf105d5/library/core/src/panicking.rs:143:14\r\n   6: core::result::unwrap_failed\r\n             at rustc/1e12aef3fab243407f9d71ba9956cb2a1bf105d5/library/core/src/result.rs:1749:5\r\n   7: core::result::Result<T,E>::expect\r\n             at rustc/1e12aef3fab243407f9d71ba9956cb2a1bf105d5/library/core/src/result.rs:1022:23\r\n      <raft_log_engine::engine::RaftLogEngine as server::server::ConfiguredRaftEngine>::build\r\n             at home/jenkins/agent/workspace/build-common/go/src/github.com/pingcap/tikv/components/server/src/server.rs:1359:13\r\n      server::server::TiKvServer<CER>::init_raw_engines\r\n             at home/jenkins/agent/workspace/build-common/go/src/github.com/pingcap/tikv/components/server/src/server.rs:1393:27\r\n   8: server::server::run_impl\r\n             at home/jenkins/agent/workspace/build-common/go/src/github.com/pingcap/tikv/components/server/src/server.rs:125:35\r\n      server::server::run_tikv\r\n             at home/jenkins/agent/workspace/build-common/go/src/github.com/pingcap/tikv/components/server/src/server.rs:159:5\r\n   9: tikv_server::main\r\n             at home/jenkins/agent/workspace/build-common/go/src/github.com/pingcap/tikv/cmd/tikv-server/src/main.rs:189:5\r\n  10: core::ops::function::FnOnce::call_once\r\n             at rustc/1e12aef3fab243407f9d71ba9956cb2a1bf105d5/library/core/src/ops/function.rs:227:5\r\n      std::sys_common::backtrace::__rust_begin_short_backtrace\r\n             at rustc/1e12aef3fab243407f9d71ba9956cb2a1bf105d5/library/std/src/sys_common/backtrace.rs:122:18\r\n  11: main\r\n  12: __libc_start_main\r\n  13: <unknown>\r\n\"] [location=components/server/src/server.rs:1360] [thread_name=main]\r\n```",
  "state": "closed",
  "created_at": "2022-05-07T03:41:26Z",
  "updated_at": "2022-05-07T11:09:42Z",
  "closed_at": "2022-05-07T11:09:42Z",
  "labels": [
    "type/bug",
    "severity/critical"
  ],
  "comments_data": [
    {
      "id": 1120125342,
      "user": "cosven",
      "created_at": "2022-05-07T03:42:06Z",
      "body": "/type bug"
    },
    {
      "id": 1120175673,
      "user": "Lily2025",
      "created_at": "2022-05-07T09:36:01Z",
      "body": "/severity critical"
    }
  ]
}