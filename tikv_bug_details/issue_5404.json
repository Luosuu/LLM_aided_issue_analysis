{
  "issue_number": 5404,
  "title": "TPC-H Q1 lead to TiKV Panic",
  "body": "## Bug Report\r\n\r\nWhen TPC-H Q1 Decimal is modified to Double, TiKV will panic with latest TiDB. This means that our type check is not comprehensive and there are some missing part that illegal request may crash TiKV.\r\n\r\n```\r\n[2019/09/04 23:05:34.948 +08:00] [FATAL] [lib.rs:489] [\"Cannot call `$ name` over to a Int column\"] [backtrace=\"stack backtrace:\\n   0:     0x55e52d561efd - backtrace::backtrace::libunwind::trace::h52557d88869\r\n71e0e\\n                        at /home/pingcap/.cargo/registry/src/github.com-1ecc6299db9ec823/backtrace-0.2.3/src/backtrace/libunwind.rs:54\\n                         - backtrace::backtrace::trace::h16a90011d\r\nc166192\\n                        at /home/pingcap/.cargo/registry/src/github.com-1ecc6299db9ec823/backtrace-0.2.3/src/backtrace/mod.rs:70\\n   1:     0x55e52d558c35 - tikv_util::set_panic_hook::{{closure}}::h2b\r\n00fe479cdfa106\\n                        at /home/pingcap/wenxuan/tikv/target/release/build/backtrace-96a937f63df81ff4/out/capture.rs:79\\n   2:     0x55e52d711eac - std::panicking::rust_panic_with_hook::h3ccc79\r\nb44ba3c353\\n                        at src/libstd/panicking.rs:481\\n   3:     0x55e52d711c8d - std::panicking::continue_panic_fmt::h6da01b9bb2c73c79\\n                        at src/libstd/panicking.rs:384\\n\r\n4:     0x55e52d711c3b - std::panicking::begin_panic_fmt::ha4fbbae8c2cc86c2\\n                        at src/libstd/panicking.rs:339\\n   5:     0x55e52d315f38 - tidb_query::codec::data_type::vector::VectorValue:\r\n:push_real::h5a4107af03045e57\\n                        at components/tidb_query/src/codec/data_type/vector.rs:408\\n                         - <tidb_query::codec::data_type::vector::VectorValue as tidb_query::c\r\nodec::data_type::vector::VectorValueExt<ordered_float::NotNan<f64>>>::push::h43e824f1ae7eb8c9\\n                        at components/tidb_query/src/codec/data_type/vector.rs:422\\n   6:     0x55e52d31ff8c - <ti\r\ndb_query::aggr_fn::impl_sum::AggrFnStateSum<T> as tidb_query::aggr_fn::ConcreteAggrFunctionState>::push_result::h31ccb1b13e171d69\\n                        at components/tidb_query/src/aggr_fn/impl_sum.rs:0\\n\r\n                       - <F as tidb_query::aggr_fn::AggrFunctionState>::push_result::h7e53e67fc25da054\\n                        at components/tidb_query/src/aggr_fn/mod.rs:200\\n   7:     0x55e52cb5ce72 - tidb_\r\nquery::batch::executors::util::aggr_executor::AggregationExecutor<Src,I>::aggregate_partial_results::{{closure}}::h993dcd49281cd2e6\\n                        at /home/pingcap/wenxuan/tikv/components/tidb_query/\r\nsrc/batch/executors/util/aggr_executor.rs:245\\n                         - <tidb_query::batch::executors::slow_hash_aggr_executor::SlowHashAggregationImpl as tidb_query::batch::executors::util::aggr_executor::A\r\nggregationExecutorImpl<Src>>::iterate_available_groups::hebabe1775b935169\\n                        at /home/pingcap/wenxuan/tikv/components/tidb_query/src/batch/executors/slow_hash_aggr_executor.rs:323\\n\r\n                   - tidb_query::batch::executors::util::aggr_executor::AggregationExecutor<Src,I>::aggregate_partial_results::h2c52cd469bd2bcb7\\n                        at /home/pingcap/wenxuan/tikv/component\r\ns/tidb_query/src/batch/executors/util/aggr_executor.rs:233\\n                         - tidb_query::batch::executors::util::aggr_executor::AggregationExecutor<Src,I>::handle_next_batch::hacc46bb6d1fce08d\\n\r\n                   at /home/pingcap/wenxuan/tikv/components/tidb_query/src/batch/executors/util/aggr_executor.rs:215\\n                         - <tidb_query::batch::executors::util::aggr_executor::AggregationE\r\nxecutor<Src,I> as tidb_query::batch::interface::BatchExecutor>::next_batch::h9bb224c92880e6cb\\n                        at /home/pingcap/wenxuan/tikv/components/tidb_query/src/batch/executors/util/aggr_executor\r\n.rs:283\\n                         - <tidb_query::batch::executors::slow_hash_aggr_executor::BatchSlowHashAggregationExecutor<Src> as tidb_query::batch::interface::BatchExecutor>::next_batch::h42eef9b9bbfe21ab\\\r\nn                        at /home/pingcap/wenxuan/tikv/components/tidb_query/src/batch/executors/slow_hash_aggr_executor.rs:42\\n   8:     0x55e52cb76ef8 - <tidb_query::execute_stats::WithSummaryCollector<C,T>\r\nas tidb_query::batch::interface::BatchExecutor>::next_batch::h395a7c58b23edb87\\n                        at /home/pingcap/wenxuan/tikv/components/tidb_query/src/batch/interface.rs:97\\n   9:     0x55e52cd0846a -\r\n <alloc::boxed::Box<T> as tidb_query::batch::interface::BatchExecutor>::next_batch::h1ba90e2b300034b2\\n                        at /home/pingcap/wenxuan/tikv/components/tidb_query/src/batch/interface.rs:74\\n\r\n                      - tidb_query::batch::runner::BatchExecutorsRunner<SS>::handle_request::h01951cb6d9d3411d\\n                        at /home/pingcap/wenxuan/tikv/components/tidb_query/src/batch/runner.rs:3\r\n61\\n                         - <tikv::coprocessor::dag::BatchDAGHandler as tikv::coprocessor::RequestHandler>::handle_request::h78b498544f9b2cd4\\n                        at src/coprocessor/dag/mod.rs:108\\n  10\r\n:     0x55e52cb20cc0 - tikv::coprocessor::endpoint::Endpoint<E>::handle_unary_request_impl::{{closure}}::h01163cc4f56aaa8e\\n                        at /home/pingcap/wenxuan/tikv/src/coprocessor/endpoint.rs:256\r\n\\n                         - <futures::future::and_then::AndThen<A,B,F> as futures::future::Future>::poll::{{closure}}::{{closure}}::h7faf20842b9ee5ff\\n                        at /home/pingcap/.cargo/registry/\r\nsrc/github.com-1ecc6299db9ec823/futures-0.1.23/src/future/and_then.rs:34\\n                         - core::result::Result<T,E>::map::hfc7a0bc2b377775a\\n                        at /rustc/311376d30dc1cfa622142a9\r\nf50317b1e0cb4608a/src/libcore/result.rs:512\\n                         - <futures::future::and_then::AndThen<A,B,F> as futures::future::Future>::poll::{{closure}}::hf1f76c39a364df54\\n                        at\r\n/home/pingcap/.cargo/registry/src/github.com-1ecc6299db9ec823/futures-0.1.23/src/future/and_then.rs:33\\n                         - futures::future::chain::Chain<A,B,C>::poll::h2ef3cc791adc3335\\n\r\n         at /home/pingcap/.cargo/registry/src/github.com-1ecc6299db9ec823/futures-0.1.23/src/future/chain.rs:39\\n                         - <futures::future::and_then::AndThen<A,B,F> as futures::future::Future\r\n>::poll::hc77750e783739614\\n                        at /home/pingcap/.cargo/registry/src/github.com-1ecc6299db9ec823/futures-0.1.23/src/future/and_then.rs:32\\n                         - futures::future::chain:\r\n:Chain<A,B,C>::poll::hbf13d920837623fd\\n                        at /home/pingcap/.cargo/registry/src/github.com-1ecc6299db9ec823/futures-0.1.23/src/future/chain.rs:26\\n  11:     0x55e52cb1dc63 - <futures::futu\r\nre::then::Then<A,B,F> as futures::future::Future>::poll::h61399becb1d8ad57\\n                        at /home/pingcap/.cargo/registry/src/github.com-1ecc6299db9ec823/futures-0.1.23/src/future/then.rs:32\\n\r\n                   - <futures::future::lazy::Lazy<F,R> as futures::future::Future>::poll::h69055be73b984334\\n                        at /home/pingcap/.cargo/registry/src/github.com-1ecc6299db9ec823/futures-0.1\r\n.23/src/future/lazy.rs:82\\n                         - <futures::sync::oneshot::Execute<F> as futures::future::Future>::poll::hcfeef5325b436d03\\n                        at /home/pingcap/.cargo/registry/src/gith\r\nub.com-1ecc6299db9ec823/futures-0.1.23/src/sync/oneshot.rs:554\\n  12:     0x55e52d5bee95 - <alloc::boxed::Box<F> as futures::future::Future>::poll::h65b8ae81556157ac\\n                        at /home/pingcap/.\r\ncargo/registry/src/github.com-1ecc6299db9ec823/futures-0.1.23/src/future/mod.rs:113\\n                         - futures::task_impl::Spawn<T>::poll_future_notify::{{closure}}::h6b5a9a9103d09b3c\\n\r\n         at /home/pingcap/.cargo/registry/src/github.com-1ecc6299db9ec823/futures-0.1.23/src/task_impl/mod.rs:289\\n                         - futures::task_impl::Spawn<T>::enter::{{closure}}::h78df4f60652f0c15\r\n\\n                        at /home/pingcap/.cargo/registry/src/github.com-1ecc6299db9ec823/futures-0.1.23/src/task_impl/mod.rs:363\\n                         - futures::task_impl::std::set::h9df7792d1b3f31b0\\n\r\n                       at /home/pingcap/.cargo/registry/src/github.com-1ecc6299db9ec823/futures-0.1.23/src/task_impl/std/mod.rs:78\\n                         - futures::task_impl::Spawn<T>::enter::h434112265d71\r\n7219\\n                        at /home/pingcap/.cargo/registry/src/github.com-1ecc6299db9ec823/futures-0.1.23/src/task_impl/mod.rs:363\\n                         - futures::task_impl::Spawn<T>::poll_future_noti\r\nfy::hd3a109fd85007d16\\n                        at /home/pingcap/.cargo/registry/src/github.com-1ecc6299db9ec823/futures-0.1.23/src/task_impl/mod.rs:289\\n                         - tokio_threadpool::task::Task:\r\n:run::{{closure}}::haeaa8b274b17996c\\n                        at /home/pingcap/.cargo/registry/src/github.com-1ecc6299db9ec823/tokio-threadpool-0.1.13/src/task/mod.rs:145\\n                         - core::ops:\r\n:function::FnOnce::call_once::h0d769f3f9db8a49d\\n                        at /rustc/311376d30dc1cfa622142a9f50317b1e0cb4608a/src/libcore/ops/function.rs:231\\n                         - <std::panic::AssertUnwind\r\nSafe<F> as core::ops::function::FnOnce<()>>::call_once::hfd04c347a69f70e7\\n                        at /rustc/311376d30dc1cfa622142a9f50317b1e0cb4608a/src/libstd/panic.rs:315\\n                         - std::pa\r\nnicking::try::do_call::h8c824e7ba56f5e09\\n                        at /rustc/311376d30dc1cfa622142a9f50317b1e0cb4608a/src/libstd/panicking.rs:296\\n                         - std::panicking::try::h3df016f4090736\r\n46\\n                        at /rustc/311376d30dc1cfa622142a9f50317b1e0cb4608a//src/libpanic_abort/lib.rs:29\\n                         - std::panic::catch_unwind::h88c9ebeeb8e6a93a\\n                        at\r\n/rustc/311376d30dc1cfa622142a9f50317b1e0cb4608a/src/libstd/panic.rs:394\\n                         - tokio_threadpool::task::Task::run::h456b9b5c1efe1a35\\n                        at /home/pingcap/.cargo/registr\r\ny/src/github.com-1ecc6299db9ec823/tokio-threadpool-0.1.13/src/task/mod.rs:130\\n                         - tokio_threadpool::worker::Worker::run_task2::h139ced29ff2f3eb8\\n                        at /home/pingca\r\np/.cargo/registry/src/github.com-1ecc6299db9ec823/tokio-threadpool-0.1.13/src/worker/mod.rs:567\\n                         - tokio_threadpool::worker::Worker::run_task::h908cd04295a8b9bf\\n\r\n  at /home/pingcap/.cargo/registry/src/github.com-1ecc6299db9ec823/tokio-threadpool-0.1.13/src/worker/mod.rs:459\\n  13:     0x55e52d5bc91c - tokio_threadpool::worker::Worker::try_run_owned_task::ha335dce02310d\r\n3f1\\n                        at /home/pingcap/.cargo/registry/src/github.com-1ecc6299db9ec823/tokio-threadpool-0.1.13/src/worker/mod.rs:390\\n                         - tokio_threadpool::worker::Worker::try_run\r\n_task::h837caba1219a4f2f\\n                        at /home/pingcap/.cargo/registry/src/github.com-1ecc6299db9ec823/tokio-threadpool-0.1.13/src/worker/mod.rs:297\\n                         - tokio_threadpool::wo\r\nrker::Worker::run::h770cc1bc86b7692c\\n                        at /home/pingcap/.cargo/registry/src/github.com-1ecc6299db9ec823/tokio-threadpool-0.1.13/src/worker/mod.rs:241\\n  14:     0x55e52d5bc237 - tokio_th\r\nreadpool::worker::Worker::do_run::{{closure}}::{{closure}}::hd5f2089c62043e50\\n                        at /home/pingcap/.cargo/registry/src/github.com-1ecc6299db9ec823/tokio-threadpool-0.1.13/src/worker/mod.rs\r\n:129\\n                         - tokio_executor::global::with_default::{{closure}}::h10bd7d7d1ce36300\\n                        at /home/pingcap/.cargo/registry/src/github.com-1ecc6299db9ec823/tokio-executor-0.\r\n1.7/src/global.rs:209\\n                         - std::thread::local::LocalKey<T>::try_with::hc5899b8a56aa3e8d\\n                        at /rustc/311376d30dc1cfa622142a9f50317b1e0cb4608a/src/libstd/thread/loca\r\nl.rs:257\\n                         - std::thread::local::LocalKey<T>::with::hb39515a27d8034e9\\n                        at /rustc/311376d30dc1cfa622142a9f50317b1e0cb4608a/src/libstd/thread/local.rs:234\\n\r\n```",
  "state": "closed",
  "created_at": "2019-09-04T15:55:16Z",
  "updated_at": "2019-09-16T13:01:45Z",
  "closed_at": "2019-09-16T13:01:45Z",
  "labels": [
    "type/bug",
    "sig/coprocessor"
  ],
  "comments_data": [
    {
      "id": 527974723,
      "user": "breezewish",
      "created_at": "2019-09-04T16:15:30Z",
      "body": "TiKV received this kind of illegal request using latest TiDB:\r\n\r\n```\r\n[2019/09/05 01:12:34.166 +09:00] [WARN] [impl_sum.rs:34] [\"aggr_def = tp: Sum children {tp: ColumnRef val: \\\"\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\001\\\" sig: CastIntAsInt field_type {tp: 5 flag: 4097 flen: 22 decimal: -1 collate: 63 charset: \\\"binary\\\"}} sig: CastIntAsInt field_type {tp: 8 flag: 128 flen: 21 decimal: -1 collate: 63 charset: \\\"binary\\\"}\"]\r\n[2019/09/05 01:12:34.166 +09:00] [WARN] [impl_sum.rs:34] [\"aggr_def = tp: Sum children {tp: ColumnRef val: \\\"\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\001\\\" sig: CastIntAsInt field_type {tp: 5 flag: 4097 flen: 22 decimal: -1 collate: 63 charset: \\\"binary\\\"}} sig: CastIntAsInt field_type {tp: 8 flag: 128 flen: 21 decimal: -1 collate: 63 charset: \\\"binary\\\"}\"]\r\n```\r\n\r\nWhy is it illegal? Because it is `SumLong(RealColumn)`. However we don't have `SumLong`.\r\n\r\nNote that the TPC-H schema to reproduce is:\r\n\r\n```sql\r\nCREATE DATABASE IF NOT EXISTS TPCH;\r\nUSE TPCH;\r\nCREATE TABLE IF NOT EXISTS nation  ( N_NATIONKEY  BIGINT NOT NULL,\r\n                            N_NAME       CHAR(25) NOT NULL,\r\n                            N_REGIONKEY  BIGINT NOT NULL,\r\n                            N_COMMENT    VARCHAR(152),\r\n\t\t\t    PRIMARY KEY (N_NATIONKEY));\r\n\r\nCREATE TABLE IF NOT EXISTS region  ( R_REGIONKEY  BIGINT NOT NULL,\r\n       \t               R_NAME       CHAR(25) NOT NULL,\r\n                       R_COMMENT    VARCHAR(152),\r\n\t               PRIMARY KEY (R_REGIONKEY));\r\n\r\nCREATE TABLE IF NOT EXISTS part  ( P_PARTKEY     BIGINT NOT NULL,\r\n                          P_NAME        VARCHAR(55) NOT NULL,\r\n                          P_MFGR        CHAR(25) NOT NULL,\r\n                          P_BRAND       CHAR(10) NOT NULL,\r\n                          P_TYPE        VARCHAR(25) NOT NULL,\r\n                          P_SIZE        BIGINT NOT NULL,\r\n                          P_CONTAINER   CHAR(10) NOT NULL,\r\n                          P_RETAILPRICE DOUBLE NOT NULL,\r\n                          P_COMMENT     VARCHAR(23) NOT NULL,\r\n\t\t\t  PRIMARY KEY (P_PARTKEY));\r\n\r\nCREATE TABLE IF NOT EXISTS supplier  ( S_SUPPKEY     BIGINT NOT NULL,\r\n                             S_NAME        CHAR(25) NOT NULL,\r\n                             S_ADDRESS     VARCHAR(40) NOT NULL,\r\n                             S_NATIONKEY   BIGINT NOT NULL,\r\n                             S_PHONE       CHAR(15) NOT NULL,\r\n                             S_ACCTBAL     DOUBLE NOT NULL,\r\n                             S_COMMENT     VARCHAR(101) NOT NULL,\r\n\t\t\t     PRIMARY KEY (S_SUPPKEY),\r\n\t\t\t     CONSTRAINT FOREIGN KEY SUPPLIER_FK1 (S_NATIONKEY) references nation(N_NATIONKEY));\r\n\r\nCREATE TABLE IF NOT EXISTS partsupp ( PS_PARTKEY     BIGINT NOT NULL,\r\n                             PS_SUPPKEY     BIGINT NOT NULL,\r\n                             PS_AVAILQTY    BIGINT NOT NULL,\r\n                             PS_SUPPLYCOST  DOUBLE  NOT NULL,\r\n                             PS_COMMENT     VARCHAR(199) NOT NULL,\r\n\t\t\t     PRIMARY KEY (PS_PARTKEY,PS_SUPPKEY),\r\n\t\t\t     CONSTRAINT FOREIGN KEY PARTSUPP_FK1 (PS_SUPPKEY) references supplier(S_SUPPKEY),\r\n\t\t\t     CONSTRAINT FOREIGN KEY PARTSUPP_FK2 (PS_PARTKEY) references part(P_PARTKEY));\r\n\r\nCREATE TABLE IF NOT EXISTS customer  ( C_CUSTKEY     BIGINT NOT NULL,\r\n                             C_NAME        VARCHAR(25) NOT NULL,\r\n                             C_ADDRESS     VARCHAR(40) NOT NULL,\r\n                             C_NATIONKEY   BIGINT NOT NULL,\r\n                             C_PHONE       CHAR(15) NOT NULL,\r\n                             C_ACCTBAL     DOUBLE   NOT NULL,\r\n                             C_MKTSEGMENT  CHAR(10) NOT NULL,\r\n                             C_COMMENT     VARCHAR(117) NOT NULL,\r\n\t\t\t     PRIMARY KEY (C_CUSTKEY),\r\n\t\t\t     CONSTRAINT FOREIGN KEY CUSTOMER_FK1 (C_NATIONKEY) references nation(N_NATIONKEY));\r\n\r\nCREATE TABLE IF NOT EXISTS orders  ( O_ORDERKEY       BIGINT NOT NULL,\r\n                           O_CUSTKEY        BIGINT NOT NULL,\r\n                           O_ORDERSTATUS    CHAR(1) NOT NULL,\r\n                           O_TOTALPRICE     DOUBLE NOT NULL,\r\n                           O_ORDERDATE      DATE NOT NULL,\r\n                           O_ORDERPRIORITY  CHAR(15) NOT NULL,\r\n                           O_CLERK          CHAR(15) NOT NULL,\r\n                           O_SHIPPRIORITY   BIGINT NOT NULL,\r\n                           O_COMMENT        VARCHAR(79) NOT NULL,\r\n\t\t\t   PRIMARY KEY (O_ORDERKEY),\r\n\t\t\t   CONSTRAINT FOREIGN KEY ORDERS_FK1 (O_CUSTKEY) references customer(C_CUSTKEY));\r\n\r\nCREATE TABLE IF NOT EXISTS lineitem ( L_ORDERKEY    BIGINT NOT NULL,\r\n                             L_PARTKEY     BIGINT NOT NULL,\r\n                             L_SUPPKEY     BIGINT NOT NULL,\r\n                             L_LINENUMBER  BIGINT NOT NULL,\r\n                             L_QUANTITY    DOUBLE NOT NULL,\r\n                             L_EXTENDEDPRICE  DOUBLE NOT NULL,\r\n                             L_DISCOUNT    DOUBLE NOT NULL,\r\n                             L_TAX         DOUBLE NOT NULL,\r\n                             L_RETURNFLAG  CHAR(1) NOT NULL,\r\n                             L_LINESTATUS  CHAR(1) NOT NULL,\r\n                             L_SHIPDATE    DATE NOT NULL,\r\n                             L_COMMITDATE  DATE NOT NULL,\r\n                             L_RECEIPTDATE DATE NOT NULL,\r\n                             L_SHIPINSTRUCT CHAR(25) NOT NULL,\r\n                             L_SHIPMODE     CHAR(10) NOT NULL,\r\n                             L_COMMENT      VARCHAR(44) NOT NULL,\r\n\t\t\t     PRIMARY KEY (L_ORDERKEY,L_LINENUMBER),\r\n\t\t\t     CONSTRAINT FOREIGN KEY LINEITEM_FK1 (L_ORDERKEY)  references orders(O_ORDERKEY),\r\n\t\t\t     CONSTRAINT FOREIGN KEY LINEITEM_FK2 (L_PARTKEY,L_SUPPKEY) references partsupp(PS_PARTKEY, PS_SUPPKEY));\r\n```\r\n\r\n@zz-jason "
    },
    {
      "id": 527980209,
      "user": "breezewish",
      "created_at": "2019-09-04T16:28:41Z",
      "body": "If we use the original TPC-H schema, TiKV will also receive illegal request:\r\n\r\n```\r\n[2019/09/05 01:26:26.689 +09:00] [WARN] [impl_sum.rs:34] [\"aggr_def = tp: Sum children {tp: ColumnRef val: \\\"\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\" sig: CastIntAsInt field_type {tp: 246 flag: 4097 flen: 15 decimal: 2 collate: 63 charset: \\\"binary\\\"}} sig: CastIntAsInt field_type {tp: 246 flag: 128 flen: 65 decimal: 6 collate: 63 charset: \\\"binary\\\"}\"]\r\n[2019/09/05 01:26:26.689 +09:00] [WARN] [impl_sum.rs:34] [\"aggr_def = tp: Sum children {tp: ColumnRef val: \\\"\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\001\\\" sig: CastIntAsInt field_type {tp: 246 flag: 4097 flen: 15 decimal: 2 collate: 63 charset: \\\"binary\\\"}} sig: CastIntAsInt field_type {tp: 8 flag: 128 flen: 21 decimal: -1 collate: 63 charset: \\\"binary\\\"}\"]\r\n[2019/09/05 01:26:26.689 +09:00] [WARN] [impl_sum.rs:34] [\"aggr_def = tp: Sum children {tp: ColumnRef val: \\\"\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\" sig: CastIntAsInt field_type {tp: 246 flag: 4097 flen: 15 decimal: 2 collate: 63 charset: \\\"binary\\\"}} sig: CastIntAsInt field_type {tp: 246 flag: 128 flen: 65 decimal: 6 collate: 63 charset: \\\"binary\\\"}\"]\r\n[2019/09/05 01:26:26.689 +09:00] [WARN] [impl_sum.rs:34] [\"aggr_def = tp: Sum children {tp: ColumnRef val: \\\"\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\002\\\" sig: CastIntAsInt field_type {tp: 246 flag: 4097 flen: 15 decimal: 2 collate: 63 charset: \\\"binary\\\"}} sig: CastIntAsInt field_type {tp: 246 flag: 128 flen: 65 decimal: 6 collate: 63 charset: \\\"binary\\\"}\"]\r\n[2019/09/05 01:26:26.690 +09:00] [WARN] [impl_sum.rs:34] [\"aggr_def = tp: Sum children {tp: ColumnRef val: \\\"\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\001\\\" sig: CastIntAsInt field_type {tp: 246 flag: 4097 flen: 15 decimal: 2 collate: 63 charset: \\\"binary\\\"}} sig: CastIntAsInt field_type {tp: 8 flag: 128 flen: 21 decimal: -1 collate: 63 charset: \\\"binary\\\"}\"]\r\n[2019/09/05 01:26:26.690 +09:00] [WARN] [impl_sum.rs:34] [\"aggr_def = tp: Sum children {tp: ColumnRef val: \\\"\\\\200\\\\000\\\\000\\\\000\\\\000\\\\000\\\\000\\\\002\\\" sig: CastIntAsInt field_type {tp: 246 flag: 4097 flen: 15 decimal: 2 collate: 63 charset: \\\"binary\\\"}} sig: CastIntAsInt field_type {tp: 246 flag: 128 flen: 65 decimal: 6 collate: 63 charset: \\\"binary\\\"}\"]\r\n```\r\n\r\nWhich is, `SumLong(DecimalColumn)`."
    },
    {
      "id": 531766679,
      "user": "breezewish",
      "created_at": "2019-09-16T13:01:45Z",
      "body": "Fixed by #5429"
    }
  ]
}