{
  "issue_number": 12038.0,
  "title": "[CRASH] DB crash on JSON.SET",
  "body": "Notice!\r\n- If a Redis module was involved, please open an issue in the module's repo instead!\r\n- If you're using docker on Apple M1, please make sure the image you're using was compiled for ARM!\r\n\r\n\r\n**Crash report**\r\n\r\nHi team, got this error during on JSON.SET operation using this library:\r\nhttps://github.com/redis/redis-om-python\r\n\r\nAs the end I am using `pipeline.execute()`, is it possible because of huge size?\r\n\r\nThanks you.\r\n\r\nDocker compose redis:\r\n```\r\n  redis:\r\n    container_name: redis\r\n    image: redis/redis-stack-server:7.0.6-RC7  # same with redis/redis-stack:6.2.6-v6\r\n    restart: unless-stopped\r\n    networks:\r\n      - redis_network\r\n    volumes:\r\n      - redis_volume:/data\r\n      - ./config/redis/redis.conf:/usr/local/etc/redis/redis.conf\r\n    logging:\r\n      driver: \"json-file\"\r\n      options:\r\n        max-size: \"128m\"\r\n```\r\n\r\nTrace:\r\n\r\n```\r\nredis          | thread '<unnamed>' panicked at 'called `Option::unwrap()` on a `None` value', src/jsonpath/json_node.rs:253:21\r\nredis          | note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace\r\nredis          | fatal runtime error: failed to initiate panic, error 5\r\nredis          |\r\nredis          |\r\nredis          | === REDIS BUG REPORT START: Cut & paste starting from here ===\r\nredis          | 8:M 13 Apr 2023 13:18:59.814 # Redis 7.0.9 crashed by signal: 6, si_code: -6\r\nredis          | 8:M 13 Apr 2023 13:18:59.814 # Crashed running the instruction at: 0x7f6906c7500b\r\nredis          |\r\nredis          | ------ STACK TRACE ------\r\nredis          | EIP:\r\nredis          | /lib/x86_64-linux-gnu/libc.so.6(gsignal+0xcb)[0x7f6906c7500b]\r\nredis          |\r\nredis          | Backtrace:\r\nredis          | /lib/x86_64-linux-gnu/libpthread.so.0(+0x14420)[0x7f6906e38420]\r\nredis          | /lib/x86_64-linux-gnu/libc.so.6(gsignal+0xcb)[0x7f6906c7500b]\r\nredis          | /lib/x86_64-linux-gnu/libc.so.6(abort+0x12b)[0x7f6906c54859]\r\nredis          | /opt/redis-stack/lib/rejson.so(+0x1c6427)[0x7f68ff5c9427]\r\nredis          | /opt/redis-stack/lib/rejson.so(+0x1c46c2)[0x7f68ff5c76c2]\r\nredis          | /opt/redis-stack/lib/rejson.so(+0x1c454a)[0x7f68ff5c754a]\r\nredis          | /opt/redis-stack/lib/rejson.so(+0x1c4242)[0x7f68ff5c7242]\r\nredis          | /opt/redis-stack/lib/rejson.so(+0x1c32fc)[0x7f68ff5c62fc]\r\nredis          | /opt/redis-stack/lib/rejson.so(+0x1c3f92)[0x7f68ff5c6f92]\r\nredis          | /opt/redis-stack/lib/rejson.so(+0x3ead3)[0x7f68ff441ad3]\r\nredis          | /opt/redis-stack/lib/rejson.so(+0x3ebad)[0x7f68ff441bad]\r\nredis          | /opt/redis-stack/lib/rejson.so(+0x87183)[0x7f68ff48a183]\r\nredis          | /opt/redis-stack/lib/rejson.so(JSONAPI_getInt+0x6b)[0x7f68ff4f3ffb]\r\nredis          | /opt/redis-stack/lib/redisearch.so(JSON_StoreInDocField+0x113)[0x7f69061923c3]\r\nredis          | /opt/redis-stack/lib/redisearch.so(JSON_LoadDocumentField+0xd1)[0x7f6906192631]\r\nredis          | /opt/redis-stack/lib/redisearch.so(Document_LoadSchemaFieldJson+0x11d)[0x7f690617500d]\r\nredis          | /opt/redis-stack/lib/redisearch.so(IndexSpec_UpdateDoc+0x1a0)[0x7f69061bc1d0]\r\nredis          | /opt/redis-stack/lib/redisearch.so(Indexes_UpdateMatchingWithSchemaRules+0xd6)[0x7f69061bc8f6]\r\nredis          | /opt/redis-stack/lib/redisearch.so(HashNotificationCallback+0x1fd)[0x7f69061972ed]\r\nredis          | /opt/redis-stack/bin/redis-server *:6379(moduleNotifyKeyspaceEvent+0xea)[0x55bfbbe155aa]\r\nredis          | /opt/redis-stack/bin/redis-server *:6379(notifyKeyspaceEvent+0x35)[0x55bfbbdfd6d5]\r\nredis          | /opt/redis-stack/bin/redis-server *:6379(RM_NotifyKeyspaceEvent+0x33)[0x55bfbbe0a123]\r\nredis          | /opt/redis-stack/lib/rejson.so(+0x10b662)[0x7f68ff50e662]\r\nredis          | /opt/redis-stack/lib/rejson.so(+0x4bb36)[0x7f68ff44eb36]\r\nredis          | /opt/redis-stack/lib/rejson.so(+0xf3b77)[0x7f68ff4f6b77]\r\nredis          | /opt/redis-stack/bin/redis-server *:6379(RedisModuleCommandDispatcher+0x4c)[0x55bfbbe11dbc]\r\nredis          | /opt/redis-stack/bin/redis-server *:6379(call+0xdf)[0x55bfbbd72c4f]\r\nredis          | /opt/redis-stack/bin/redis-server *:6379(execCommand+0x215)[0x55bfbbdd1b65]\r\nredis          | /opt/redis-stack/bin/redis-server *:6379(call+0xdf)[0x55bfbbd72c4f]\r\nredis          | /opt/redis-stack/bin/redis-server *:6379(processCommand+0x8dd)[0x55bfbbd754ad]\r\nredis          | /opt/redis-stack/bin/redis-server *:6379(processCommandAndResetClient+0x20)[0x55bfbbd8b7a0]\r\nredis          | /opt/redis-stack/bin/redis-server *:6379(processInputBuffer+0xd8)[0x55bfbbd8e5a8]\r\nredis          | /opt/redis-stack/bin/redis-server *:6379(readQueryFromClient+0x2e8)[0x55bfbbd91e08]\r\nredis          | /opt/redis-stack/bin/redis-server *:6379(+0x14554c)[0x55bfbbe3c54c]\r\nredis          | /opt/redis-stack/bin/redis-server *:6379(aeProcessEvents+0x1ea)[0x55bfbbd699ea]\r\nredis          | /opt/redis-stack/bin/redis-server *:6379(aeMain+0x1d)[0x55bfbbd69dad]\r\nredis          | /opt/redis-stack/bin/redis-server *:6379(main+0x32d)[0x55bfbbd6588d]\r\nredis          | /lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xf3)[0x7f6906c56083]\r\nredis          | /opt/redis-stack/bin/redis-server *:6379(_start+0x2e)[0x55bfbbd65f6e]\r\nredis          |\r\nredis          | ------ REGISTERS ------\r\nredis          | 8:M 13 Apr 2023 13:18:59.820 #\r\nredis          | RAX:0000000000000000 RBX:00007f6906c2dfc0\r\nredis          | RCX:00007f6906c7500b RDX:0000000000000000\r\nredis          | RDI:0000000000000002 RSI:00007ffe2ad8c370\r\nredis          | RBP:00007ffe2ad8c7f8 RSP:00007ffe2ad8c370\r\nredis          | R8 :0000000000000000 R9 :00007ffe2ad8c370\r\nredis          | R10:0000000000000008 R11:0000000000000246\r\nredis          | R12:0000000000000001 R13:0000000000000001\r\nredis          | R14:00007f68ff6b54c0 R15:00007ffe2ad8c720\r\nredis          | RIP:00007f6906c7500b EFL:0000000000000246\r\nredis          | CSGSFS:002b000000000033\r\nredis          | 8:M 13 Apr 2023 13:18:59.820 # (00007ffe2ad8c37f) -> 00007ffe2ad8c4b0\r\nredis          | 8:M 13 Apr 2023 13:18:59.820 # (00007ffe2ad8c37e) -> 0000000000000000\r\nredis          | 8:M 13 Apr 2023 13:18:59.820 # (00007ffe2ad8c37d) -> 0000000000000000\r\nredis          | 8:M 13 Apr 2023 13:18:59.820 # (00007ffe2ad8c37c) -> 0000000000000010\r\nredis          | 8:M 13 Apr 2023 13:18:59.820 # (00007ffe2ad8c37b) -> 00007f68ff6b5548\r\nredis          | 8:M 13 Apr 2023 13:18:59.820 # (00007ffe2ad8c37a) -> 00007ffe2ad8c570\r\nredis          | 8:M 13 Apr 2023 13:18:59.820 # (00007ffe2ad8c379) -> 00007f68ff5c3ded\r\nredis          | 8:M 13 Apr 2023 13:18:59.820 # (00007ffe2ad8c378) -> 00007ffe2ad8c427\r\nredis          | 8:M 13 Apr 2023 13:18:59.820 # (00007ffe2ad8c377) -> 0000000000000001\r\nredis          | 8:M 13 Apr 2023 13:18:59.820 # (00007ffe2ad8c376) -> 00007ffe2ad8c427\r\nredis          | 8:M 13 Apr 2023 13:18:59.820 # (00007ffe2ad8c375) -> 0000000000000001\r\nredis          | 8:M 13 Apr 2023 13:18:59.820 # (00007ffe2ad8c374) -> 0000000000000001\r\nredis          | 8:M 13 Apr 2023 13:18:59.820 # (00007ffe2ad8c373) -> 00007f6906e37344\r\nredis          | 8:M 13 Apr 2023 13:18:59.820 # (00007ffe2ad8c372) -> 0000000000000000\r\nredis          | 8:M 13 Apr 2023 13:18:59.820 # (00007ffe2ad8c371) -> 00007ffe2ad8c427\r\nredis          | 8:M 13 Apr 2023 13:18:59.820 # (00007ffe2ad8c370) -> 0000000000000000\r\nredis          |\r\nredis          | ------ INFO OUTPUT ------\r\nredis          | # Server\r\nredis          | redis_version:7.0.9\r\nredis          | redis_git_sha1:00000000\r\nredis          | redis_git_dirty:0\r\nredis          | redis_build_id:46ee8c9084f21b9f\r\nredis          | redis_mode:standalone\r\nredis          | os:Linux 5.15.0-1030-gcp x86_64\r\nredis          | arch_bits:64\r\nredis          | monotonic_clock:POSIX clock_gettime\r\nredis          | multiplexing_api:epoll\r\nredis          | atomicvar_api:c11-builtin\r\nredis          | gcc_version:9.4.0\r\nredis          | process_id:8\r\nredis          | process_supervised:no\r\nredis          | run_id:017454a5d965f478ae194495a83677f5262a612b\r\nredis          | tcp_port:6379\r\nredis          | server_time_usec:1681391939802973\r\nredis          | uptime_in_seconds:110\r\nredis          | uptime_in_days:0\r\nredis          | hz:10\r\nredis          | configured_hz:10\r\nredis          | lru_clock:3670339\r\nredis          | executable:/opt/redis-stack/bin/redis-server\r\nredis          | config_file:\r\nredis          | io_threads_active:0\r\nredis          |\r\nredis          | # Clients\r\nredis          | connected_clients:14\r\nredis          | cluster_connections:0\r\nredis          | maxclients:10000\r\nredis          | client_recent_max_input_buffer:20480\r\nredis          | client_recent_max_output_buffer:0\r\nredis          | blocked_clients:0\r\nredis          | tracking_clients:0\r\nredis          | clients_in_timeout_table:0\r\nredis          |\r\nredis          | # Memory\r\nredis          | used_memory:2215792\r\nredis          | used_memory_human:2.11M\r\nredis          | used_memory_rss:17543168\r\nredis          | used_memory_rss_human:16.73M\r\nredis          | used_memory_peak:2355064\r\nredis          | used_memory_peak_human:2.25M\r\nredis          | used_memory_peak_perc:94.09%\r\nredis          | used_memory_overhead:1195192\r\nredis          | used_memory_startup:1168448\r\nredis          | used_memory_dataset:1020600\r\nredis          | used_memory_dataset_perc:97.45%\r\nredis          | allocator_allocated:2697448\r\nredis          | allocator_active:3297280\r\nredis          | allocator_resident:8077312\r\nredis          | total_system_memory:4111183872\r\nredis          | total_system_memory_human:3.83G\r\nredis          | used_memory_lua:36864\r\nredis          | used_memory_vm_eval:36864\r\nredis          | used_memory_lua_human:36.00K\r\nredis          | used_memory_scripts_eval:312\r\nredis          | number_of_cached_scripts:1\r\nredis          | number_of_functions:0\r\nredis          | number_of_libraries:0\r\nredis          | used_memory_vm_functions:32768\r\nredis          | used_memory_vm_total:69632\r\nredis          | used_memory_vm_total_human:68.00K\r\nredis          | used_memory_functions:184\r\nredis          | used_memory_scripts:496\r\nredis          | used_memory_scripts_human:496B\r\nredis          | maxmemory:0\r\nredis          | maxmemory_human:0B\r\nredis          | maxmemory_policy:noeviction\r\nredis          | allocator_frag_ratio:1.22\r\nredis          | allocator_frag_bytes:599832\r\nredis          | allocator_rss_ratio:2.45\r\nredis          | allocator_rss_bytes:4780032\r\nredis          | rss_overhead_ratio:2.17\r\nredis          | rss_overhead_bytes:9465856\r\nredis          | mem_fragmentation_ratio:8.02\r\nredis          | mem_fragmentation_bytes:15354480\r\nredis          | mem_not_counted_for_evict:0\r\nredis          | mem_replication_backlog:0\r\nredis          | mem_total_replication_buffers:0\r\nredis          | mem_clients_slaves:0\r\nredis          | mem_clients_normal:25200\r\nredis          | mem_cluster_links:0\r\nredis          | mem_aof_buffer:0\r\nredis          | mem_allocator:jemalloc-5.2.1\r\nredis          | active_defrag_running:0\r\nredis          | lazyfree_pending_objects:0\r\nredis          | lazyfreed_objects:0\r\nredis          |\r\nredis          | # Persistence\r\nredis          | loading:0\r\nredis          | async_loading:0\r\nredis          | current_cow_peak:0\r\nredis          | current_cow_size:0\r\nredis          | current_cow_size_age:0\r\nredis          | current_fork_perc:0.00\r\nredis          | current_save_keys_processed:0\r\nredis          | current_save_keys_total:0\r\nredis          | rdb_changes_since_last_save:222\r\nredis          | rdb_bgsave_in_progress:0\r\nredis          | rdb_last_save_time:1681391829\r\nredis          | rdb_last_bgsave_status:ok\r\nredis          | rdb_last_bgsave_time_sec:-1\r\nredis          | rdb_current_bgsave_time_sec:-1\r\nredis          | rdb_saves:0\r\nredis          | rdb_last_cow_size:0\r\nredis          | rdb_last_load_keys_expired:0\r\nredis          | rdb_last_load_keys_loaded:0\r\nredis          | aof_enabled:0\r\nredis          | aof_rewrite_in_progress:0\r\nredis          | aof_rewrite_scheduled:0\r\nredis          | aof_last_rewrite_time_sec:-1\r\nredis          | aof_current_rewrite_time_sec:-1\r\nredis          | aof_last_bgrewrite_status:ok\r\nredis          | aof_rewrites:0\r\nredis          | aof_rewrites_consecutive_failures:0\r\nredis          | aof_last_write_status:ok\r\nredis          | aof_last_cow_size:0\r\nredis          | module_fork_in_progress:0\r\nredis          | module_fork_last_cow_size:0\r\nredis          |\r\nredis          | # Stats\r\nredis          | total_connections_received:14\r\nredis          | total_commands_processed:333\r\nredis          | instantaneous_ops_per_sec:0\r\nredis          | total_net_input_bytes:69959\r\nredis          | total_net_output_bytes:58751\r\nredis          | total_net_repl_input_bytes:0\r\nredis          | total_net_repl_output_bytes:0\r\nredis          | instantaneous_input_kbps:0.00\r\nredis          | instantaneous_output_kbps:0.00\r\nredis          | instantaneous_input_repl_kbps:0.00\r\nredis          | instantaneous_output_repl_kbps:0.00\r\nredis          | rejected_connections:0\r\nredis          | sync_full:0\r\nredis          | sync_partial_ok:0\r\nredis          | sync_partial_err:0\r\nredis          | expired_keys:0\r\nredis          | expired_stale_perc:0.00\r\nredis          | expired_time_cap_reached_count:0\r\nredis          | expire_cycle_cpu_milliseconds:2\r\nredis          | evicted_keys:0\r\nredis          | evicted_clients:0\r\nredis          | total_eviction_exceeded_time:0\r\nredis          | current_eviction_exceeded_time:0\r\nredis          | keyspace_hits:165\r\nredis          | keyspace_misses:17\r\nredis          | pubsub_channels:0\r\nredis          | pubsub_patterns:0\r\nredis          | pubsubshard_channels:0\r\nredis          | latest_fork_usec:0\r\nredis          | total_forks:0\r\nredis          | migrate_cached_sockets:0\r\nredis          | slave_expires_tracked_keys:0\r\nredis          | active_defrag_hits:0\r\nredis          | active_defrag_misses:0\r\nredis          | active_defrag_key_hits:0\r\nredis          | active_defrag_key_misses:0\r\nredis          | total_active_defrag_time:0\r\nredis          | current_active_defrag_time:0\r\nredis          | tracking_total_keys:0\r\nredis          | tracking_total_items:0\r\nredis          | tracking_total_prefixes:0\r\nredis          | unexpected_error_replies:0\r\nredis          | total_error_replies:9\r\nredis          | dump_payload_sanitizations:0\r\nredis          | total_reads_processed:212\r\nredis          | total_writes_processed:211\r\nredis          | io_threaded_reads_processed:0\r\nredis          | io_threaded_writes_processed:0\r\nredis          | reply_buffer_shrinks:19\r\nredis          | reply_buffer_expands:5\r\nredis          |\r\nredis          | # Replication\r\nredis          | role:master\r\nredis          | connected_slaves:0\r\nredis          | master_failover_state:no-failover\r\nredis          | master_replid:169192fbfea3d5ee77072dd3ee5392a8d5d79718\r\nredis          | master_replid2:0000000000000000000000000000000000000000\r\nredis          | master_repl_offset:0\r\nredis          | second_repl_offset:-1\r\nredis          | repl_backlog_active:0\r\nredis          | repl_backlog_size:1048576\r\nredis          | repl_backlog_first_byte_offset:0\r\nredis          | repl_backlog_histlen:0\r\nredis          |\r\nredis          | # CPU\r\nredis          | used_cpu_sys:0.129785\r\nredis          | used_cpu_user:0.184156\r\nredis          | used_cpu_sys_children:0.000000\r\nredis          | used_cpu_user_children:0.000000\r\nredis          | used_cpu_sys_main_thread:0.119702\r\nredis          | used_cpu_user_main_thread:0.188053\r\nredis          |\r\nredis          | # Modules\r\nredis          | module:name=graph,ver=21009,api=1,filters=0,usedby=[],using=[ReJSON],options=[]\r\nredis          | module:name=ReJSON,ver=20406,api=1,filters=0,usedby=[search|graph],using=[],options=[handle-io-errors]\r\nredis          | module:name=timeseries,ver=10808,api=1,filters=0,usedby=[],using=[],options=[]\r\nredis          | module:name=search,ver=20606,api=1,filters=0,usedby=[],using=[ReJSON],options=[]\r\nredis          | module:name=bf,ver=20405,api=1,filters=0,usedby=[],using=[],options=[]\r\nredis          |\r\nredis          | # Commandstats\r\nredis          | cmdstat_exec:calls=36,usec=6858,usec_per_call=190.50,rejected_calls=0,failed_calls=0\r\nredis          | cmdstat_FT.INFO:calls=20,usec=903,usec_per_call=45.15,rejected_calls=0,failed_calls=8\r\nredis          | cmdstat_ping:calls=2,usec=3,usec_per_call=1.50,rejected_calls=0,failed_calls=0\r\nredis          | cmdstat_info:calls=2,usec=81,usec_per_call=40.50,rejected_calls=0,failed_calls=0\r\nredis          | cmdstat_FT.CREATE:calls=4,usec=980,usec_per_call=245.00,rejected_calls=0,failed_calls=0\r\nredis          | cmdstat_script|load:calls=1,usec=152,usec_per_call=152.00,rejected_calls=0,failed_calls=0\r\nredis          | cmdstat_hset:calls=40,usec=2856,usec_per_call=71.40,rejected_calls=0,failed_calls=0\r\nredis          | cmdstat_command|info:calls=6,usec=117,usec_per_call=19.50,rejected_calls=0,failed_calls=0\r\nredis          | cmdstat_multi:calls=37,usec=99,usec_per_call=2.68,rejected_calls=0,failed_calls=0\r\nredis          | cmdstat_hgetall:calls=39,usec=378,usec_per_call=9.69,rejected_calls=0,failed_calls=0\r\nredis          | cmdstat_get:calls=23,usec=98,usec_per_call=4.26,rejected_calls=0,failed_calls=0\r\nredis          | cmdstat_FT.SEARCH:calls=19,usec=12026,usec_per_call=632.95,rejected_calls=0,failed_calls=0\r\nredis          | cmdstat_json.get:calls=34,usec=1222,usec_per_call=35.94,rejected_calls=0,failed_calls=0\r\nredis          | cmdstat_json.set:calls=32,usec=10860,usec_per_call=339.38,rejected_calls=0,failed_calls=0\r\nredis          | cmdstat_evalsha:calls=12,usec=629,usec_per_call=52.42,rejected_calls=0,failed_calls=1\r\nredis          | cmdstat_del:calls=11,usec=151,usec_per_call=13.73,rejected_calls=0,failed_calls=0\r\nredis          | cmdstat_set:calls=15,usec=553,usec_per_call=36.87,rejected_calls=0,failed_calls=0\r\nredis          |\r\nredis          | # Errorstats\r\nredis          | errorstat_NOSCRIPT:count=1\r\nredis          | errorstat_Unknown:count=8\r\nredis          |\r\nredis          | # Latencystats\r\nredis          | latency_percentiles_usec_exec:p50=89.087,p99=1003.519,p99.9=1003.519\r\nredis          | latency_percentiles_usec_FT.INFO:p50=50.175,p99=88.063,p99.9=88.063\r\nredis          | latency_percentiles_usec_ping:p50=1.003,p99=2.007,p99.9=2.007\r\nredis          | latency_percentiles_usec_info:p50=25.087,p99=56.063,p99.9=56.063\r\nredis          | latency_percentiles_usec_FT.CREATE:p50=191.487,p99=344.063,p99.9=344.063\r\nredis          | latency_percentiles_usec_script|load:p50=152.575,p99=152.575,p99.9=152.575\r\nredis          | latency_percentiles_usec_hset:p50=67.071,p99=206.847,p99.9=206.847\r\nredis          | latency_percentiles_usec_command|info:p50=16.063,p99=33.023,p99.9=33.023\r\nredis          | latency_percentiles_usec_multi:p50=2.007,p99=26.111,p99.9=26.111\r\nredis          | latency_percentiles_usec_hgetall:p50=10.047,p99=12.031,p99.9=12.031\r\nredis          | latency_percentiles_usec_get:p50=4.015,p99=14.015,p99.9=14.015\r\nredis          | latency_percentiles_usec_FT.SEARCH:p50=73.215,p99=10551.295,p99.9=10551.295\r\nredis          | latency_percentiles_usec_json.get:p50=34.047,p99=149.503,p99.9=149.503\r\nredis          | latency_percentiles_usec_json.set:p50=164.863,p99=5242.879,p99.9=5242.879\r\nredis          | latency_percentiles_usec_evalsha:p50=52.223,p99=77.311,p99.9=77.311\r\nredis          | latency_percentiles_usec_del:p50=14.015,p99=21.119,p99.9=21.119\r\nredis          | latency_percentiles_usec_set:p50=25.087,p99=160.767,p99.9=160.767\r\nredis          |\r\nredis          | # Cluster\r\nredis          | cluster_enabled:0\r\nredis          |\r\nredis          | # Keyspace\r\nredis          | db0:keys=19,expires=0,avg_ttl=0\r\nredis          |\r\nredis          | ------ CLIENT LIST OUTPUT ------\r\nredis          | id=12 addr=192.168.176.4:55728 laddr=192.168.176.2:6379 fd=12 name= age=103 idle=103 flags=N db=0 sub=0 psub=0 ssub=0 multi=-1 qbuf=0 qbuf-free=0 argv-mem=0 multi-mem=0 rbs=1024 rbp=0 obl=0 oll=0 omem=0 tot-mem=1800 events=r cmd=set user=default redir=-1 resp=2\r\nredis          | id=24 addr=192.168.176.5:54808 laddr=192.168.176.2:6379 fd=13 name= age=102 idle=102 flags=N db=0 sub=0 psub=0 ssub=0 multi=-1 qbuf=0 qbuf-free=0 argv-mem=0 multi-mem=0 rbs=1024 rbp=0 obl=0 oll=0 omem=0 tot-mem=1800 events=r cmd=get user=default redir=-1 resp=2\r\nredis          | id=35 addr=192.168.176.4:53048 laddr=192.168.176.2:6379 fd=20 name= age=72 idle=71 flags=N db=0 sub=0 psub=0 ssub=0 multi=-1 qbuf=0 qbuf-free=0 argv-mem=0 multi-mem=0 rbs=1024 rbp=0 obl=0 oll=0 omem=0 tot-mem=1800 events=r cmd=evalsha user=default redir=-1 resp=2\r\nredis          | id=36 addr=192.168.176.4:53062 laddr=192.168.176.2:6379 fd=21 name= age=72 idle=11 flags=N db=0 sub=0 psub=0 ssub=0 multi=-1 qbuf=0 qbuf-free=0 argv-mem=0 multi-mem=0 rbs=1024 rbp=0 obl=0 oll=0 omem=0 tot-mem=1800 events=r cmd=evalsha user=default redir=-1 resp=2\r\nredis          | id=37 addr=192.168.176.4:53078 laddr=192.168.176.2:6379 fd=22 name= age=72 idle=11 flags=N db=0 sub=0 psub=0 ssub=0 multi=-1 qbuf=0 qbuf-free=0 argv-mem=0 multi-mem=0 rbs=1024 rbp=0 obl=0 oll=0 omem=0 tot-mem=1800 events=r cmd=evalsha user=default redir=-1 resp=2\r\nredis          | id=38 addr=192.168.176.4:53080 laddr=192.168.176.2:6379 fd=23 name= age=72 idle=11 flags=N db=0 sub=0 psub=0 ssub=0 multi=-1 qbuf=0 qbuf-free=0 argv-mem=0 multi-mem=0 rbs=1024 rbp=0 obl=0 oll=0 omem=0 tot-mem=1800 events=r cmd=evalsha user=default redir=-1 resp=2\r\nredis          | id=29 addr=192.168.176.4:60704 laddr=192.168.176.2:6379 fd=18 name= age=87 idle=7 flags=N db=0 sub=0 psub=0 ssub=0 multi=-1 qbuf=0 qbuf-free=0 argv-mem=0 multi-mem=0 rbs=1024 rbp=0 obl=0 oll=0 omem=0 tot-mem=1800 events=r cmd=hgetall user=default redir=-1 resp=2\r\nredis          | id=40 addr=192.168.176.3:59992 laddr=192.168.176.2:6379 fd=25 name= age=64 idle=64 flags=N db=0 sub=0 psub=0 ssub=0 multi=-1 qbuf=0 qbuf-free=0 argv-mem=0 multi-mem=0 rbs=1024 rbp=0 obl=0 oll=0 omem=0 tot-mem=1800 events=r cmd=ping user=default redir=-1 resp=2\r\nredis          | id=30 addr=192.168.176.4:60710 laddr=192.168.176.2:6379 fd=19 name= age=87 idle=12 flags=N db=0 sub=0 psub=0 ssub=0 multi=-1 qbuf=0 qbuf-free=0 argv-mem=0 multi-mem=0 rbs=1024 rbp=0 obl=0 oll=0 omem=0 tot-mem=1800 events=r cmd=FT.SEARCH user=default redir=-1 resp=2\r\nredis          | id=39 addr=192.168.176.3:59982 laddr=192.168.176.2:6379 fd=24 name= age=66 idle=66 flags=N db=0 sub=0 psub=0 ssub=0 multi=-1 qbuf=0 qbuf-free=0 argv-mem=0 multi-mem=0 rbs=1024 rbp=0 obl=0 oll=0 omem=0 tot-mem=1800 events=r cmd=ping user=default redir=-1 resp=2\r\nredis          | id=25 addr=192.168.176.3:33798 laddr=192.168.176.2:6379 fd=14 name= age=99 idle=37 flags=N db=0 sub=0 psub=0 ssub=0 multi=-1 qbuf=0 qbuf-free=0 argv-mem=0 multi-mem=0 rbs=1024 rbp=0 obl=0 oll=0 omem=0 tot-mem=1800 events=r cmd=FT.SEARCH user=default redir=-1 resp=2\r\nredis          | id=26 addr=192.168.176.3:33802 laddr=192.168.176.2:6379 fd=15 name= age=98 idle=4 flags=N db=0 sub=0 psub=0 ssub=0 multi=-1 qbuf=0 qbuf-free=0 argv-mem=0 multi-mem=0 rbs=1024 rbp=0 obl=0 oll=0 omem=0 tot-mem=1800 events=r cmd=FT.SEARCH user=default redir=-1 resp=2\r\nredis          | id=27 addr=192.168.176.4:60684 laddr=192.168.176.2:6379 fd=16 name= age=87 idle=11 flags=N db=0 sub=0 psub=0 ssub=0 multi=-1 qbuf=0 qbuf-free=0 argv-mem=0 multi-mem=0 rbs=1024 rbp=0 obl=0 oll=0 omem=0 tot-mem=1800 events=r cmd=json.set user=default redir=-1 resp=2\r\nredis          | id=28 addr=192.168.176.4:60698 laddr=192.168.176.2:6379 fd=17 name= age=87 idle=0 flags=x db=0 sub=0 psub=0 ssub=0 multi=2 qbuf=1710 qbuf-free=18764 argv-mem=4 multi-mem=1690 rbs=1024 rbp=1024 obl=27 oll=0 omem=0 tot-mem=24046 events=r cmd=exec user=default redir=-1 resp=2\r\nredis          |\r\nredis          | ------ CURRENT CLIENT INFO ------\r\nredis          | id=28 addr=192.168.176.4:60698 laddr=192.168.176.2:6379 fd=17 name= age=87 idle=0 flags=x db=0 sub=0 psub=0 ssub=0 multi=2 qbuf=1710 qbuf-free=18764 argv-mem=4 multi-mem=1690 rbs=1024 rbp=1024 obl=27 oll=0 omem=0 tot-mem=24046 events=r cmd=exec user=default redir=-1 resp=2\r\nredis          | argv[0]: '\"JSON.SET\"'\r\nredis          | argv[1]: '\":relayer.models.transaction.BridgeTransaction:0xd838fda99bebf732a8728b7c0dec137274b2f899126f8de4b7e11ff259ac8ace\"'\r\nredis          | argv[2]: '\".\"'\r\nredis          | argv[3]: '\"{\\\"pk\\\": \\\"0xd838fda99bebf732a8728b7c0dec137274b2f899126f8de4b7e11ff259ac8ace\\\", \\\"source\\\": {\\\"pk\\\": \\\"01GXXC9BVJZ9H6V37F0QBVZZNZ\\\", \\\"net\"'\r\nredis          | 8:M 13 Apr 2023 13:18:59.821 # key ':relayer.models.transaction.BridgeTransaction:0xd838fda99bebf732a8728b7c0dec137274b2f899126f8de4b7e11ff259ac8ace' found in DB containing the following object:\r\nredis          | 8:M 13 Apr 2023 13:18:59.821 # Object type: 5\r\nredis          | 8:M 13 Apr 2023 13:18:59.821 # Object encoding: 0\r\nredis          | 8:M 13 Apr 2023 13:18:59.821 # Object refcount: 1\r\nredis          |\r\nredis          | ------ MODULES INFO OUTPUT ------\r\nredis          | # graph_executing commands\r\nredis          |\r\nredis          | # ReJSON_trace\r\nredis          | ReJSON_trace:   0: redis_module::base_info_func\r\nredis          |    1: rejson::__info_func\r\nredis          |    2: modulesCollectInfo\r\nredis          |              at /__w/redis-stack/redis-stack/redis/src/module.c:9467:9\r\nredis          |    3: logModulesInfo\r\nredis          |              at /__w/redis-stack/redis-stack/redis/src/debug.c:1793:22\r\nredis          |    4: printCrashReport\r\nredis          |              at /__w/redis-stack/redis-stack/redis/src/debug.c:2070:5\r\nredis          |    5: sigsegvHandler\r\nredis          |              at /__w/redis-stack/redis-stack/redis/src/debug.c:2052:5\r\nredis          |    6: <unknown>\r\nredis          |    7: gsignal\r\nredis          |    8: abort\r\nredis          |    9: std::sys::unix::abort_internal\r\nredis          |   10: rust_panic\r\nredis          |   11: std::panicking::rust_panic_with_hook\r\nredis          |   12: std::panicking::begin_panic_handler::{{closure}}\r\nredis          |   13: std::sys_common::backtrace::__rust_end_short_backtrace\r\nredis          |   14: rust_begin_unwind\r\nredis          |   15: core::panicking::panic_fmt\r\nredis          |   16: core::panicking::panic\r\nredis          |   17: rejson::jsonpath::json_node::<impl rejson::jsonpath::select_value::SelectValue for ijson::value::IValue>::get_long\r\nredis          |   18: JSONAPI_getInt\r\nredis          |   19: JSON_StoreInDocField\r\nredis          |   20: JSON_LoadDocumentField\r\nredis          |   21: Document_LoadSchemaFieldJson\r\nredis          |   22: IndexSpec_UpdateDoc\r\nredis          |   23: Indexes_UpdateMatchingWithSchemaRules\r\nredis          |   24: HashNotificationCallback\r\nredis          |   25: moduleNotifyKeyspaceEvent\r\nredis          |              at /__w/redis-stack/redis-stack/redis/src/module.c:7922:13\r\nredis          |   26: notifyKeyspaceEvent\r\nredis          |              at /__w/redis-stack/redis-stack/redis/src/notify.c:114:6\r\nredis          |   27: RM_NotifyKeyspaceEvent\r\nredis          |              at /__w/redis-stack/redis-stack/redis/src/module.c:7891:5\r\nredis          |   28: redis_module::raw::notify_keyspace_event\r\nredis          |   29: rejson::commands::json_set\r\nredis          |   30: rejson::RedisModule_OnLoad::__do_command\r\nredis          |   31: RedisModuleCommandDispatcher\r\nredis          |              at /__w/redis-stack/redis-stack/redis/src/module.c:799:5\r\nredis          |   32: call\r\nredis          |              at /__w/redis-stack/redis-stack/redis/src/server.c:3384:5\r\nredis          |   33: execCommand\r\nredis          |              at /__w/redis-stack/redis-stack/redis/src/multi.c:233:17\r\nredis          |   34: call\r\nredis          |              at /__w/redis-stack/redis-stack/redis/src/server.c:3384:5\r\nredis          |   35: processCommand\r\nredis          |              at /__w/redis-stack/redis-stack/redis/src/server.c:4018:9\r\nredis          |   36: processCommandAndResetClient\r\nredis          |              at /__w/redis-stack/redis-stack/redis/src/networking.c:2469:9\r\nredis          |   37: processInputBuffer\r\nredis          |              at /__w/redis-stack/redis-stack/redis/src/networking.c:2573:17\r\nredis          |   38: readQueryFromClient\r\nredis          |              at /__w/redis-stack/redis-stack/redis/src/networking.c:2709:9\r\nredis          |   39: callHandler\r\nredis          |              at /__w/redis-stack/redis-stack/redis/src/connhelpers.h:79:18\r\nredis          |       connSocketEventHandler\r\nredis          |              at /__w/redis-stack/redis-stack/redis/src/connection.c:310:14\r\nredis          |   40: aeProcessEvents\r\nredis          |              at /__w/redis-stack/redis-stack/redis/src/ae.c:436:17\r\nredis          |   41: aeMain\r\nredis          |              at /__w/redis-stack/redis-stack/redis/src/ae.c:496:9\r\nredis          |   42: main\r\nredis          |              at /__w/redis-stack/redis-stack/redis/src/server.c:7167:5\r\nredis          |   43: __libc_start_main\r\nredis          |   44: _start\r\nredis          |\r\nredis          |\r\nredis          | # search_version\r\nredis          | search_version:2.6.6\r\nredis          | search_redis_version:7.0.9 - oss\r\nredis          |\r\nredis          | # search_index\r\nredis          | search_number_of_indexes:4\r\nredis          |\r\nredis          | # search_fields_statistics\r\nredis          | search_fields_numeric:Numeric=6\r\nredis          | search_fields_tag:Tag=16\r\nredis          |\r\nredis          | # search_dialect_statistics\r\nredis          | search_dialect_1:1\r\nredis          | search_dialect_2:0\r\nredis          | search_dialect_3:0\r\nredis          |\r\nredis          | # search_runtime_configurations\r\nredis          | search_concurrent_mode:OFF\r\nredis          | search_enableGC:ON\r\nredis          | search_minimal_term_prefix:2\r\nredis          | search_maximal_prefix_expansions:200\r\nredis          | search_query_timeout_ms:500\r\nredis          | search_timeout_policy:return\r\nredis          | search_cursor_read_size:1000\r\nredis          | search_cursor_max_idle_time:300000\r\nredis          | search_max_doc_table_size:1000000\r\nredis          | search_max_search_results:10000\r\nredis          | search_max_aggregate_results:10000\r\nredis          | search_search_pool_size:20\r\nredis          | search_index_pool_size:8\r\nredis          | search_gc_scan_size:100\r\nredis          | search_min_phonetic_term_length:3\r\nredis          |\r\nredis          | ------ CONFIG DEBUG OUTPUT ------\r\nredis          | proto-max-bulk-len 512mb\r\nredis          | io-threads-do-reads no\r\nredis          | lazyfree-lazy-server-del no\r\nredis          | sanitize-dump-payload no\r\nredis          | lazyfree-lazy-eviction no\r\nredis          | lazyfree-lazy-user-flush no\r\nredis          | lazyfree-lazy-expire no\r\nredis          | client-query-buffer-limit 1gb\r\nredis          | slave-read-only yes\r\nredis          | list-compress-depth 0\r\nredis          | repl-diskless-sync yes\r\nredis          | repl-diskless-load disabled\r\nredis          | io-threads 1\r\nredis          | lazyfree-lazy-user-del no\r\nredis          | activedefrag no\r\nredis          | replica-read-only yes\r\nredis          |\r\nredis          | ------ FAST MEMORY TEST ------\r\nredis          | 8:M 13 Apr 2023 13:18:59.857 # Bio thread for job type #0 terminated\r\nredis          | 8:M 13 Apr 2023 13:18:59.858 # Bio thread for job type #1 terminated\r\nredis          | 8:M 13 Apr 2023 13:18:59.858 # Bio thread for job type #2 terminated\r\nredis          | *** Preparing to test memory region 55bfbbfd0000 (2306048 bytes)\r\nredis          | *** Preparing to test memory region 55bfbd6ed000 (409600 bytes)\r\nredis          | *** Preparing to test memory region 7f68f4000000 (135168 bytes)\r\nredis          | *** Preparing to test memory region 7f68f8ef4000 (6815744 bytes)\r\nredis          | *** Preparing to test memory region 7f68fa800000 (8388608 bytes)\r\nredis          | *** Preparing to test memory region 7f68fb000000 (4194304 bytes)\r\nredis          | *** Preparing to test memory region 7f68fb600000 (8388608 bytes)\r\nredis          | *** Preparing to test memory region 7f68fbe00000 (10485760 bytes)\r\nredis          | *** Preparing to test memory region 7f68fc95d000 (2621440 bytes)\r\nredis          | *** Preparing to test memory region 7f68fcbde000 (8388608 bytes)\r\nredis          | *** Preparing to test memory region 7f68fd3df000 (8388608 bytes)\r\nredis          | *** Preparing to test memory region 7f68fdbe0000 (8388608 bytes)\r\nredis          | *** Preparing to test memory region 7f68fe3e1000 (8388608 bytes)\r\nredis          | *** Preparing to test memory region 7f68febe2000 (8388608 bytes)\r\nredis          | *** Preparing to test memory region 7f68ff6bb000 (8388608 bytes)\r\nredis          | *** Preparing to test memory region 7f68ffebc000 (8388608 bytes)\r\nredis          | *** Preparing to test memory region 7f690074b000 (4096 bytes)\r\nredis          | *** Preparing to test memory region 7f690074d000 (8388608 bytes)\r\nredis          | *** Preparing to test memory region 7f6900f4e000 (8388608 bytes)\r\nredis          | *** Preparing to test memory region 7f690174f000 (8388608 bytes)\r\nredis          | *** Preparing to test memory region 7f6901f50000 (8388608 bytes)\r\nredis          | *** Preparing to test memory region 7f6902751000 (8388608 bytes)\r\nredis          | *** Preparing to test memory region 7f6902f52000 (8388608 bytes)\r\nredis          | *** Preparing to test memory region 7f6904ec4000 (12288 bytes)\r\nredis          | *** Preparing to test memory region 7f6904ec8000 (8388608 bytes)\r\nredis          | *** Preparing to test memory region 7f69056c9000 (8388608 bytes)\r\nredis          | *** Preparing to test memory region 7f69060a8000 (12288 bytes)\r\nredis          | *** Preparing to test memory region 7f69063fd000 (12288 bytes)\r\nredis          | *** Preparing to test memory region 7f6906400000 (8388608 bytes)\r\nredis          | *** Preparing to test memory region 7f6906c2c000 (24576 bytes)\r\nredis          | *** Preparing to test memory region 7f6906e20000 (16384 bytes)\r\nredis          | *** Preparing to test memory region 7f6906e43000 (16384 bytes)\r\nredis          | *** Preparing to test memory region 7f690711a000 (16384 bytes)\r\nredis          | *** Preparing to test memory region 7f6907306000 (8192 bytes)\r\nredis          | *** Preparing to test memory region 7f6907339000 (4096 bytes)\r\nredis          | .O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O\r\nredis          | Fast memory test PASSED, however your memory can still be broken. Please run a memory test for several hours if possible.\r\nredis          |\r\nredis          | ------ DUMPING CODE AROUND EIP ------\r\nredis          | Symbol: gsignal (base: 0x7f6906c74f40)\r\nredis          | Module: /lib/x86_64-linux-gnu/libc.so.6 (base 0x7f6906c32000)\r\nredis          | $ xxd -r -p /tmp/dump.hex /tmp/dump.bin\r\nredis          | $ objdump --adjust-vma=0x7f6906c74f40 -D -b binary -m i386:x86-64 /tmp/dump.bin\r\nredis          | ------\r\nredis          | 8:M 13 Apr 2023 13:19:00.753 # dump of function (hexdump of 331 bytes):\r\nredis          | f30f1efa4881ec180100004189f831ff660f6f058898170064488b042528000000488984240801000031c04989e1b80e000000488db424800000000f29842480000000660f76c041ba080000004c89ca0f298424900000000f298424a00000000f298424b00000000f298424c00000000f298424d00000000f298424e00000000f298424f00000000f05b92700000089c80f054889c7b8ba0000000f0589c64489c2b8ea0000000f05483d00f0ffff773f4189c041ba0800000031d24c89cebf02000000b80e0000000f05488b84240801000064483304252800000075264489c04881c418010000c30f1f8000000000488b15398e1a00f7d841b8ffffffff648902ebb0e827ca0e000f1f8000000000f30f1efa85ff7808f7dfe97103000090488b05098e1a0064c70016000000b8ffffffffc3662e0f1f84000000000066909066662e0f1f8400000000\r\nredis          | Function at 0x7f6906d61a70 is __stack_chk_fail\r\nredis          |\r\nredis          | === REDIS BUG REPORT END. Make sure to include from START to END. ===\r\nredis          |\r\nredis          |        Please report the crash by opening an issue on github:\r\nredis          |\r\nredis          |            http://github.com/redis/redis/issues\r\nredis          |\r\nredis          |   If a Redis module was involved, please open in the module's repo instead.\r\nredis          |\r\nredis          |   Suspect RAM error? Use redis-server --test-memory to verify it.\r\nredis          |\r\nredis          |   Some other issues could be detected by redis-server --check-system\r\nredis          | Aborted (core dumped)\r\n```\r\n\r\n**Additional information**\r\n\r\n1. OS distribution and version\r\n - Docker Compose version v2.17.2\r\n - Ubuntu 20.04.5 LTS\r\n - Docker engine 23.0.3\r\n2. Steps to reproduce (if any)\r\n - unfortunatlly it is happening in random, so I do not have steps at this point",
  "state": "closed",
  "created_at": "2023-04-13T13:37:54Z",
  "updated_at": "2023-04-13T14:30:01Z",
  "closed_at": "2023-04-13T14:30:01Z",
  "labels": [],
  "comments_data": [
    {
      "id": 1507073444,
      "user": "itamarhaber",
      "created_at": "2023-04-13T14:30:01Z",
      "body": "Hello @m-bo-one - thanks for reporting the issue.\r\n\r\nThis issue belongs in the RedisJSON repository - https://github.com/RedisJSON/RedisJSON - kindly move it there."
    }
  ]
}