{
  "issue_number": 8671.0,
  "title": "[CRASH] Sentinel 5.0.8",
  "body": "**Crash report**\r\n\r\n------ REGISTERS ------\r\n13016:X 18 Mar 2021 20:04:47.790 #\r\nRAX:000056295676dc78 RBX:00007f84a4284f00\r\nRCX:0000000000000000 RDX:0000000000000000\r\nRDI:0000000065706c5f RSI:0000562956840b88\r\nRBP:0000000000000001 RSP:00007ffc650feee0\r\nR8 :0000000000000028 R9 :00007f849f827c29\r\nR10:0000000000000002 R11:0000000000000006\r\nR12:00007f84a3dfbf00 R13:73616d3a656c6f72\r\nR14:00007f84a237cff9 R15:0000000000000082\r\nRIP:000056295676dc88 EFL:0000000000010283\r\nCSGSFS:002b000000000033\r\n13016:X 18 Mar 2021 20:04:47.790 # (00007ffc650feeef) -> 00007ffc650ff198\r\n13016:X 18 Mar 2021 20:04:47.790 # (00007ffc650feeee) -> 0000000000000001\r\n13016:X 18 Mar 2021 20:04:47.790 # (00007ffc650feeed) -> 0000562956792e36\r\n13016:X 18 Mar 2021 20:04:47.790 # (00007ffc650feeec) -> 00000000000000c0\r\n13016:X 18 Mar 2021 20:04:47.790 # (00007ffc650feeeb) -> 0000000000000001\r\n13016:X 18 Mar 2021 20:04:47.790 # (00007ffc650feeea) -> 0000000000000000\r\n13016:X 18 Mar 2021 20:04:47.790 # (00007ffc650feee9) -> 00007ffc650fef68\r\n13016:X 18 Mar 2021 20:04:47.790 # (00007ffc650feee8) -> 0000562958417f20\r\n13016:X 18 Mar 2021 20:04:47.790 # (00007ffc650feee7) -> 0000562958402b60\r\n13016:X 18 Mar 2021 20:04:47.790 # (00007ffc650feee6) -> 0000562958417f20\r\n13016:X 18 Mar 2021 20:04:47.790 # (00007ffc650feee5) -> c982b26d7df3b400\r\n13016:X 18 Mar 2021 20:04:47.790 # (00007ffc650feee4) -> 0000008d00000003\r\n13016:X 18 Mar 2021 20:04:47.790 # (00007ffc650feee3) -> 0000562956796dee\r\n13016:X 18 Mar 2021 20:04:47.790 # (00007ffc650feee2) -> 00007f84a42301ff\r\n13016:X 18 Mar 2021 20:04:47.790 # (00007ffc650feee1) -> 00007f84a4230100\r\n13016:X 18 Mar 2021 20:04:47.790 # (00007ffc650feee0) -> 0000000000000000\r\n\r\n------ FAST MEMORY TEST ------\r\n13016:X 18 Mar 2021 20:04:47.790 # Bio thread for job type #0 terminated\r\n13016:X 18 Mar 2021 20:04:47.790 # Bio thread for job type #1 terminated\r\n13016:X 18 Mar 2021 20:04:47.790 # Bio thread for job type #2 terminated\r\n*** Preparing to test memory region 562956a86000 (2252800 bytes)\r\n*** Preparing to test memory region 5629583bf000 (540672 bytes)\r\n*** Preparing to test memory region 7f84962fd000 (201850880 bytes)\r\n*** Preparing to test memory region 7f84a237e000 (8388608 bytes)\r\n*** Preparing to test memory region 7f84a2b7f000 (8388608 bytes)\r\n*** Preparing to test memory region 7f84a3380000 (8388608 bytes)\r\n*** Preparing to test memory region 7f84a3b80000 (11010048 bytes)\r\n*** Preparing to test memory region 7f84a4bd6000 (16384 bytes)\r\n*** Preparing to test memory region 7f84a4df5000 (16384 bytes)\r\n*** Preparing to test memory region 7f84a57b9000 (32768 bytes)\r\n*** Preparing to test memory region 7f84a57cc000 (4096 bytes)\r\n.O.O.O.O.O.O.O.O.O.O.O\r\nFast memory test PASSED, however your memory can still be broken. Please run a memory test for several hours if possible.\r\n\r\n------ DUMPING CODE AROUND EIP ------\r\nSymbol: sentinelRefreshInstanceInfo (base: 0x56295676db80)\r\nModule: /opt/redis-5.0.8/bin/redis-sentinel 0.0.0.0:26379 [sentinel] (base 0x5629566ce000)\r\n$ xxd -r -p /tmp/dump.hex /tmp/dump.bin\r\n$ objdump --adjust-vma=0x56295676db80 -D -b binary -m i386:x86-64 /tmp/dump.bin\r\n------\r\n13016:X 18 Mar 2021 20:04:48.621 # dump of function (hexdump of 392 bytes):\r\n415741564155415455534889fb4889f54883ec38488bbf3801000064488b042528000000488944242831c0e8e0fef9ff4889efe848fef9ff4889ef4889833801000048c783a800000000000000e89e0cf9ff4c8d44242448\r\n8d15b47a0c004889c6b9020000004889efe8921efaff8b7424244989c485f60f8e530b000041bf0100000031ed49bd726f6c653a6d6173904f8b74fcf8450fb646ff4489c183e10780f9020f849f0300000f86b902000080\r\nf9030f848003000080f9047517498b46ef4883f82e760d41813e72756e5f0f8484030000f603010f84eb01000080f9047726488d351f2f0d000fb6d1486304964801f0ffe00f1f004180f8370f87ec0d0000660f1f440000\r\n4d392e745348b8726f6c653a736c614939060f8400030000b80100000083fd02740485c0754a410fb64eff4189c84183e0074180f8040f87bc020000488d3dd12e0d00410fb6c0486304874801f8ffe00f1f840000000000\r\n6641817e08746575a441807e0a72759dbd010000000f1f004489f84983c701394424240f8f07ffff\r\n\r\n=== REDIS BUG REPORT END. Make sure to include from START to END. ===\r\n\r\n       Please report the crash by opening an issue on github:\r\n\r\n           http://github.com/antirez/redis/issues\r\n\r\n  Suspect RAM error? Use redis-server --test-memory to verify it.\r\n```\r\n```\r\n\r\n**Aditional information**\r\n\r\n1.  OS Info\r\nDistributor ID:\tUbuntu\r\nDescription:\tUbuntu 18.04.4 LTS\r\nRelease:\t18.04\r\nCodename:\tbionic\r\n2. Steps to reproduce (if any)\r\n3. Multiple sentinel restart not on one machine\r\n",
  "state": "closed",
  "created_at": "2021-03-19T06:27:44Z",
  "updated_at": "2021-06-27T10:17:02Z",
  "closed_at": "2021-06-27T10:17:02Z",
  "labels": [
    "state:to-be-closed"
  ],
  "comments_data": [
    {
      "id": 802889450,
      "user": "hwware",
      "created_at": "2021-03-19T14:50:35Z",
      "body": "Hi @abaowhy, I am not 100% sure but based the information you provided , this issue looks similar to https://github.com/redis/redis/issues/8012. which has been fixed by https://github.com/redis/redis/pull/7443. Can you uupgrade the version and see if the problem still exists? thank you!"
    },
    {
      "id": 813466192,
      "user": "madolson",
      "created_at": "2021-04-05T15:51:00Z",
      "body": "This can be closed unless @abaowhy responds with more information."
    }
  ]
}