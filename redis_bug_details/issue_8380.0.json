{
  "issue_number": 8380.0,
  "title": "[CRASH]dictFind(db->dict,key->ptr) != NULL",
  "body": "redis          | === REDIS BUG REPORT START: Cut & paste starting from here ===\r\nredis          | 1:M 22 Jan 09:03:05.578 # === ASSERTION FAILED OBJECT CONTEXT ===\r\nredis          | 1:M 22 Jan 09:03:05.578 # Object type: 0\r\nredis          | 1:M 22 Jan 09:03:05.578 # Object encoding: 0\r\nredis          | 1:M 22 Jan 09:03:05.578 # Object refcount: 1\r\nredis          | 1:M 22 Jan 09:03:05.578 # Object raw string len: 0\r\nredis          | 1:M 22 Jan 09:03:05.578 # Object raw string content: \"\"\r\nredis          | 1:M 22 Jan 09:03:05.578 # === ASSERTION FAILED ===\r\nredis          | 1:M 22 Jan 09:03:05.578 # ==> db.c:868 'dictFind(db->dict,key->ptr) != NULL' is not true\r\nredis          | 1:M 22 Jan 09:03:05.578 # (forcing SIGSEGV to print the bug report.)\r\nredis          | 1:M 22 Jan 09:03:05.578 # Redis 3.2.12 crashed by signal: 11\r\nredis          | 1:M 22 Jan 09:03:05.578 # Accessing address: 0xffffffffffffffff\r\nredis          | 1:M 22 Jan 09:03:05.578 # Failed assertion: dictFind(db->dict,key->ptr) != NULL (db.c:868)\r\nredis          |\r\nredis          | ------ STACK TRACE ------\r\nredis          | redis-server *:6379(logStackTrace+0x3c)[0xaaaadaf89f9c]\r\nredis          |\r\nredis          | ------ INFO OUTPUT ------\r\nredis          | # Server\r\nredis          | redis_version:3.2.12\r\nredis          | redis_git_sha1:00000000\r\nredis          | redis_git_dirty:0\r\nredis          | redis_build_id:201d0c859011ee79\r\nredis          | redis_mode:standalone\r\nredis          | os:Linux 4.19.90-17.5.ky10.aarch64 aarch64\r\nredis          | arch_bits:64\r\nredis          | multiplexing_api:epoll\r\nredis          | gcc_version:6.3.0\r\nredis          | process_id:1\r\nredis          | run_id:7f3926848608e5948c86d38636d9a3f77c1fb15e\r\nredis          | tcp_port:6379\r\nredis          | uptime_in_seconds:0\r\nredis          | uptime_in_days:0\r\nredis          | hz:10\r\nredis          | lru_clock:664649\r\nredis          | executable:/data/redis-server\r\nredis          | config_file:\r\nredis          |\r\nredis          | # Clients\r\nredis          | connected_clients:0\r\nredis          | client_longest_output_list:0\r\nredis          | client_biggest_input_buf:0\r\nredis          | blocked_clients:0\r\nredis          |\r\nredis          | # Memory\r\nredis          | used_memory:19816888\r\nredis          | used_memory_human:18.90M\r\nredis          | used_memory_rss:0\r\nredis          | used_memory_rss_human:0B\r\nredis          | used_memory_peak:26823928\r\nredis          | used_memory_peak_human:25.58M\r\nredis          | total_system_memory:547483942912\r\nredis          | total_system_memory_human:509.88G\r\nredis          | used_memory_lua:37888\r\nredis          | used_memory_lua_human:37.00K\r\nredis          | maxmemory:0\r\nredis          | maxmemory_human:0B\r\nredis          | maxmemory_policy:noeviction\r\nredis          | mem_fragmentation_ratio:0.00\r\nredis          | mem_allocator:jemalloc-4.0.3\r\nredis          |\r\nredis          | # Persistence\r\nredis          | loading:1\r\nredis          | rdb_changes_since_last_save:61442\r\nredis          | rdb_bgsave_in_progress:0\r\nredis          | rdb_last_save_time:1611277385\r\nredis          | rdb_last_bgsave_status:ok\r\nredis          | rdb_last_bgsave_time_sec:-1\r\nredis          | rdb_current_bgsave_time_sec:-1\r\nredis          | aof_enabled:0\r\nredis          | aof_rewrite_in_progress:0\r\nredis          | aof_rewrite_scheduled:0\r\nredis          | aof_last_rewrite_time_sec:-1\r\nredis          | aof_current_rewrite_time_sec:-1\r\nredis          | aof_last_bgrewrite_status:ok\r\nredis          | aof_last_write_status:ok\r\nredis          | loading_start_time:1611277385\r\nredis          | loading_total_bytes:106937905\r\nredis          | loading_loaded_bytes:102501494\r\nredis          | loading_loaded_perc:95.85\r\nredis          | loading_eta_seconds:1\r\nredis          |\r\nredis          | # Stats\r\nredis          | total_connections_received:0\r\nredis          | total_commands_processed:0\r\nredis          | instantaneous_ops_per_sec:0\r\nredis          | total_net_input_bytes:0\r\nredis          | total_net_output_bytes:0\r\nredis          | instantaneous_input_kbps:0.00\r\nredis          | instantaneous_output_kbps:0.00\r\nredis          | rejected_connections:0\r\nredis          | sync_full:0\r\nredis          | sync_partial_ok:0\r\nredis          | sync_partial_err:0\r\nredis          | expired_keys:0\r\nredis          | evicted_keys:0\r\nredis          | keyspace_hits:0\r\nredis          | keyspace_misses:0\r\nredis          | pubsub_channels:0\r\nredis          | pubsub_patterns:0\r\nredis          | latest_fork_usec:0\r\nredis          | migrate_cached_sockets:0\r\nredis          |\r\nredis          | # Replication\r\nredis          | role:master\r\nredis          | connected_slaves:0\r\nredis          | master_repl_offset:0\r\nredis          | repl_backlog_active:0\r\nredis          | repl_backlog_size:1048576\r\nredis          | repl_backlog_first_byte_offset:0\r\nredis          | repl_backlog_histlen:0\r\nredis          |\r\nredis          | # CPU\r\nredis          | used_cpu_sys:0.08\r\nredis          | used_cpu_user:0.35\r\nredis          | used_cpu_sys_children:0.00\r\nredis          | used_cpu_user_children:0.00\r\nredis          |\r\nredis          | # Commandstats\r\nredis          |\r\nredis          | # Cluster\r\nredis          | cluster_enabled:0\r\nredis          |\r\nredis          | # Keyspace\r\nredis          | db2:keys=1746,expires=1026,avg_ttl=0\r\nredis          | db3:keys=1201,expires=1063,avg_ttl=0\r\nredis          | hash_init_value: 1611184832\r\nredis          |\r\nredis          | ------ CLIENT LIST OUTPUT ------\r\nredis          |\r\nredis          | ------ REGISTERS ------\r\nredis          |\r\nredis          | ------ FAST MEMORY TEST ------\r\nredis          | 1:M 22 Jan 09:03:05.578 # Bio thread for job type #0 terminated\r\nredis          | 1:M 22 Jan 09:03:05.578 # Bio thread for job type #1 terminated\r\nredis          | *** Preparing to test memory region aaaadb040000 (131072 bytes)\r\nredis          | *** Preparing to test memory region aaaafe990000 (196608 bytes)\r\nredis          | *** Preparing to test memory region fffe0f400000 (33554432 bytes)\r\nredis          | *** Preparing to test memory region fffe11410000 (8323072 bytes)\r\nredis          | *** Preparing to test memory region fffe11c10000 (12517376 bytes)\r\nredis          | *** Preparing to test memory region fffe12bf0000 (131072 bytes)\r\nredis          | .O.O.O.O.O.O\r\nredis          | Fast memory test PASSED, however your memory can still be broken. Please run a memory test for several hours if possible.\r\nredis          |\r\nredis          | === REDIS BUG REPORT END. Make sure to include from START to END. ===\r\nredis          |\r\nredis          |        Please report the crash by opening an issue on github:\r\nredis          |\r\nredis          |            http://github.com/antirez/redis/issues\r\nredis          |\r\nredis          |   Suspect RAM error? Use redis-server --test-memory to verify it.\r\nredis          |\r\n\r\n ",
  "state": "closed",
  "created_at": "2021-01-22T01:32:50Z",
  "updated_at": "2021-07-19T09:55:59Z",
  "closed_at": "2021-07-19T09:55:59Z",
  "labels": [],
  "comments_data": [
    {
      "id": 779781395,
      "user": "yossigo",
      "created_at": "2021-02-16T11:39:30Z",
      "body": "@blank1993 Does this problem reproduce on the latest version (6.0.10)?"
    },
    {
      "id": 779927021,
      "user": "hwware",
      "created_at": "2021-02-16T15:51:40Z",
      "body": "@blank1993 @yossigo this looks duplicate with an old issue in arm environment. which has been fixed by https://github.com/redis/redis/issues/3892"
    },
    {
      "id": 882413947,
      "user": "oranagra",
      "created_at": "2021-07-19T09:55:59Z",
      "body": "closing as a dup of the above mentioned issue (solved in redis 5.0)."
    }
  ]
}