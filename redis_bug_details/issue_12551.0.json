{
  "issue_number": 12551.0,
  "title": "[CRASH] occurs when executing redisCommand() using the hiredis library.",
  "body": "=== REDIS BUG REPORT START: Cut & paste starting from here ===\r\n42524:M 06 Sep 2023 14:57:31.062 # === ASSERTION FAILED ===\r\n42524:M 06 Sep 2023 14:57:31.062 # ==> t_zset.c:280 'x && curscore == x->score && sdscmp(x->ele,ele) == 0' is not true\r\n\r\n------ INFO OUTPUT ------\r\n# Server\r\nredis_version:6.2.13\r\nredis_git_sha1:024897ed\r\nredis_git_dirty:0\r\nredis_build_id:baf36c7e8b74f48\r\nredis_mode:standalone\r\nos:Linux 5.15.24-0-lts x86_64\r\narch_bits:64\r\nmonotonic_clock:POSIX clock_gettime\r\nmultiplexing_api:epoll\r\natomicvar_api:c11-builtin\r\ngcc_version:10.3.1\r\nprocess_id:42524\r\nprocess_supervised:no\r\nrun_id:16f764e394738ca24955efcdd63e02e4ee110f76\r\ntcp_port:6379\r\nserver_time_usec:1693979851062574\r\nuptime_in_seconds:88282\r\nuptime_in_days:1\r\nhz:10\r\nconfigured_hz:10\r\nlru_clock:16258250\r\nexecutable:/usr/bin/redis-server\r\nconfig_file:/etc/redis.conf\r\nio_threads_active:0\r\n\r\n# Clients\r\nconnected_clients:13\r\ncluster_connections:0\r\nmaxclients:10000\r\nclient_recent_max_input_buffer:36\r\nclient_recent_max_output_buffer:0\r\nblocked_clients:0\r\ntracking_clients:0\r\nclients_in_timeout_table:0\r\n\r\n# Memory\r\nused_memory:7684815\r\nused_memory_human:7.33M\r\nused_memory_rss:14503936\r\nused_memory_rss_human:13.83M\r\nused_memory_peak:11210610\r\nused_memory_peak_human:10.69M\r\nused_memory_peak_perc:68.55%\r\nused_memory_overhead:1592671\r\nused_memory_startup:788045\r\nused_memory_dataset:6092144\r\nused_memory_dataset_perc:88.33%\r\nallocator_allocated:7683464\r\nallocator_active:14473216\r\nallocator_resident:14473216\r\ntotal_system_memory:67179421696\r\ntotal_system_memory_human:62.57G\r\nused_memory_lua:30720\r\nused_memory_lua_human:30.00K\r\nused_memory_scripts:0\r\nused_memory_scripts_human:0B\r\nnumber_of_cached_scripts:0\r\nmaxmemory:0\r\nmaxmemory_human:0B\r\nmaxmemory_policy:noeviction\r\nallocator_frag_ratio:1.88\r\nallocator_frag_bytes:6789752\r\nallocator_rss_ratio:1.00\r\nallocator_rss_bytes:0\r\nrss_overhead_ratio:1.00\r\nrss_overhead_bytes:30720\r\nmem_fragmentation_ratio:1.89\r\nmem_fragmentation_bytes:6820472\r\nmem_not_counted_for_evict:186\r\nmem_replication_backlog:0\r\nmem_clients_slaves:0\r\nmem_clients_normal:221260\r\nmem_aof_buffer:190\r\nmem_allocator:libc\r\nactive_defrag_running:0\r\nlazyfree_pending_objects:0\r\nlazyfreed_objects:0\r\n\r\n# Persistence\r\nloading:0\r\ncurrent_cow_size:0\r\ncurrent_cow_size_age:0\r\ncurrent_fork_perc:0.00\r\ncurrent_save_keys_processed:0\r\ncurrent_save_keys_total:0\r\nrdb_changes_since_last_save:6204\r\nrdb_bgsave_in_progress:0\r\nrdb_last_save_time:1693979807\r\nrdb_last_bgsave_status:ok\r\nrdb_last_bgsave_time_sec:0\r\nrdb_current_bgsave_time_sec:-1\r\nrdb_last_cow_size:3121152\r\naof_enabled:1\r\naof_rewrite_in_progress:0\r\naof_rewrite_scheduled:0\r\naof_last_rewrite_time_sec:-1\r\naof_current_rewrite_time_sec:-1\r\naof_last_bgrewrite_status:ok\r\naof_last_write_status:ok\r\naof_last_cow_size:0\r\nmodule_fork_in_progress:0\r\nmodule_fork_last_cow_size:0\r\naof_current_size:470364392\r\naof_base_size:285237534\r\naof_pending_rewrite:0\r\naof_buffer_length:0\r\naof_rewrite_buffer_length:0\r\naof_pending_bio_fsync:0\r\naof_delayed_fsync:0\r\n\r\n# Stats\r\ntotal_connections_received:566336\r\ntotal_commands_processed:4100490\r\ninstantaneous_ops_per_sec:7765\r\ntotal_net_input_bytes:339496602\r\ntotal_net_output_bytes:205277554\r\ninstantaneous_input_kbps:694.83\r\ninstantaneous_output_kbps:46.94\r\nrejected_connections:0\r\nsync_full:0\r\nsync_partial_ok:0\r\nsync_partial_err:0\r\nexpired_keys:544\r\nexpired_stale_perc:0.00\r\nexpired_time_cap_reached_count:0\r\nexpire_cycle_cpu_milliseconds:3761\r\nevicted_keys:0\r\nkeyspace_hits:1233832\r\nkeyspace_misses:128582\r\npubsub_channels:0\r\npubsub_patterns:0\r\nlatest_fork_usec:705\r\ntotal_forks:352\r\nmigrate_cached_sockets:0\r\nslave_expires_tracked_keys:0\r\nactive_defrag_hits:0\r\nactive_defrag_misses:0\r\nactive_defrag_key_hits:0\r\nactive_defrag_key_misses:0\r\ntracking_total_keys:0\r\ntracking_total_items:0\r\ntracking_total_prefixes:0\r\nunexpected_error_replies:0\r\ntotal_error_replies:17954\r\ndump_payload_sanitizations:0\r\ntotal_reads_processed:4684839\r\ntotal_writes_processed:4118836\r\nio_threaded_reads_processed:0\r\nio_threaded_writes_processed:0\r\n\r\n# Replication\r\nrole:master\r\nconnected_slaves:0\r\nmaster_failover_state:no-failover\r\nmaster_replid:9d9e80fab32065f5426197739eead35fdb6be19d\r\nmaster_replid2:0000000000000000000000000000000000000000\r\nmaster_repl_offset:0\r\nsecond_repl_offset:-1\r\nrepl_backlog_active:0\r\nrepl_backlog_size:1048576\r\nrepl_backlog_first_byte_offset:0\r\nrepl_backlog_histlen:0\r\n\r\n# CPU\r\nused_cpu_sys:178.932064\r\nused_cpu_user:148.696761\r\nused_cpu_sys_children:3.406465\r\nused_cpu_user_children:12.095729\r\nused_cpu_sys_main_thread:170.893670\r\nused_cpu_user_main_thread:145.115127\r\n\r\n# Modules\r\n\r\n# Commandstats\r\ncmdstat_lrem:calls=129423,usec=17950359,usec_per_call=138.70,rejected_calls=17426,failed_calls=0\r\ncmdstat_del:calls=102599,usec=811037,usec_per_call=7.90,rejected_calls=12,failed_calls=0\r\ncmdstat_zscore:calls=380539,usec=1675316,usec_per_call=4.40,rejected_calls=140,failed_calls=0\r\ncmdstat_command:calls=12,usec=49203,usec_per_call=4100.25,rejected_calls=0,failed_calls=0\r\ncmdstat_zrem:calls=412384,usec=1569094,usec_per_call=3.80,rejected_calls=0,failed_calls=0\r\ncmdstat_rpush:calls=84950,usec=174871,usec_per_call=2.06,rejected_calls=0,failed_calls=0\r\ncmdstat_exists:calls=198747,usec=233787,usec_per_call=1.18,rejected_calls=1,failed_calls=0\r\ncmdstat_rename:calls=50,usec=608,usec_per_call=12.16,rejected_calls=0,failed_calls=0\r\ncmdstat_zadd:calls=941974,usec=5348570,usec_per_call=5.68,rejected_calls=346,failed_calls=0\r\ncmdstat_zincrby:calls=699106,usec=6401080,usec_per_call=9.16,rejected_calls=24,failed_calls=0\r\ncmdstat_hmget:calls=104058,usec=290528,usec_per_call=2.79,rejected_calls=0,failed_calls=0\r\ncmdstat_set:calls=273466,usec=1291390,usec_per_call=4.72,rejected_calls=3,failed_calls=0\r\ncmdstat_llen:calls=161,usec=777,usec_per_call=4.83,rejected_calls=0,failed_calls=0\r\ncmdstat_hgetall:calls=13,usec=166,usec_per_call=12.77,rejected_calls=1,failed_calls=0\r\ncmdstat_get:calls=677314,usec=1454516,usec_per_call=2.15,rejected_calls=0,failed_calls=0\r\ncmdstat_keys:calls=364,usec=1377936,usec_per_call=3785.54,rejected_calls=0,failed_calls=0\r\ncmdstat_lrange:calls=137,usec=2347,usec_per_call=17.13,rejected_calls=0,failed_calls=0\r\ncmdstat_expire:calls=664,usec=2883,usec_per_call=4.34,rejected_calls=0,failed_calls=0\r\ncmdstat_zrange:calls=1445,usec=764207,usec_per_call=528.86,rejected_calls=0,failed_calls=0\r\ncmdstat_hmset:calls=93084,usec=703222,usec_per_call=7.55,rejected_calls=0,failed_calls=0\r\n\r\n# Errorstats\r\nerrorstat_ERR:count=17440\r\nerrorstat_LOADING:count=514\r\n\r\n# Cluster\r\ncluster_enabled:0\r\n\r\n# Keyspace\r\ndb0:keys=11202,expires=125,avg_ttl=347015299\r\n\r\n------ CLIENT LIST OUTPUT ------\r\nid=7148 addr=127.0.0.1:45864 laddr=127.0.0.1:6379 fd=12 name= age=86667 idle=7 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 argv-mem=0 obl=0 oll=0 omem=0 tot-mem=17020 events=r cmd=set user=default redir=-1\r\nid=12 addr=127.0.0.1:58928 laddr=127.0.0.1:6379 fd=10 name= age=88257 idle=16 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 argv-mem=0 obl=0 oll=0 omem=0 tot-mem=17012 events=r cmd=del user=default redir=-1\r\nid=7149 addr=127.0.0.1:45866 laddr=127.0.0.1:6379 fd=16 name= age=86662 idle=0 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=93 qbuf-free=32675 argv-mem=63 obl=0 oll=0 omem=0 tot-mem=49861 events=r cmd=zadd user=default redir=-1\r\nid=5084 addr=127.0.0.1:41478 laddr=127.0.0.1:6379 fd=23 name= age=87112 idle=345 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 argv-mem=0 obl=0 oll=0 omem=0 tot-mem=17020 events=r cmd=set user=default redir=-1\r\nid=557287 addr=127.0.0.1:58776 laddr=127.0.0.1:6379 fd=19 name= age=13163 idle=4 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 argv-mem=0 obl=0 oll=0 omem=0 tot-mem=17020 events=r cmd=set user=default redir=-1\r\nid=557918 addr=127.0.0.1:60130 laddr=127.0.0.1:6379 fd=18 name= age=1327 idle=118 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 argv-mem=0 obl=0 oll=0 omem=0 tot-mem=17020 events=r cmd=set user=default redir=-1\r\nid=557921 addr=127.0.0.1:60138 laddr=127.0.0.1:6379 fd=20 name= age=1327 idle=6 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 argv-mem=0 obl=0 oll=0 omem=0 tot-mem=17020 events=r cmd=set user=default redir=-1\r\nid=5 addr=127.0.0.1:58912 laddr=127.0.0.1:6379 fd=13 name= age=88280 idle=7 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 argv-mem=0 obl=0 oll=0 omem=0 tot-mem=17012 events=r cmd=exists user=default redir=-1\r\nid=557144 addr=127.0.0.1:58476 laddr=127.0.0.1:6379 fd=11 name= age=16144 idle=3 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 argv-mem=0 obl=0 oll=0 omem=0 tot-mem=17020 events=r cmd=set user=default redir=-1\r\nid=86951 addr=127.0.0.1:46098 laddr=127.0.0.1:6379 fd=17 name= age=61545 idle=1 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 argv-mem=0 obl=0 oll=0 omem=0 tot-mem=17020 events=r cmd=set user=default redir=-1\r\nid=6 addr=127.0.0.1:58914 laddr=127.0.0.1:6379 fd=14 name= age=88279 idle=1 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 argv-mem=0 obl=0 oll=0 omem=0 tot-mem=17020 events=r cmd=set user=default redir=-1\r\nid=7 addr=127.0.0.1:58916 laddr=127.0.0.1:6379 fd=15 name= age=88278 idle=11 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 argv-mem=0 obl=0 oll=0 omem=0 tot-mem=17020 events=r cmd=set user=default redir=-1\r\nid=557271 addr=127.0.0.1:58744 laddr=127.0.0.1:6379 fd=21 name= age=13341 idle=262 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 argv-mem=0 obl=0 oll=0 omem=0 tot-mem=17028 events=r cmd=lrem user=default redir=-1\r\n\r\n------ CURRENT CLIENT INFO ------\r\nid=7149 addr=127.0.0.1:45866 laddr=127.0.0.1:6379 fd=16 name= age=86662 idle=0 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=93 qbuf-free=32675 argv-mem=63 obl=0 oll=0 omem=0 tot-mem=49861 events=r cmd=zadd user=default redir=-1\r\nargv[0]: 'ZADD'\r\nargv[1]: 'peer_pre_tx'\r\nargv[2]: '2640'\r\nargv[3]: 'HoNY4MVsNFXlZCUZgUG/bgQMiZ51KP9gtJvvJ2eQb3g='\r\n42524:M 06 Sep 2023 14:57:31.063 # key 'peer_pre_tx' found in DB containing the following object:\r\n42524:M 06 Sep 2023 14:57:31.063 # Object type: 3\r\n42524:M 06 Sep 2023 14:57:31.063 # Object encoding: 7\r\n42524:M 06 Sep 2023 14:57:31.063 # Object refcount: 1\r\n\r\n------ MODULES INFO OUTPUT ------\r\n\r\n------ FAST MEMORY TEST ------\r\n42524:M 06 Sep 2023 14:57:31.063 # Bio thread for job type #0 terminated\r\n42524:M 06 Sep 2023 14:57:31.064 # Bio thread for job type #1 terminated\r\n42524:M 06 Sep 2023 14:57:31.064 # Bio thread for job type #2 terminated\r\n*** Preparing to test memory region 55ee96768000 (122880 bytes)\r\n*** Preparing to test memory region 55ee97d30000 (380928 bytes)\r\n*** Preparing to test memory region 7f15b621e000 (57344 bytes)\r\n*** Preparing to test memory region 7f15b6261000 (155648 bytes)\r\n*** Preparing to test memory region 7f15b62ab000 (425984 bytes)\r\n*** Preparing to test memory region 7f15b631c000 (1048576 bytes)\r\n*** Preparing to test memory region 7f15b6420000 (98304 bytes)\r\n*** Preparing to test memory region 7f15b6440000 (491520 bytes)\r\n*** Preparing to test memory region 7f15b64cb000 (32768 bytes)\r\n*** Preparing to test memory region 7f15b64f5000 (425984 bytes)\r\n*** Preparing to test memory region 7f15b656d000 (131072 bytes)\r\n*** Preparing to test memory region 7f15b6593000 (557056 bytes)\r\n*** Preparing to test memory region 7f15b6622000 (262144 bytes)\r\n*** Preparing to test memory region 7f15b6666000 (65536 bytes)\r\n*** Preparing to test memory region 7f15b6678000 (32768 bytes)\r\n*** Preparing to test memory region 7f15b6686000 (32768 bytes)\r\n*** Preparing to test memory region 7f15b6694000 (65536 bytes)\r\n*** Preparing to test memory region 7f15b66a7000 (98304 bytes)\r\n*** Preparing to test memory region 7f15b66cd000 (65536 bytes)\r\n*** Preparing to test memory region 7f15b66e6000 (32768 bytes)\r\n*** Preparing to test memory region 7f15b6702000 (65536 bytes)\r\n*** Preparing to test memory region 7f15b672f000 (16384 bytes)\r\n*** Preparing to test memory region 7f15b673c000 (16384 bytes)\r\n*** Preparing to test memory region 7f15b6744000 (16384 bytes)\r\n*** Preparing to test memory region 7f15b674e000 (16384 bytes)\r\n*** Preparing to test memory region 7f15b6756000 (65536 bytes)\r\n*** Preparing to test memory region 7f15b6778000 (638976 bytes)\r\n*** Preparing to test memory region 7f15b6817000 (65536 bytes)\r\n*** Preparing to test memory region 7f15b682d000 (90112 bytes)\r\n*** Preparing to test memory region 7f15b6844000 (90112 bytes)\r\n*** Preparing to test memory region 7f15b685c000 (53248 bytes)\r\n*** Preparing to test memory region 7f15b686c000 (32768 bytes)\r\n*** Preparing to test memory region 7f15b6876000 (69632 bytes)\r\n*** Preparing to test memory region 7f15b6892000 (32768 bytes)\r\n*** Preparing to test memory region 7f15b689d000 (32768 bytes)\r\n*** Preparing to test memory region 7f15b68aa000 (32768 bytes)\r\n*** Preparing to test memory region 7f15b68b3000 (16384 bytes)\r\n*** Preparing to test memory region 7f15b68b9000 (32768 bytes)\r\n*** Preparing to test memory region 7f15b68c2000 (36864 bytes)\r\n*** Preparing to test memory region 7f15b68cd000 (65536 bytes)\r\n*** Preparing to test memory region 7f15b68df000 (32768 bytes)\r\n*** Preparing to test memory region 7f15b68ea000 (151552 bytes)\r\n*** Preparing to test memory region 7f15b6912000 (167936 bytes)\r\n*** Preparing to test memory region 7f15b6940000 (90112 bytes)\r\n*** Preparing to test memory region 7f15b6957000 (16384 bytes)\r\n*** Preparing to test memory region 7f15b695d000 (32768 bytes)\r\n*** Preparing to test memory region 7f15b6968000 (36864 bytes)\r\n*** Preparing to test memory region 7f15b6973000 (36864 bytes)\r\n*** Preparing to test memory region 7f15b697e000 (32768 bytes)\r\n*** Preparing to test memory region 7f15b6989000 (364544 bytes)\r\n*** Preparing to test memory region 7f15b69e5000 (32768 bytes)\r\n*** Preparing to test memory region 7f15b69ef000 (53248 bytes)\r\n*** Preparing to test memory region 7f15b69fe000 (266240 bytes)\r\n*** Preparing to test memory region 7f15b6a4f000 (90112 bytes)\r\n*** Preparing to test memory region 7f15b6a67000 (36864 bytes)\r\n*** Preparing to test memory region 7f15b6a72000 (36864 bytes)\r\n*** Preparing to test memory region 7f15b6a7e000 (32768 bytes)\r\n*** Preparing to test memory region 7f15b6a88000 (36864 bytes)\r\n*** Preparing to test memory region 7f15b6a93000 (380928 bytes)\r\n*** Preparing to test memory region 7f15b6af1000 (40960 bytes)\r\n*** Preparing to test memory region 7f15b6afe000 (69632 bytes)\r\n*** Preparing to test memory region 7f15b6b11000 (102400 bytes)\r\n*** Preparing to test memory region 7f15b6b37000 (16384 bytes)\r\n*** Preparing to test memory region 7f15b6b3f000 (94208 bytes)\r\n*** Preparing to test memory region 7f15b6b59000 (32768 bytes)\r\n*** Preparing to test memory region 7f15b6b63000 (36864 bytes)\r\n*** Preparing to test memory region 7f15b6b6f000 (106496 bytes)\r\n*** Preparing to test memory region 7f15b6b8c000 (32768 bytes)\r\n*** Preparing to test memory region 7f15b6b97000 (32768 bytes)\r\n*** Preparing to test memory region 7f15b6ba0000 (16384 bytes)\r\n*** Preparing to test memory region 7f15b6ba7000 (356352 bytes)\r\n*** Preparing to test memory region 7f15b6c07000 (1835008 bytes)\r\n*** Preparing to test memory region 7f15b6dc8000 (1159168 bytes)\r\n*** Preparing to test memory region 7f15b6eec000 (12288 bytes)\r\n*** Preparing to test memory region 7f15b6ef5000 (36864 bytes)\r\n*** Preparing to test memory region 7f15b6f00000 (16384 bytes)\r\n*** Preparing to test memory region 7f15b7b0c000 (1097728 bytes)\r\n*** Preparing to test memory region 7f15b7cae000 (12288 bytes)\r\n.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O\r\nFast memory test PASSED, however your memory can still be broken. Please run a memory test for several hours if possible.\r\n\r\n=== REDIS BUG REPORT END. Make sure to include from START to END. ===",
  "state": "open",
  "created_at": "2023-09-06T08:53:08Z",
  "updated_at": "2023-09-14T10:00:14Z",
  "closed_at": null,
  "labels": [],
  "comments_data": [
    {
      "id": 1709501665,
      "user": "sundb",
      "created_at": "2023-09-07T05:32:45Z",
      "body": "@hjim1021 What is the meaning of `through hiredis`?"
    },
    {
      "id": 1709521262,
      "user": "hjim1021",
      "created_at": "2023-09-07T05:56:32Z",
      "body": "@sundb This occurs when executing redisCommand() below using the hiredis library.\r\n\r\n#include <hiredis.h>\r\n...\r\nreply = redisCommand(c, \"ZADD peer_pre_tx %lu %s\", pre_tx_bytes, tmp);\r\nif (reply)\r\n\tfreeReplyObject(reply);\r\n\r\n\r\n------ CURRENT CLIENT INFO ------\r\nid=7149 addr=127.0.0.1:45866 laddr=127.0.0.1:6379 fd=16 name= age=86662 idle=0 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=93 qbuf-free=32675 argv-mem=63 obl=0 oll=0 omem=0 tot-mem=49861 events=r cmd=zadd user=default redir=-1\r\nargv[0]: 'ZADD'\r\nargv[1]: 'peer_pre_tx'\r\nargv[2]: '2640'\r\nargv[3]: 'HoNY4MVsNFXlZCUZgUG/bgQMiZ51KP9gtJvvJ2eQb3g='\r\n42524:M 06 Sep 2023 14:57:31.063 # key 'peer_pre_tx' found in DB containing the following object:\r\n42524:M 06 Sep 2023 14:57:31.063 # Object type: 3\r\n42524:M 06 Sep 2023 14:57:31.063 # Object encoding: 7\r\n42524:M 06 Sep 2023 14:57:31.063 # Object refcount: 1\r\n"
    },
    {
      "id": 1710934884,
      "user": "hjim1021",
      "created_at": "2023-09-08T00:54:46Z",
      "body": "This seems to happen when adding more than 2000 members to one redis key using the ZADD command.\r\n\r\n=== REDIS BUG REPORT START: Cut & paste starting from here ===\r\n42524:M 06 Sep 2023 14:57:31.062 # === ASSERTION FAILED ===\r\n42524:M 06 Sep 2023 14:57:31.062 # ==> t_zset.c:280 'x && curscore == x->score && sdscmp(x->ele,ele) == 0' is not true\r\n\r\n"
    },
    {
      "id": 1710964772,
      "user": "sundb",
      "created_at": "2023-09-08T01:46:27Z",
      "body": "@hjim1021Thanks for the info, I'll try to see if I can reproduce it."
    },
    {
      "id": 1719031361,
      "user": "sundb",
      "created_at": "2023-09-14T08:50:46Z",
      "body": "@hjim1021 Hi, did you enable defragment?\r\nI still can't reproduce it locally, can you provide some useful information, like special configurations or environment."
    },
    {
      "id": 1719148764,
      "user": "hjim1021",
      "created_at": "2023-09-14T10:00:13Z",
      "body": "@sundb Hi, \r\nOS is Alpine Linux 3.15.10.\r\nI used it after installing it with \"apk add --no-cache redis\"\r\nredis configurations used the redis.conf file below.\r\n\r\nbind * -::*\r\nprotected-mode yes\r\nport 6379\r\ntcp-backlog 511\r\nunixsocket /run/redis/redis.sock\r\nunixsocketperm 770\r\ntimeout 0\r\ntcp-keepalive 300\r\nloglevel notice\r\nlogfile /mnt/log/redis/redis.log\r\ndatabases 16\r\nalways-show-logo no\r\nset-proc-title yes\r\nproc-title-template \"{title} {listen-addr} {server-mode}\"\r\nstop-writes-on-bgsave-error yes\r\nrdbcompression yes\r\nrdbchecksum yes\r\ndbfilename dump.rdb\r\nrdb-del-sync-files no\r\ndir /mnt/log/redis\r\n\r\nreplica-serve-stale-data yes\r\nreplica-read-only yes\r\nrepl-diskless-sync no\r\nrepl-diskless-sync-delay 5\r\nrepl-diskless-load disabled\r\nrepl-disable-tcp-nodelay no\r\nreplica-priority 100\r\nacllog-max-len 128\r\nlazyfree-lazy-eviction no\r\nlazyfree-lazy-expire no\r\nlazyfree-lazy-server-del no\r\nreplica-lazy-flush no\r\nlazyfree-lazy-user-del no\r\nlazyfree-lazy-user-flush no\r\noom-score-adj no\r\noom-score-adj-values 0 200 800\r\ndisable-thp yes\r\nappendonly yes\r\nappendfilename \"appendonly.aof\"\r\nappendfsync everysec\r\nno-appendfsync-on-rewrite no\r\nauto-aof-rewrite-percentage 100\r\nauto-aof-rewrite-min-size 64mb\r\naof-load-truncated yes\r\naof-use-rdb-preamble yes\r\nlua-time-limit 5000\r\nslowlog-log-slower-than 10000\r\nslowlog-max-len 128\r\nlatency-monitor-threshold 0\r\nnotify-keyspace-events \"\"\r\nhash-max-ziplist-entries 512\r\nhash-max-ziplist-value 64\r\nlist-max-ziplist-size -2\r\nlist-compress-depth 0\r\nset-max-intset-entries 512\r\nzset-max-ziplist-entries 128\r\nzset-max-ziplist-value 64\r\nhll-sparse-max-bytes 3000\r\nstream-node-max-bytes 4096\r\nstream-node-max-entries 100\r\nactiverehashing yes\r\nclient-output-buffer-limit normal 0 0 0\r\nclient-output-buffer-limit replica 256mb 64mb 60\r\nclient-output-buffer-limit pubsub 32mb 8mb 60\r\nhz 10\r\ndynamic-hz yes\r\naof-rewrite-incremental-fsync yes\r\nrdb-save-incremental-fsync yes\r\njemalloc-bg-thread yes\r\n"
    }
  ]
}