{
  "issue_number": 8656.0,
  "title": "[BUG] Redis-cli INFO says its running in standalone mode even though it is running with Sentinel (6.0.10)",
  "body": "**Describe the bug**\r\nRedis Version 6.0.10, running in Docker.\r\n\r\nI'm running 3 redis servers in Sentinel Mode but the output of `info` in the `redis-cli` says `redis_mode:standalone`. The output of `info` from the `sentinel cli` says `redis_mode:sentinel`. I'm pretty certain that redis and sentinel are setup correctly (see below), just the output of the cli might not be correct.\r\n\r\n**To reproduce**\r\n1. Run multiple redis servers with Sentinel enabled\r\n2. go to the redis cli and get `info`\r\n3. observe `redis_mode:standalone` even though the master server has multiple replicas connected.\r\n\r\n**Expected behavior**\r\n\r\nThe sentinel cli and redis cli report the same `redis_mode`.\r\n\r\n\r\n**Additional information**\r\n\r\nI haven't noticed anything functionally wrong with the redis cluster, just the output of the CLI looks off. I pasted the output of `info` from the redis cli and sentinel cli and you can see that the master has two connected replicas and sentinel agrees with that.\r\n\r\nRedis-cli info \r\n```\r\n127.0.0.1:6379> info\r\n# Server\r\nredis_version:6.0.10\r\nredis_git_sha1:00000000\r\nredis_git_dirty:0\r\nredis_build_id:66898bb7acd47e81\r\nredis_mode:standalone\r\nos:Linux 4.19.76-linuxkit x86_64\r\narch_bits:64\r\nmultiplexing_api:epoll\r\natomicvar_api:atomic-builtin\r\ngcc_version:8.3.0\r\nprocess_id:6\r\nrun_id:0e0498f66916239d461d940dd4f3b82fbb2b2c97\r\ntcp_port:6379\r\nuptime_in_seconds:9416\r\nuptime_in_days:0\r\nhz:10\r\nconfigured_hz:10\r\nlru_clock:5233629\r\nexecutable:/usr/local/redis/data/redis-server\r\nconfig_file:/usr/local/redis/conf/redis.conf\r\nio_threads_active:0\r\n\r\n# Clients\r\nconnected_clients:7\r\nclient_recent_max_input_buffer:8\r\nclient_recent_max_output_buffer:0\r\nblocked_clients:0\r\ntracking_clients:0\r\nclients_in_timeout_table:0\r\n\r\n# Memory\r\nused_memory:2084616\r\nused_memory_human:1.99M\r\nused_memory_rss:8540160\r\nused_memory_rss_human:8.14M\r\nused_memory_peak:2267520\r\nused_memory_peak_human:2.16M\r\nused_memory_peak_perc:91.93%\r\nused_memory_overhead:2037152\r\nused_memory_startup:804024\r\nused_memory_dataset:47464\r\nused_memory_dataset_perc:3.71%\r\nallocator_allocated:2155920\r\nallocator_active:2445312\r\nallocator_resident:4980736\r\ntotal_system_memory:8353665024\r\ntotal_system_memory_human:7.78G\r\nused_memory_lua:37888\r\nused_memory_lua_human:37.00K\r\nused_memory_scripts:0\r\nused_memory_scripts_human:0B\r\nnumber_of_cached_scripts:0\r\nmaxmemory:0\r\nmaxmemory_human:0B\r\nmaxmemory_policy:noeviction\r\nallocator_frag_ratio:1.13\r\nallocator_frag_bytes:289392\r\nallocator_rss_ratio:2.04\r\nallocator_rss_bytes:2535424\r\nrss_overhead_ratio:1.71\r\nrss_overhead_bytes:3559424\r\nmem_fragmentation_ratio:4.10\r\nmem_fragmentation_bytes:6457096\r\nmem_not_counted_for_evict:0\r\nmem_replication_backlog:1048576\r\nmem_clients_slaves:41024\r\nmem_clients_normal:143520\r\nmem_aof_buffer:8\r\nmem_allocator:jemalloc-5.1.0\r\nactive_defrag_running:0\r\nlazyfree_pending_objects:0\r\n\r\n# Persistence\r\nloading:0\r\nrdb_changes_since_last_save:0\r\nrdb_bgsave_in_progress:0\r\nrdb_last_save_time:1615845008\r\nrdb_last_bgsave_status:ok\r\nrdb_last_bgsave_time_sec:0\r\nrdb_current_bgsave_time_sec:-1\r\nrdb_last_cow_size:389120\r\naof_enabled:1\r\naof_rewrite_in_progress:0\r\naof_rewrite_scheduled:0\r\naof_last_rewrite_time_sec:-1\r\naof_current_rewrite_time_sec:-1\r\naof_last_bgrewrite_status:ok\r\naof_last_write_status:ok\r\naof_last_cow_size:0\r\nmodule_fork_in_progress:0\r\nmodule_fork_last_cow_size:0\r\naof_current_size:93\r\naof_base_size:93\r\naof_pending_rewrite:0\r\naof_buffer_length:0\r\naof_rewrite_buffer_length:0\r\naof_pending_bio_fsync:0\r\naof_delayed_fsync:0\r\n\r\n# Stats\r\ntotal_connections_received:326\r\ntotal_commands_processed:55041\r\ninstantaneous_ops_per_sec:6\r\ntotal_net_input_bytes:2658613\r\ntotal_net_output_bytes:20211010\r\ninstantaneous_input_kbps:0.34\r\ninstantaneous_output_kbps:1.29\r\nrejected_connections:0\r\nsync_full:3\r\nsync_partial_ok:0\r\nsync_partial_err:0\r\nexpired_keys:0\r\nexpired_stale_perc:0.00\r\nexpired_time_cap_reached_count:0\r\nexpire_cycle_cpu_milliseconds:176\r\nevicted_keys:0\r\nkeyspace_hits:0\r\nkeyspace_misses:0\r\npubsub_channels:1\r\npubsub_patterns:0\r\nlatest_fork_usec:1011\r\nmigrate_cached_sockets:0\r\nslave_expires_tracked_keys:0\r\nactive_defrag_hits:0\r\nactive_defrag_misses:0\r\nactive_defrag_key_hits:0\r\nactive_defrag_key_misses:0\r\ntracking_total_keys:0\r\ntracking_total_items:0\r\ntracking_total_prefixes:0\r\nunexpected_error_replies:0\r\ntotal_reads_processed:54265\r\ntotal_writes_processed:92843\r\nio_threaded_reads_processed:0\r\nio_threaded_writes_processed:0\r\n\r\n# Replication\r\nrole:master\r\nconnected_slaves:2\r\nslave0:ip=10.20.20.33,port=6379,state=online,offset=1653163,lag=0\r\nslave1:ip=10.20.20.31,port=6379,state=online,offset=1653163,lag=0\r\nmaster_replid:a0cd1e2702d24f91d11b4df95e29fccd50d4d1fc\r\nmaster_replid2:0000000000000000000000000000000000000000\r\nmaster_repl_offset:1653300\r\nsecond_repl_offset:-1\r\nrepl_backlog_active:1\r\nrepl_backlog_size:1048576\r\nrepl_backlog_first_byte_offset:604725\r\nrepl_backlog_histlen:1048576\r\n\r\n# CPU\r\nused_cpu_sys:14.866033\r\nused_cpu_user:7.870329\r\nused_cpu_sys_children:0.020008\r\nused_cpu_user_children:0.005998\r\n\r\n# Modules\r\n\r\n# Cluster\r\ncluster_enabled:0\r\n\r\n# Keyspace\r\n127.0.0.1:6379>\r\n```\r\n\r\n\r\nSentinel cli info\r\n\r\n```\r\n127.0.0.1:26379> info\r\n# Server\r\nredis_version:6.0.10\r\nredis_git_sha1:00000000\r\nredis_git_dirty:0\r\nredis_build_id:66898bb7acd47e81\r\nredis_mode:sentinel\r\nos:Linux 4.19.76-linuxkit x86_64\r\narch_bits:64\r\nmultiplexing_api:epoll\r\natomicvar_api:atomic-builtin\r\ngcc_version:8.3.0\r\nprocess_id:20\r\nrun_id:8901c37ab65aa6d6bb90079d440f4bd0925210ff\r\ntcp_port:26379\r\nuptime_in_seconds:11187\r\nuptime_in_days:0\r\nhz:15\r\nconfigured_hz:10\r\nlru_clock:5235400\r\nexecutable:/usr/local/redis/data/redis-sentinel\r\nconfig_file:/usr/local/redis/conf/sentinel.conf\r\nio_threads_active:0\r\n\r\n# Clients\r\nconnected_clients:3\r\nclient_recent_max_input_buffer:8\r\nclient_recent_max_output_buffer:0\r\nblocked_clients:0\r\ntracking_clients:0\r\nclients_in_timeout_table:0\r\n\r\n# CPU\r\nused_cpu_sys:24.585108\r\nused_cpu_user:14.533431\r\nused_cpu_sys_children:0.000000\r\nused_cpu_user_children:0.000000\r\n\r\n# Stats\r\ntotal_connections_received:17\r\ntotal_commands_processed:26986\r\ninstantaneous_ops_per_sec:2\r\ntotal_net_input_bytes:1497879\r\ntotal_net_output_bytes:164541\r\ninstantaneous_input_kbps:0.17\r\ninstantaneous_output_kbps:0.02\r\nrejected_connections:0\r\nsync_full:0\r\nsync_partial_ok:0\r\nsync_partial_err:0\r\nexpired_keys:0\r\nexpired_stale_perc:0.00\r\nexpired_time_cap_reached_count:0\r\nexpire_cycle_cpu_milliseconds:234\r\nevicted_keys:0\r\nkeyspace_hits:0\r\nkeyspace_misses:0\r\npubsub_channels:0\r\npubsub_patterns:0\r\nlatest_fork_usec:0\r\nmigrate_cached_sockets:0\r\nslave_expires_tracked_keys:0\r\nactive_defrag_hits:0\r\nactive_defrag_misses:0\r\nactive_defrag_key_hits:0\r\nactive_defrag_key_misses:0\r\ntracking_total_keys:0\r\ntracking_total_items:0\r\ntracking_total_prefixes:0\r\nunexpected_error_replies:0\r\ntotal_reads_processed:26321\r\ntotal_writes_processed:26306\r\nio_threaded_reads_processed:0\r\nio_threaded_writes_processed:0\r\n\r\n# Sentinel\r\nsentinel_masters:1\r\nsentinel_tilt:0\r\nsentinel_running_scripts:0\r\nsentinel_scripts_queue_length:0\r\nsentinel_simulate_failure_flags:0\r\nmaster0:name=mymaster,status=ok,address=10.20.20.32:6379,slaves=2,sentinels=3```",
  "state": "closed",
  "created_at": "2021-03-15T23:11:02Z",
  "updated_at": "2021-03-21T13:41:35Z",
  "closed_at": "2021-03-21T13:41:35Z",
  "labels": [],
  "comments_data": [
    {
      "id": 799874010,
      "user": "itamarhaber",
      "created_at": "2021-03-16T01:29:19Z",
      "body": "Hello @hanley-patrick \r\n\r\nThis isn't a bug, although maybe it is an inaccurate choice of word for describing the mode. \"Standalone\" means, in this project's context, the non-clustered (sharded) mode of operation. A standalone server can have zero, one or more replicas and it will still be referred to as standalone."
    },
    {
      "id": 803582362,
      "user": "itamarhaber",
      "created_at": "2021-03-21T13:41:35Z",
      "body": "Closing this issue - please feel free to reopen if needed."
    }
  ]
}