{
  "issue_number": 11430.0,
  "title": "[CRASH]  Guru Meditation: Unknown list encoding type #object.c:291",
  "body": "**Crash report**\r\n\r\nPaste the complete crash log between the quotes below. Please include a few lines from the log preceding the crash report to provide some context.\r\n\r\n```\r\n=== REDIS BUG REPORT START: Cut & paste starting from here ===\r\n22:S 25 Oct 2022 04:51:19.149 # ------------------------------------------------\r\n22:S 25 Oct 2022 04:51:19.150 # !!! Software Failure. Press left mouse button to continue\r\n22:S 25 Oct 2022 04:51:19.150 # Guru Meditation: Unknown list encoding type #object.c:291\r\n22:S 25 Oct 2022 04:51:19.150 # (forcing SIGSEGV in order to print the stack trace)\r\n22:S 25 Oct 2022 04:51:19.150 # ------------------------------------------------\r\n22:S 25 Oct 2022 04:51:19.150 # Redis 6.0.9 crashed by signal: 11, si_code: 1\r\n22:S 25 Oct 2022 04:51:19.150 # Crashed running the instruction at: 0x4762c3\r\n22:S 25 Oct 2022 04:51:19.150 # Accessing address: 0xffffffffffffffff\r\n22:S 25 Oct 2022 04:51:19.150 # Failed assertion: <no assertion failed> (<no file>:0)\r\n\r\n------ STACK TRACE ------\r\nEIP:\r\n/opt/app/redis/sbin/redis-server *:6379(_serverPanic+0x113)[0x4762c3]\r\n\r\nBacktrace:\r\n/opt/app/redis/sbin/redis-server *:6379(logStackTrace+0x2e)[0x4785fe]\r\n/opt/app/redis/sbin/redis-server *:6379(sigsegvHandler+0xb8)[0x478cd8]\r\n/lib64/libpthread.so.0(+0xf100)[0x7fa911452100]\r\n/opt/app/redis/sbin/redis-server *:6379(_serverPanic+0x113)[0x4762c3]\r\n/opt/app/redis/sbin/redis-server *:6379(freeListObject+0x2a)[0x44a87a]\r\n/opt/app/redis/sbin/redis-server *:6379(decrRefCount+0x8d)[0x44aa7d]\r\n/opt/app/redis/sbin/redis-server *:6379(lazyfreeFreeObjectFromBioThread+0x9)[0x4a0cd9]\r\n/opt/app/redis/sbin/redis-server *:6379(bioProcessBackgroundJobs+0x110)[0x48baa0]\r\n/lib64/libpthread.so.0(+0x7dc5)[0x7fa91144adc5]\r\n/lib64/libc.so.6(clone+0x6d)[0x7fa911177ced]\r\n\r\n------ INFO OUTPUT ------\r\n# Server\r\nredis_version:6.0.9\r\nxredis_version:2.0.1\r\nredis_git_sha1:2beb363c\r\nredis_git_dirty:1\r\nredis_build_id:dc09fce1abc17a4d\r\nredis_mode:standalone\r\nos:Linux 4.19.118-2.el7.centos.x86_64 x86_64\r\narch_bits:64\r\nmultiplexing_api:epoll\r\natomicvar_api:atomic-builtin\r\ngcc_version:9.3.1\r\nprocess_id:22\r\nrun_id:337027ff5d6d1bc399a57c7f60f3d174816c4790\r\ntcp_port:6379\r\nuptime_in_seconds:668048\r\nuptime_in_days:7\r\nhz:100\r\nconfigured_hz:100\r\nlru_clock:5700295\r\nexecutable:/opt/app/redis/sbin/redis-server\r\nconfig_file:/opt/app/redis/data/etc/redis.conf\r\nio_threads_active:0\r\n\r\n# Clients\r\nconnected_clients:14\r\nclient_recent_max_input_buffer:163840\r\nclient_recent_max_output_buffer:40984\r\nblocked_clients:0\r\ntracking_clients:0\r\nclients_in_timeout_table:0\r\n\r\n# Memory\r\nused_memory:2874135408\r\nused_memory_human:2.68G\r\nused_memory_rss:3013541888\r\nused_memory_rss_human:2.81G\r\nused_memory_peak:2886913816\r\nused_memory_peak_human:2.69G\r\nused_memory_peak_perc:99.56%\r\nused_memory_overhead:952635648\r\nused_memory_startup:1343240\r\nused_memory_dataset:1921499760\r\nused_memory_dataset_perc:66.89%\r\nallocator_allocated:2874403640\r\nallocator_active:2901512192\r\nallocator_resident:2935455744\r\ntotal_system_memory:133065682944\r\ntotal_system_memory_human:123.93G\r\nused_memory_lua:37888\r\nused_memory_lua_human:37.00K\r\nused_memory_scripts:0\r\nused_memory_scripts_human:0B\r\nnumber_of_cached_scripts:0\r\nmaxmemory:7516192768\r\nmaxmemory_human:7.00G\r\nmaxmemory_policy:volatile-lru\r\nallocator_frag_ratio:1.01\r\nallocator_frag_bytes:27108552\r\nallocator_rss_ratio:1.01\r\nallocator_rss_bytes:33943552\r\nrss_overhead_ratio:1.03\r\nrss_overhead_bytes:78086144\r\nmem_fragmentation_ratio:1.05\r\nmem_fragmentation_bytes:139367720\r\nmem_not_counted_for_evict:0\r\nmem_replication_backlog:536870912\r\nmem_clients_slaves:0\r\nmem_clients_normal:287024\r\nmem_aof_buffer:0\r\nmem_allocator:jemalloc-5.1.0\r\nactive_defrag_running:0\r\nlazyfree_pending_objects:1\r\n\r\n# Persistence\r\nloading:0\r\nrdb_changes_since_last_save:554808731\r\nrdb_bgsave_in_progress:0\r\nrdb_last_save_time:1665976631\r\nrdb_last_bgsave_status:ok\r\nrdb_last_bgsave_time_sec:-1\r\nrdb_current_bgsave_time_sec:-1\r\nrdb_last_cow_size:0\r\naof_enabled:0\r\naof_rewrite_in_progress:0\r\naof_rewrite_scheduled:0\r\naof_last_rewrite_time_sec:-1\r\naof_current_rewrite_time_sec:-1\r\naof_last_bgrewrite_status:ok\r\naof_last_write_status:ok\r\naof_last_cow_size:0\r\nmodule_fork_in_progress:0\r\nmodule_fork_last_cow_size:0\r\n\r\n# Stats\r\ntotal_connections_received:72832\r\ntotal_commands_processed:555716728\r\ninstantaneous_ops_per_sec:1185\r\ntotal_net_input_bytes:451171494675\r\ntotal_net_output_bytes:102693131215\r\ninstantaneous_input_kbps:852.23\r\ninstantaneous_output_kbps:112.63\r\nrejected_connections:0\r\nsync_full:0\r\nsync_partial_ok:0\r\nsync_partial_err:0\r\nexpired_keys:0\r\nexpired_stale_perc:0.00\r\nexpired_time_cap_reached_count:0\r\nexpire_cycle_cpu_milliseconds:0\r\nevicted_keys:0\r\nkeyspace_hits:47247242\r\nkeyspace_misses:1496691\r\npubsub_channels:4\r\npubsub_patterns:0\r\nlatest_fork_usec:0\r\nmigrate_cached_sockets:0\r\nslave_expires_tracked_keys:0\r\nactive_defrag_hits:0\r\nactive_defrag_misses:0\r\nactive_defrag_key_hits:0\r\nactive_defrag_key_misses:0\r\ntracking_total_keys:0\r\ntracking_total_items:0\r\ntracking_total_prefixes:0\r\nunexpected_error_replies:0\r\ntotal_reads_processed:311137150\r\ntotal_writes_processed:37810479\r\nio_threaded_reads_processed:0\r\nio_threaded_writes_processed:0\r\n\r\n# Replication\r\nrole:slave\r\nmaster_host:10.29.236.146\r\nmaster_port:6402\r\nmaster_link_status:up\r\nmaster_last_io_seconds_ago:0\r\nmaster_sync_in_progress:0\r\nslave_repl_offset:45285087364450\r\nslave_priority:100\r\nslave_read_only:1\r\nconnected_slaves:0\r\nmaster_replid:3557deddd2c8fd93674904e139bd84be3efb69f5\r\nmaster_replid2:0000000000000000000000000000000000000000\r\nmaster_repl_offset:45285087364450\r\nsecond_repl_offset:-1\r\nrepl_backlog_active:1\r\nrepl_backlog_size:536870912\r\nrepl_backlog_first_byte_offset:45284550493539\r\nrepl_backlog_histlen:536870912\r\n\r\n# CPU\r\nused_cpu_sys:5077.947617\r\nused_cpu_user:4452.566178\r\nused_cpu_sys_children:0.000000\r\nused_cpu_user_children:0.000000\r\n\r\n# Modules\r\n\r\n# Commandstats\r\ncmdstat_role:calls=133598,usec=304191,usec_per_call=2.28\r\ncmdstat_mget:calls=32925902,usec=135727952,usec_per_call=4.12\r\ncmdstat_slowlog:calls=16706,usec=23925,usec_per_call=1.43\r\ncmdstat_xslaveof:calls=9,usec=555,usec_per_call=61.67\r\ncmdstat_slaveof:calls=1,usec=39,usec_per_call=39.00\r\ncmdstat_info:calls=61850,usec=1813766,usec_per_call=29.33\r\ncmdstat_select:calls=201675,usec=123977,usec_per_call=0.61\r\ncmdstat_publish:calls=2631734,usec=8490037,usec_per_call=3.23\r\ncmdstat_expire:calls=267331024,usec=197335684,usec_per_call=0.74\r\ncmdstat_subscribe:calls=128,usec=457,usec_per_call=3.57\r\ncmdstat_dbsize:calls=11224,usec=6025,usec_per_call=0.54\r\ncmdstat_unlink:calls=24129789,usec=67756235,usec_per_call=2.81\r\ncmdstat_config:calls=4950,usec=172742,usec_per_call=34.90\r\ncmdstat_set:calls=24273068,usec=52272364,usec_per_call=2.15\r\ncmdstat_client:calls=8891,usec=131413,usec_per_call=14.78\r\ncmdstat_ping:calls=1150346,usec=504495,usec_per_call=0.44\r\ncmdstat_command:calls=44536,usec=25062271,usec_per_call=562.74\r\ncmdstat_mset:calls=202791297,usec=592935740,usec_per_call=2.92\r\n\r\n# Cluster\r\ncluster_enabled:0\r\n\r\n# Keyspace\r\ndb0:keys=4374511,expires=4372346,avg_ttl=0\r\n\r\n------ CLIENT LIST OUTPUT ------\r\nid=12943 addr=10.29.193.61:39890 fd=14 name= age=543807 idle=1 flags=P db=0 sub=1 psub=0 multi=-1 qbuf=0 qbuf-free=0 argv-mem=0 obl=0 oll=0 omem=0 tot-mem=20504 events=r cmd=subscribe user=default\r\nid=72831 addr=10.31.246.49:54932 fd=12 name=credis age=52 idle=0 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 argv-mem=0 obl=0 oll=0 omem=0 tot-mem=20504 events=r cmd=mget user=default\r\nid=12958 addr=10.29.193.62:36682 fd=13 name= age=543680 idle=0 flags=P db=0 sub=1 psub=0 multi=-1 qbuf=0 qbuf-free=0 argv-mem=0 obl=0 oll=0 omem=0 tot-mem=20504 events=r cmd=subscribe user=default\r\nid=12955 addr=10.29.193.61:41156 fd=10 name= age=543727 idle=2 flags=P db=0 sub=1 psub=0 multi=-1 qbuf=0 qbuf-free=0 argv-mem=0 obl=0 oll=0 omem=0 tot-mem=20504 events=r cmd=subscribe user=default\r\nid=72833 addr=10.31.245.15:44324 fd=21 name=credis age=28 idle=0 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 argv-mem=0 obl=0 oll=0 omem=0 tot-mem=20504 events=r cmd=mget user=default\r\nid=72725 addr=10.31.244.79:40796 fd=8 name=credis age=980 idle=0 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 argv-mem=0 obl=0 oll=0 omem=0 tot-mem=20512 events=r cmd=mget user=default\r\nid=21303 addr=10.29.193.62:59710 fd=11 name= age=465565 idle=1 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 argv-mem=0 obl=0 oll=0 omem=0 tot-mem=20496 events=r cmd=ping user=default\r\nid=17334 addr=10.29.231.228:46358 fd=19 name= age=502374 idle=2 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 argv-mem=0 obl=0 oll=0 omem=0 tot-mem=20496 events=r cmd=role user=default\r\nid=26 addr=10.29.236.146:6402 fd=9 name= age=667994 idle=0 flags=M db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=32768 argv-mem=0 obl=0 oll=0 omem=0 tot-mem=61488 events=r cmd=set user=(superuser)\r\nid=21208 addr=10.29.193.62:58948 fd=20 name= age=466446 idle=1 flags=P db=0 sub=1 psub=0 multi=-1 qbuf=0 qbuf-free=0 argv-mem=0 obl=0 oll=0 omem=0 tot-mem=20504 events=r cmd=subscribe user=default\r\nid=72805 addr=10.31.246.49:35134 fd=17 name=credis age=302 idle=8 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 argv-mem=0 obl=0 oll=0 omem=0 tot-mem=20496 events=r cmd=ping user=default\r\nid=36314 addr=10.29.193.62:37802 fd=15 name= age=329634 idle=1 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 argv-mem=0 obl=0 oll=0 omem=0 tot-mem=20496 events=r cmd=ping user=default\r\nid=21274 addr=10.29.193.62:59394 fd=18 name= age=465826 idle=1 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 argv-mem=0 obl=0 oll=0 omem=0 tot-mem=20496 events=r cmd=ping user=default\r\nid=72799 addr=10.31.245.15:52400 fd=16 name=credis age=355 idle=12 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 argv-mem=0 obl=0 oll=0 omem=0 tot-mem=20496 events=r cmd=ping user=default\r\n\r\n------ REGISTERS ------\r\n22:S 25 Oct 2022 04:51:19.152 # \r\nRAX:0000000000000000 RBX:0000000000000123\r\nRCX:00007fa8140008b0 RDX:fffffffffffff000\r\nRDI:0000000000020000 RSI:00007fa8140008b0\r\nRBP:00007fa895a94f90 RSP:00007fa90f7fb400\r\nR8 :0000000000020751 R9 :00007fa90f7fd700\r\nR10:0000000000000030 R11:0000000000000206\r\nR12:000000000055b6ca R13:00000000007c7160\r\nR14:00000000007c70c0 R15:00007fa8c3009328\r\nRIP:00000000004762c3 EFL:0000000000010206\r\nCSGSFS:002b000000000033\r\n22:S 25 Oct 2022 04:51:19.152 # (00007fa90f7fb40f) -> 0000000000000000\r\n22:S 25 Oct 2022 04:51:19.152 # (00007fa90f7fb40e) -> 0000000000000000\r\n22:S 25 Oct 2022 04:51:19.152 # (00007fa90f7fb40d) -> 0000000000000000\r\n22:S 25 Oct 2022 04:51:19.152 # (00007fa90f7fb40c) -> 0000000000000000\r\n22:S 25 Oct 2022 04:51:19.152 # (00007fa90f7fb40b) -> 0000000000000000\r\n22:S 25 Oct 2022 04:51:19.152 # (00007fa90f7fb40a) -> 0000000000000000\r\n22:S 25 Oct 2022 04:51:19.152 # (00007fa90f7fb409) -> 0000000000000000\r\n22:S 25 Oct 2022 04:51:19.152 # (00007fa90f7fb408) -> 0000000000000000\r\n22:S 25 Oct 2022 04:51:19.152 # (00007fa90f7fb407) -> 0000000000006570\r\n22:S 25 Oct 2022 04:51:19.152 # (00007fa90f7fb406) -> 797420676e69646f\r\n22:S 25 Oct 2022 04:51:19.152 # (00007fa90f7fb405) -> 636e65207473696c\r\n22:S 25 Oct 2022 04:51:19.152 # (00007fa90f7fb404) -> 206e776f6e6b6e55\r\n22:S 25 Oct 2022 04:51:19.152 # (00007fa90f7fb403) -> 00007fa90f7fb520\r\n22:S 25 Oct 2022 04:51:19.152 # (00007fa90f7fb402) -> 00007fa90f7fb5f0\r\n22:S 25 Oct 2022 04:51:19.152 # (00007fa90f7fb401) -> 0000003000000018\r\n22:S 25 Oct 2022 04:51:19.152 # (00007fa90f7fb400) -> 0000000000000000\r\n\r\n------ MODULES INFO OUTPUT ------\r\n\r\n------ FAST MEMORY TEST ------\r\n22:S 25 Oct 2022 04:51:19.152 # main thread terminated\r\n22:S 25 Oct 2022 04:51:19.152 # Bio thread for job type #0 terminated\r\n22:S 25 Oct 2022 04:51:19.152 # Bio thread for job type #1 terminated\r\n\r\nFast memory test PASSED, however your memory can still be broken. Please run a memory test for several hours if possible.\r\n\r\n------ DUMPING CODE AROUND EIP ------\r\nSymbol: _serverPanic (base: 0x4761b0)\r\nModule: /opt/app/redis/sbin/redis-server *:6379 (base 0x400000)\r\n$ xxd -r -p /tmp/dump.hex /tmp/dump.bin\r\n$ objdump --adjust-vma=0x4761b0 -D -b binary -m i386:x86-64 /tmp/dump.bin\r\n------\r\n22:S 25 Oct 2022 04:51:19.153 # dump of function (hexdump of 403 bytes):\r\n41544989fc5389f34881ecd801000048898c24380100004c898424400100004c898c244801000084c074400f298424500100000f298c24600100000f299424700100000f299c24800100000f29a424900100000f29ac24a00100000f29b424b00100000f29bc24c0010000488d4c2408be00010000488d8424f0010000c7442408180000004889442410488d7c2420488d842420010000c744240c300000004889442418e8073dfbff8b059d73350085c0747dbee83c5600bf0300000031c0e82cc9fbffbe203d5600bf0300000031c0e81bc9fbff4189d84c89e1488d542420bed6555600bf0300000031c0e8ffc8fbffbe603d5600bf0300000031c0e8eec8fbffbee83c5600bf0300000031c0e8ddc8fbffc60425ffffffff784881c4d80100005b415cc3662e0f1f840000000000e84bf5ffffe979ffffff660f1f440000415741564989f641554989fd41544989cc554889d5ba04000000534889ef4881ece80200000fb601488d74241483e00f0fc889442414e825f6ffff4c89ef4c89f6e81a7ffdff4989c5410fb6042489c283e20f\r\n\r\n=== REDIS BUG REPORT END. Make sure to include from START to END. ===\r\n\r\n       Please report the crash by opening an issue on github:\r\n\r\n           http://github.com/redis/redis/issues\r\n\r\n  Suspect RAM error? Use redis-server --test-memory to verify it.\r\n```\r\n\r\n**Additional information**\r\n\r\n1. 4.19.118-2.el7.centos.x86_64\r\n2. Steps to reproduce (if any)\r\n",
  "state": "closed",
  "created_at": "2022-10-25T01:33:47Z",
  "updated_at": "2022-10-28T06:29:17Z",
  "closed_at": "2022-10-28T06:29:17Z",
  "labels": [
    "state:to-be-closed"
  ],
  "comments_data": [
    {
      "id": 1291898810,
      "user": "oranagra",
      "created_at": "2022-10-26T11:36:55Z",
      "body": "```\r\nxredis_version:2.0.1\r\n```\r\nwhat's xredis? you should probably put this crash report there (some modified version of redis, not this one)"
    }
  ]
}