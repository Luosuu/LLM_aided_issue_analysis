{
  "issue_number": 13368.0,
  "title": "[CRASH] redis in a 3-node replication setup crashed.",
  "body": "Notice!\r\n- If a Redis module was involved, please open an issue in the module's repo instead!\r\n- If you're using docker on Apple M1, please make sure the image you're using was compiled for ARM!\r\n\r\n\r\n=== REDIS BUG REPORT START: Cut & paste starting from here ===\r\n16886:S 18 May 2024 17:37:58.437 # ------------------------------------------------\r\n16886:S 18 May 2024 17:37:58.437 # !!! Software Failure. Press left mouse button to continue\r\n16886:S 18 May 2024 17:37:58.437 # Guru Meditation: Replica was unable to write command to disk. #server.c:3890\r\n\r\n------ STACK TRACE ------\r\n\r\nBacktrace:\r\n/usr/bin/redis-server 0.0.0.0:6379(processCommand+0x79f)[0x55a138a865df]\r\n/usr/bin/redis-server 0.0.0.0:6379(processInputBuffer+0x107)[0x55a138aa2917]\r\n/usr/bin/redis-server 0.0.0.0:6379(readQueryFromClient+0x318)[0x55a138aa2e58]\r\n/usr/bin/redis-server 0.0.0.0:6379(+0x17165c)[0x55a138b7665c]\r\n/usr/bin/redis-server 0.0.0.0:6379(aeProcessEvents+0x1e2)[0x55a138a7c2c2]\r\n/usr/bin/redis-server 0.0.0.0:6379(aeMain+0x1d)[0x55a138a7c5fd]\r\n/usr/bin/redis-server 0.0.0.0:6379(main+0x360)[0x55a138a73e80]\r\n/lib64/libc.so.6(+0x3feb0)[0x7fbef203feb0]\r\n/lib64/libc.so.6(__libc_start_main+0x80)[0x7fbef203ff60]\r\n/usr/bin/redis-server 0.0.0.0:6379(_start+0x25)[0x55a138a74565]\r\n\r\n------ INFO OUTPUT ------\r\n# Server\r\nredis_version:7.0.12\r\nredis_git_sha1:00000000\r\nredis_git_dirty:0\r\nredis_build_id:f05f74181a461f8a\r\nredis_mode:standalone\r\nos:Linux 5.14.0-362.24.1.el9_3.x86_64 x86_64\r\narch_bits:64\r\nmonotonic_clock:POSIX clock_gettime\r\nmultiplexing_api:epoll\r\natomicvar_api:c11-builtin\r\ngcc_version:11.4.1\r\nprocess_id:16886\r\nprocess_supervised:systemd\r\nrun_id:3652a80751d87a5650b157a9b38d1503f12fc7b5\r\ntcp_port:6379\r\nserver_time_usec:1716046678436036\r\nuptime_in_seconds:2049619\r\nuptime_in_days:23\r\nhz:10\r\nconfigured_hz:10\r\nlru_clock:4770646\r\nexecutable:/usr/bin/redis-server\r\nconfig_file:/etc/redis/redis.conf\r\nio_threads_active:0\r\n\r\n# Clients\r\nconnected_clients:11\r\ncluster_connections:0\r\nmaxclients:10000\r\nclient_recent_max_input_buffer:20480\r\nclient_recent_max_output_buffer:0\r\nblocked_clients:0\r\ntracking_clients:0\r\nclients_in_timeout_table:0\r\n\r\n# Memory\r\nused_memory:36766572832\r\nused_memory_human:34.24G\r\nused_memory_rss:36651757568\r\nused_memory_rss_human:34.13G\r\nused_memory_peak:36784468960\r\nused_memory_peak_human:34.26G\r\nused_memory_peak_perc:99.95%\r\nused_memory_overhead:620491024\r\nused_memory_startup:862632\r\nused_memory_dataset:36146081808\r\nused_memory_dataset_perc:98.31%\r\nallocator_allocated:36766720024\r\nallocator_active:36771098624\r\nallocator_resident:37209387008\r\ntotal_system_memory:52464754688\r\ntotal_system_memory_human:48.86G\r\nused_memory_lua:31744\r\nused_memory_vm_eval:31744\r\nused_memory_lua_human:31.00K\r\nused_memory_scripts_eval:0\r\nnumber_of_cached_scripts:0\r\nnumber_of_functions:0\r\nnumber_of_libraries:0\r\nused_memory_vm_functions:32768\r\nused_memory_vm_total:64512\r\nused_memory_vm_total_human:63.00K\r\nused_memory_functions:184\r\nused_memory_scripts:184\r\nused_memory_scripts_human:184B\r\nmaxmemory:42949672960\r\nmaxmemory_human:40.00G\r\nmaxmemory_policy:volatile-ttl\r\nallocator_frag_ratio:1.00\r\nallocator_frag_bytes:4378600\r\nallocator_rss_ratio:1.01\r\nallocator_rss_bytes:438288384\r\nrss_overhead_ratio:0.99\r\nrss_overhead_bytes:-557629440\r\nmem_fragmentation_ratio:1.00\r\nmem_fragmentation_bytes:-114813200\r\nmem_not_counted_for_evict:13472\r\nmem_replication_backlog:1066224\r\nmem_total_replication_buffers:1066208\r\nmem_clients_slaves:0\r\nmem_clients_normal:215488\r\nmem_cluster_links:0\r\nmem_aof_buffer:0\r\nmem_allocator:jemalloc-5.2.1\r\nactive_defrag_running:0\r\nlazyfree_pending_objects:0\r\nlazyfreed_objects:0\r\n\r\n# Persistence\r\nloading:0\r\nasync_loading:0\r\ncurrent_cow_peak:0\r\ncurrent_cow_size:0\r\ncurrent_cow_size_age:0\r\ncurrent_fork_perc:0.00\r\ncurrent_save_keys_processed:0\r\ncurrent_save_keys_total:0\r\nrdb_changes_since_last_save:83842\r\nrdb_bgsave_in_progress:0\r\nrdb_last_save_time:1716046123\r\nrdb_last_bgsave_status:err\r\nrdb_last_bgsave_time_sec:494\r\nrdb_current_bgsave_time_sec:-1\r\nrdb_saves:3987\r\nrdb_last_cow_size:145416192\r\nrdb_last_load_keys_expired:0\r\nrdb_last_load_keys_loaded:1820668\r\naof_enabled:0\r\naof_rewrite_in_progress:0\r\naof_rewrite_scheduled:0\r\naof_last_rewrite_time_sec:-1\r\naof_current_rewrite_time_sec:-1\r\naof_last_bgrewrite_status:ok\r\naof_rewrites:0\r\naof_rewrites_consecutive_failures:0\r\naof_last_write_status:ok\r\naof_last_cow_size:0\r\nmodule_fork_in_progress:0\r\nmodule_fork_last_cow_size:0\r\n\r\n# Stats\r\ntotal_connections_received:29315977\r\ntotal_commands_processed:725190990\r\ninstantaneous_ops_per_sec:496\r\ntotal_net_input_bytes:120380326392\r\ntotal_net_output_bytes:109210186001\r\ntotal_net_repl_input_bytes:76777739780\r\ntotal_net_repl_output_bytes:0\r\ninstantaneous_input_kbps:47.68\r\ninstantaneous_output_kbps:21.89\r\ninstantaneous_input_repl_kbps:16.89\r\ninstantaneous_output_repl_kbps:0.00\r\nrejected_connections:0\r\nsync_full:0\r\nsync_partial_ok:0\r\nsync_partial_err:0\r\nexpired_keys:0\r\nexpired_stale_perc:0.00\r\nexpired_time_cap_reached_count:0\r\nexpire_cycle_cpu_milliseconds:0\r\nevicted_keys:0\r\nevicted_clients:0\r\ntotal_eviction_exceeded_time:0\r\ncurrent_eviction_exceeded_time:0\r\nkeyspace_hits:426493285\r\nkeyspace_misses:18244237\r\npubsub_channels:1\r\npubsub_patterns:0\r\npubsubshard_channels:0\r\nlatest_fork_usec:856381\r\ntotal_forks:3987\r\nmigrate_cached_sockets:0\r\nslave_expires_tracked_keys:0\r\nactive_defrag_hits:0\r\nactive_defrag_misses:0\r\nactive_defrag_key_hits:0\r\nactive_defrag_key_misses:0\r\ntotal_active_defrag_time:0\r\ncurrent_active_defrag_time:0\r\ntracking_total_keys:0\r\ntracking_total_items:0\r\ntracking_total_prefixes:0\r\nunexpected_error_replies:0\r\ntotal_error_replies:5484\r\ndump_payload_sanitizations:0\r\ntotal_reads_processed:661053299\r\ntotal_writes_processed:561920760\r\nio_threaded_reads_processed:0\r\nio_threaded_writes_processed:0\r\nreply_buffer_shrinks:4184073\r\nreply_buffer_expands:612366\r\n\r\n# Replication\r\nrole:slave\r\nmaster_host:10.13.38.148\r\nmaster_port:6379\r\nmaster_link_status:up\r\nmaster_last_io_seconds_ago:0\r\nmaster_sync_in_progress:0\r\nslave_read_repl_offset:54769285133\r\nslave_repl_offset:54769284731\r\nslave_priority:100\r\nslave_read_only:1\r\nreplica_announced:1\r\nconnected_slaves:0\r\nmaster_failover_state:no-failover\r\nmaster_replid:4c5398b41765fbf5e0041a5cff19a0581cd16d01\r\nmaster_replid2:b2e8d8d0904eda43b2b8259e1e1cac6cceef4b0a\r\nmaster_repl_offset:54769284731\r\nsecond_repl_offset:36018919782\r\nrepl_backlog_active:1\r\nrepl_backlog_size:1048576\r\nrepl_backlog_first_byte_offset:54768233876\r\nrepl_backlog_histlen:1050856\r\n\r\n# CPU\r\nused_cpu_sys:40010.436250\r\nused_cpu_user:24854.856420\r\nused_cpu_sys_children:143388.891904\r\nused_cpu_user_children:1395613.069525\r\nused_cpu_sys_main_thread:39952.302710\r\nused_cpu_user_main_thread:24826.489939\r\n\r\n# Modules\r\n\r\n# Commandstats\r\ncmdstat_zrange:calls=2859,usec=772442453,usec_per_call=270179.25,rejected_calls=1,failed_calls=0\r\ncmdstat_latency|latest:calls=6,usec=16,usec_per_call=2.67,rejected_calls=0,failed_calls=0\r\ncmdstat_hdel:calls=12076000,usec=145043577,usec_per_call=12.01,rejected_calls=0,failed_calls=0\r\ncmdstat_info:calls=846076,usec=297637651,usec_per_call=351.79,rejected_calls=0,failed_calls=0\r\ncmdstat_hget:calls=12891011,usec=154422419,usec_per_call=11.98,rejected_calls=0,failed_calls=0\r\ncmdstat_zrem:calls=7369735,usec=41586346,usec_per_call=5.64,rejected_calls=0,failed_calls=0\r\ncmdstat_set:calls=18505972,usec=611987829,usec_per_call=33.07,rejected_calls=1,failed_calls=0\r\ncmdstat_auth:calls=29302173,usec=289659479,usec_per_call=9.89,rejected_calls=0,failed_calls=0\r\ncmdstat_srem:calls=1875700,usec=47671715,usec_per_call=25.42,rejected_calls=0,failed_calls=0\r\ncmdstat_exec:calls=1259274,usec=42668948,usec_per_call=33.88,rejected_calls=0,failed_calls=142\r\ncmdstat_hexists:calls=1966544,usec=21849983,usec_per_call=11.11,rejected_calls=0,failed_calls=0\r\ncmdstat_hgetall:calls=297813912,usec=2789077662,usec_per_call=9.37,rejected_calls=0,failed_calls=0\r\ncmdstat_quit:calls=13756,usec=9293,usec_per_call=0.68,rejected_calls=0,failed_calls=0\r\ncmdstat_slowlog|get:calls=6,usec=37,usec_per_call=6.17,rejected_calls=0,failed_calls=0\r\ncmdstat_slowlog|len:calls=6,usec=4,usec_per_call=0.67,rejected_calls=0,failed_calls=0\r\ncmdstat_ping:calls=6077891,usec=15438644,usec_per_call=2.54,rejected_calls=2506,failed_calls=0\r\ncmdstat_incr:calls=22311233,usec=168461766,usec_per_call=7.55,rejected_calls=0,failed_calls=0\r\ncmdstat_config|get:calls=6,usec=1323,usec_per_call=220.50,rejected_calls=0,failed_calls=0\r\ncmdstat_config|rewrite:calls=5,usec=50418,usec_per_call=10083.60,rejected_calls=0,failed_calls=0\r\ncmdstat_select:calls=29067546,usec=54213043,usec_per_call=1.87,rejected_calls=0,failed_calls=0\r\ncmdstat_client|kill:calls=10,usec=1030,usec_per_call=103.00,rejected_calls=0,failed_calls=0\r\ncmdstat_client|setname:calls=15737,usec=36360,usec_per_call=2.31,rejected_calls=0,failed_calls=0\r\ncmdstat_get:calls=90148693,usec=590493180,usec_per_call=6.55,rejected_calls=2510,failed_calls=0\r\ncmdstat_slaveof:calls=5,usec=2910,usec_per_call=582.00,rejected_calls=142,failed_calls=0\r\ncmdstat_exists:calls=2547170,usec=9261162,usec_per_call=3.64,rejected_calls=176,failed_calls=0\r\ncmdstat_subscribe:calls=160,usec=295,usec_per_call=1.84,rejected_calls=0,failed_calls=0\r\ncmdstat_publish:calls=6026494,usec=115568802,usec_per_call=19.18,rejected_calls=0,failed_calls=0\r\ncmdstat_zadd:calls=7850829,usec=635140806,usec_per_call=80.90,rejected_calls=0,failed_calls=0\r\ncmdstat_multi:calls=1259275,usec=1008203,usec_per_call=0.80,rejected_calls=0,failed_calls=0\r\ncmdstat_hset:calls=86428287,usec=830155119,usec_per_call=9.61,rejected_calls=0,failed_calls=0\r\ncmdstat_srandmember:calls=844299,usec=13648961,usec_per_call=16.17,rejected_calls=0,failed_calls=0\r\ncmdstat_sismember:calls=844298,usec=5782886,usec_per_call=6.85,rejected_calls=0,failed_calls=0\r\ncmdstat_hincrby:calls=14307336,usec=360183608,usec_per_call=25.17,rejected_calls=0,failed_calls=0\r\ncmdstat_role:calls=29067510,usec=148660371,usec_per_call=5.11,rejected_calls=0,failed_calls=0\r\ncmdstat_del:calls=6792440,usec=91974871,usec_per_call=13.54,rejected_calls=0,failed_calls=0\r\ncmdstat_scard:calls=37678736,usec=219223604,usec_per_call=5.82,rejected_calls=0,failed_calls=0\r\n\r\n# Errorstats\r\nerrorstat_ERR:count=6\r\nerrorstat_EXECABORT:count=142\r\nerrorstat_LOADING:count=5335\r\nerrorstat_READONLY:count=1\r\n\r\n# Latencystats\r\nlatency_percentiles_usec_zrange:p50=329252.863,p99=603979.775,p99.9=692060.159\r\nlatency_percentiles_usec_latency|latest:p50=2.007,p99=8.031,p99.9=8.031\r\nlatency_percentiles_usec_hdel:p50=7.007,p99=55.039,p99.9=165.887\r\nlatency_percentiles_usec_info:p50=205.823,p99=1613.823,p99.9=6422.527\r\nlatency_percentiles_usec_hget:p50=9.023,p99=46.079,p99.9=140.287\r\nlatency_percentiles_usec_zrem:p50=3.007,p99=31.103,p99.9=82.431\r\nlatency_percentiles_usec_set:p50=27.007,p99=122.367,p99.9=454.655\r\nlatency_percentiles_usec_auth:p50=7.007,p99=44.031,p99.9=239.615\r\nlatency_percentiles_usec_srem:p50=22.015,p99=72.191,p99.9=164.863\r\nlatency_percentiles_usec_exec:p50=26.111,p99=126.463,p99.9=301.055\r\nlatency_percentiles_usec_hexists:p50=9.023,p99=45.055,p99.9=106.495\r\nlatency_percentiles_usec_hgetall:p50=8.031,p99=38.143,p99.9=104.447\r\nlatency_percentiles_usec_quit:p50=1.003,p99=2.007,p99.9=24.063\r\nlatency_percentiles_usec_slowlog|get:p50=5.023,p99=10.047,p99.9=10.047\r\nlatency_percentiles_usec_slowlog|len:p50=1.003,p99=1.003,p99.9=1.003\r\nlatency_percentiles_usec_ping:p50=2.007,p99=23.039,p99.9=87.039\r\nlatency_percentiles_usec_incr:p50=7.007,p99=30.079,p99.9=76.287\r\nlatency_percentiles_usec_config|get:p50=236.543,p99=262.143,p99.9=262.143\r\nlatency_percentiles_usec_config|rewrite:p50=7471.103,p99=19660.799,p99.9=19660.799\r\nlatency_percentiles_usec_select:p50=2.007,p99=6.015,p99.9=36.095\r\nlatency_percentiles_usec_client|kill:p50=92.159,p99=184.319,p99.9=184.319\r\nlatency_percentiles_usec_client|setname:p50=2.007,p99=14.015,p99.9=51.199\r\nlatency_percentiles_usec_get:p50=6.015,p99=26.111,p99.9=73.215\r\nlatency_percentiles_usec_slaveof:p50=647.167,p99=704.511,p99.9=704.511\r\nlatency_percentiles_usec_exists:p50=3.007,p99=9.023,p99.9=48.127\r\nlatency_percentiles_usec_subscribe:p50=1.003,p99=10.047,p99.9=31.103\r\nlatency_percentiles_usec_publish:p50=13.055,p99=119.295,p99.9=471.039\r\nlatency_percentiles_usec_zadd:p50=74.239,p99=197.631,p99.9=444.415\r\nlatency_percentiles_usec_multi:p50=1.003,p99=2.007,p99.9=23.039\r\nlatency_percentiles_usec_hset:p50=2.007,p99=68.095,p99.9=141.311\r\nlatency_percentiles_usec_srandmember:p50=13.055,p99=52.223,p99.9=129.023\r\nlatency_percentiles_usec_sismember:p50=6.015,p99=28.031,p99.9=74.239\r\nlatency_percentiles_usec_hincrby:p50=20.095,p99=93.183,p99.9=419.839\r\nlatency_percentiles_usec_role:p50=5.023,p99=20.095,p99.9=60.159\r\nlatency_percentiles_usec_del:p50=8.031,p99=74.239,p99.9=309.247\r\nlatency_percentiles_usec_scard:p50=5.023,p99=21.119,p99.9=64.255\r\n\r\n# Cluster\r\ncluster_enabled:0\r\n\r\n# Keyspace\r\ndb0:keys=9700468,expires=2606484,avg_ttl=0\r\n\r\n------ CLIENT LIST OUTPUT ------\r\nid=29308112 addr=10.13.38.146:34164 laddr=10.13.38.146:6379 fd=13 name=sentinel-8b90a335-cmd age=373 idle=0 flags=N db=0 sub=0 psub=0 ssub=0 multi=-1 qbuf=0 qbuf-free=20474 argv-mem=0 multi-mem=0 rbs=2048 rbp=1024 obl=0 oll=0 omem=0 tot-mem=23296 events=r cmd=ping user=default redir=-1 resp=2\r\nid=29309462 addr=10.13.36.129:46564 laddr=10.13.38.146:6379 fd=12 name= age=311 idle=0 flags=N db=0 sub=0 psub=0 ssub=0 multi=-1 qbuf=0 qbuf-free=20474 argv-mem=0 multi-mem=0 rbs=1024 rbp=53 obl=0 oll=0 omem=0 tot-mem=22272 events=r cmd=hgetall user=default redir=-1 resp=2\r\nid=18526 addr=10.13.38.148:6379 laddr=10.13.38.146:48956 fd=11 name= age=2046840 idle=0 flags=Mx db=0 sub=0 psub=0 ssub=0 multi=0 qbuf=402 qbuf-free=20040 argv-mem=117 multi-mem=0 rbs=1024 rbp=45 obl=0 oll=0 omem=0 tot-mem=22405 events=r cmd=del user=(superuser) redir=-1 resp=2\r\nid=29315983 addr=10.13.36.129:48770 laddr=10.13.38.146:6379 fd=18 name= age=0 idle=0 flags=N db=0 sub=0 psub=0 ssub=0 multi=-1 qbuf=0 qbuf-free=20474 argv-mem=0 multi-mem=0 rbs=16384 rbp=0 obl=0 oll=0 omem=0 tot-mem=37632 events=r cmd=get user=default redir=-1 resp=2\r\nid=29315985 addr=10.13.36.129:59978 laddr=10.13.38.146:6379 fd=19 name= age=0 idle=0 flags=N db=0 sub=0 psub=0 ssub=0 multi=-1 qbuf=0 qbuf-free=20474 argv-mem=0 multi-mem=0 rbs=16384 rbp=0 obl=0 oll=0 omem=0 tot-mem=37632 events=r cmd=get user=default redir=-1 resp=2\r\nid=29315980 addr=10.13.36.195:51336 laddr=10.13.38.146:6379 fd=15 name= age=0 idle=0 flags=N db=0 sub=0 psub=0 ssub=0 multi=-1 qbuf=0 qbuf-free=20474 argv-mem=0 multi-mem=0 rbs=1024 rbp=0 obl=0 oll=0 omem=0 tot-mem=22272 events=r cmd=get user=default redir=-1 resp=2\r\nid=6185520 addr=10.13.38.147:35742 laddr=10.13.38.146:6379 fd=14 name=sentinel-76a03ce8-pubsub age=1404646 idle=0 flags=P db=0 sub=1 psub=0 ssub=0 multi=-1 qbuf=0 qbuf-free=0 argv-mem=0 multi-mem=0 rbs=1024 rbp=138 obl=0 oll=0 omem=0 tot-mem=1856 events=r cmd=subscribe user=default redir=-1 resp=2\r\nid=29291111 addr=10.13.38.148:36412 laddr=10.13.38.146:6379 fd=21 name=sentinel-ebd169d8-cmd age=1152 idle=1 flags=N db=0 sub=0 psub=0 ssub=0 multi=-1 qbuf=0 qbuf-free=20474 argv-mem=0 multi-mem=0 rbs=1024 rbp=7 obl=0 oll=0 omem=0 tot-mem=22272 events=r cmd=ping user=default redir=-1 resp=2\r\nid=6185509 addr=10.13.38.148:39524 laddr=10.13.38.146:6379 fd=8 name=sentinel-ebd169d8-pubsub age=1404649 idle=0 flags=P db=0 sub=1 psub=0 ssub=0 multi=-1 qbuf=0 qbuf-free=0 argv-mem=0 multi-mem=0 rbs=1024 rbp=138 obl=0 oll=0 omem=0 tot-mem=1856 events=r cmd=subscribe user=default redir=-1 resp=2\r\nid=6185506 addr=10.13.38.146:31346 laddr=10.13.38.146:6379 fd=10 name=sentinel-8b90a335-pubsub age=1404650 idle=0 flags=P db=0 sub=1 psub=0 ssub=0 multi=-1 qbuf=0 qbuf-free=0 argv-mem=0 multi-mem=0 rbs=1024 rbp=138 obl=0 oll=0 omem=0 tot-mem=1856 events=r cmd=subscribe user=default redir=-1 resp=2\r\nid=29279010 addr=10.13.38.147:40338 laddr=10.13.38.146:6379 fd=16 name=sentinel-76a03ce8-cmd age=1701 idle=1 flags=N db=0 sub=0 psub=0 ssub=0 multi=-1 qbuf=0 qbuf-free=20474 argv-mem=0 multi-mem=0 rbs=1024 rbp=7 obl=0 oll=0 omem=0 tot-mem=22272 events=r cmd=ping user=default redir=-1 resp=2\r\n\r\n------ CURRENT CLIENT INFO ------\r\nid=18526 addr=10.13.38.148:6379 laddr=10.13.38.146:48956 fd=11 name= age=2046840 idle=0 flags=Mx db=0 sub=0 psub=0 ssub=0 multi=0 qbuf=402 qbuf-free=20040 argv-mem=117 multi-mem=0 rbs=1024 rbp=45 obl=0 oll=0 omem=0 tot-mem=22405 events=r cmd=del user=(superuser) redir=-1 resp=2\r\nargv[0]: '\"DEL\"'\r\nargv[1]: '\"pb-rewards-rabattcode-gluecksrad-mai-de-2024:app-container:pb-rewards-rabattcode-gluecksrad-mai-de-2024-fe-5-q46dd\"'\r\n16886:S 18 May 2024 17:37:58.463 # key 'pb-rewards-rabattcode-gluecksrad-mai-de-2024:app-container:pb-rewards-rabattcode-gluecksrad-mai-de-2024-fe-5-q46dd' found in DB containing the following object:\r\n16886:S 18 May 2024 17:37:58.463 # Object type: 0\r\n16886:S 18 May 2024 17:37:58.463 # Object encoding: 0\r\n16886:S 18 May 2024 17:37:58.463 # Object refcount: 1\r\n\r\n------ MODULES INFO OUTPUT ------\r\n\r\n------ CONFIG DEBUG OUTPUT ------\r\nproto-max-bulk-len 512mb\r\nio-threads-do-reads no\r\nsanitize-dump-payload no\r\nrepl-diskless-sync yes\r\nclient-query-buffer-limit 1gb\r\nlazyfree-lazy-user-del no\r\nrepl-diskless-load disabled\r\nslave-read-only yes\r\nreplica-read-only yes\r\nactivedefrag no\r\nlazyfree-lazy-expire no\r\nlazyfree-lazy-server-del no\r\nlist-compress-depth 0\r\nio-threads 1\r\nlazyfree-lazy-eviction no\r\nlazyfree-lazy-user-flush no\r\n\r\n------ FAST MEMORY TEST ------\r\n16886:S 18 May 2024 17:37:58.479 # Bio thread for job type #0 terminated\r\n16886:S 18 May 2024 17:37:58.479 # Bio thread for job type #1 terminated\r\n16886:S 18 May 2024 17:37:58.481 # Bio thread for job type #2 terminated\r\n*** Preparing to test memory region 55a138d2f000 (2306048 bytes)\r\n*** Preparing to test memory region 55a139a4c000 (270336 bytes)\r\n*** Preparing to test memory region 7fb46a000000 (27950977024 bytes)\r\n*** Preparing to test memory region 7fbaf1a00000 (8388608 bytes)\r\n*** Preparing to test memory region 7fbaf2200000 (16747855872 bytes)\r\n*** Preparing to test memory region 7fbed8700000 (378535936 bytes)\r\n*** Preparing to test memory region 7fbeef1fd000 (8388608 bytes)\r\n*** Preparing to test memory region 7fbeef9fe000 (8388608 bytes)\r\n*** Preparing to test memory region 7fbef01ff000 (8388608 bytes)\r\n*** Preparing to test memory region 7fbef0a00000 (8388608 bytes)\r\n*** Preparing to test memory region 7fbef1600000 (8388608 bytes)\r\n*** Preparing to test memory region 7fbef1f25000 (16384 bytes)\r\n*** Preparing to test memory region 7fbef21fc000 (53248 bytes)\r\n*** Preparing to test memory region 7fbef220c000 (8192 bytes)\r\n*** Preparing to test memory region 7fbef2234000 (8192 bytes)\r\n*** Preparing to test memory region 7fbef224f000 (4096 bytes)\r\n*** Preparing to test memory region 7fbef228e000 (4096 bytes)\r\n*** Preparing to test memory region 7fbef22ba000 (4096 bytes)\r\n*** Preparing to test memory region 7fbef23f3000 (12288 bytes)\r\n*** Preparing to test memory region 7fbef282f000 (12288 bytes)\r\n*** Preparing to test memory region 7fbef29b5000 (4096 bytes)\r\n*** Preparing to test memory region 7fbef2a96000 (8192 bytes)\r\n.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O\r\nFast memory test PASSED, however your memory can still be broken. Please run a memory test for several hours if possible.\r\n\r\n=== REDIS BUG REPORT END. Make sure to include from START to END. ===\r\nPaste the complete crash log between the quotes below. Please include a few lines from the log preceding the crash report to provide some context.\r\n\r\n```\r\n```\r\n\r\n**Additional information**\r\n\r\n1. RedHat 9.4\r\n2. Steps to reproduce (if any): none, redis crashed during normal operations\r\n",
  "state": "closed",
  "created_at": "2024-06-26T08:25:26Z",
  "updated_at": "2024-06-28T14:19:08Z",
  "closed_at": "2024-06-28T14:14:58Z",
  "labels": [
    "crash report"
  ],
  "comments_data": [
    {
      "id": 2192894601,
      "user": "sundb",
      "created_at": "2024-06-27T01:42:46Z",
      "body": "@noris-spfab can you check whether there are any errors about rdb saving in the log file.\r\nlike `can't save in background: fork`, `Background saving error`."
    },
    {
      "id": 2196979326,
      "user": "noris-spfab",
      "created_at": "2024-06-28T13:54:30Z",
      "body": "Hello, yes, there was the following message immediately before:\r\n\r\n1339361:C 18 May 2024 17:28:41.583 * DB saved on disk\r\n1339361:C 18 May 2024 17:28:42.423 * Fork CoW for RDB: current 138 MB, peak 138 MB, average 88 MB\r\n16886:S 18 May 2024 17:28:43.462 * Background saving terminated with success\r\n16886:S 18 May 2024 17:29:44.021 * 10000 changes in 60 seconds. Saving...\r\n16886:S 18 May 2024 17:29:44.878 * Background saving started by pid 1339680\r\n1339680:C 18 May 2024 17:37:54.291 # Write error saving DB on disk(rdbSaveRio): No space left on device\r\n16886:S 18 May 2024 17:37:58.431 # Background saving error\r\n\r\n\r\n=== REDIS BUG REPORT START: Cut & paste starting from here ===\r\n16886:S 18 May 2024 17:37:58.437 # ------------------------------------------------\r\n16886:S 18 May 2024 17:37:58.437 # !!! Software Failure. Press left mouse button to continue\r\n16886:S 18 May 2024 17:37:58.437 # Guru Meditation: Replica was unable to write command to disk. #server.c:3890\r\n\r\n------ STACK TRACE ------\r\n\r\nBacktrace:\r\n/usr/bin/redis-server 0.0.0.0:6379(processCommand+0x79f)[0x55a138a865df]\r\n/usr/bin/redis-server 0.0.0.0:6379(processInputBuffer+0x107)[0x55a138aa2917]\r\n/usr/bin/redis-server 0.0.0.0:6379(readQueryFromClient+0x318)[0x55a138aa2e58]\r\n/usr/bin/redis-server 0.0.0.0:6379(+0x17165c)[0x55a138b7665c]\r\n/usr/bin/redis-server 0.0.0.0:6379(aeProcessEvents+0x1e2)[0x55a138a7c2c2]\r\n/usr/bin/redis-server 0.0.0.0:6379(aeMain+0x1d)[0x55a138a7c5fd]\r\n/usr/bin/redis-server 0.0.0.0:6379(main+0x360)[0x55a138a73e80]\r\n/lib64/libc.so.6(+0x3feb0)[0x7fbef203feb0]\r\n/lib64/libc.so.6(__libc_start_main+0x80)[0x7fbef203ff60]\r\n/usr/bin/redis-server 0.0.0.0:6379(_start+0x25)[0x55a138a74565]\r\n"
    },
    {
      "id": 2197021795,
      "user": "sundb",
      "created_at": "2024-06-28T14:09:13Z",
      "body": "from the log ```# Write error saving DB on disk(rdbSaveRio): No space left on device```\r\nplease check the space of the HDD."
    },
    {
      "id": 2197028941,
      "user": "noris-spfab",
      "created_at": "2024-06-28T14:11:53Z",
      "body": "ok, so the bug report is more like byproduct of redis that cannot write to disk and crashing with that messages in the log and not a \"real\" bug? "
    },
    {
      "id": 2197033644,
      "user": "sundb",
      "created_at": "2024-06-28T14:13:42Z",
      "body": "this is a panic that Reids throws out, not a bug."
    },
    {
      "id": 2197037394,
      "user": "noris-spfab",
      "created_at": "2024-06-28T14:14:59Z",
      "body": "thanks for the clarification."
    },
    {
      "id": 2197047938,
      "user": "sundb",
      "created_at": "2024-06-28T14:19:07Z",
      "body": "@noris-spfab you also can disable `replica-ignore-disk-write-errors` config to prevent Redis to throw this panic when writing logs failed in replica."
    }
  ]
}