{
  "issue_number": 12967.0,
  "title": "[CRASH] Redis 5.0.7 assertion failure 'dictFind(db->dict,key->ptr) != NULL'",
  "body": "```\r\n=== REDIS BUG REPORT START: Cut & paste starting from here ===\r\n\r\n3801:M 16 Jan 2024 23:15:28.668 # Object encoding: 0\r\n3801:M 16 Jan 2024 23:15:28.668 # Object refcount: 1\r\n3801:M 16 Jan 2024 23:15:28.668 # Object raw string len: 46\r\n3801:M 16 Jan 2024 23:15:28.668 # Object raw string content: \"a11bingoplusmps1jl_USER_GAME_BALANCE_CACHE_KEY\"\r\n3801:M 16 Jan 2024 23:15:28.668 # === ASSERTION FAILED ===\r\n3801:M 16 Jan 2024 23:15:28.668 # ==> db.c:1101 'dictFind(db->dict,key->ptr) != NULL' is not true\r\n3801:M 16 Jan 2024 23:15:28.668 # (forcing SIGSEGV to print the bug report.)\r\n3801:M 16 Jan 2024 23:15:28.668 # Redis 5.0.7 crashed by signal: 11\r\n3801:M 16 Jan 2024 23:15:28.668 # Crashed running the instruction at: 0x46f3ea\r\n3801:M 16 Jan 2024 23:15:28.668 # Accessing address: 0xffffffffffffffff\r\n3801:M 16 Jan 2024 23:15:28.668 # Failed assertion: dictFind(db->dict,key->ptr) != NULL (db.c:1101)\r\n\r\n------ STACK TRACE ------\r\nEIP:\r\n/usr/local/redis-cluster/bin/redis-server 10.192.168.110:6379 [cluster](_serverAssert+0x6a)[0x46f3ea]\r\n\r\nBacktrace:\r\n/usr/local/redis-cluster/bin/redis-server 10.192.168.110:6379 [cluster](logStackTrace+0x29)[0x4715c9]\r\n/usr/local/redis-cluster/bin/redis-server 10.192.168.110:6379 [cluster](sigsegvHandler+0xac)[0x471c6c]\r\n/lib64/libpthread.so.0(+0xf630)[0x7f1c70245630]\r\n/usr/local/redis-cluster/bin/redis-server 10.192.168.110:6379 [cluster](_serverAssert+0x6a)[0x46f3ea]\r\n/usr/local/redis-cluster/bin/redis-server 10.192.168.110:6379 [cluster](getExpire+0x76)[0x4462d6]\r\n/usr/local/redis-cluster/bin/redis-server 10.192.168.110:6379 [cluster](keyIsExpired+0x6)[0x446376]\r\n/usr/local/redis-cluster/bin/redis-server 10.192.168.110:6379 [cluster](expireIfNeeded+0x11)[0x446ff1]\r\n/usr/local/redis-cluster/bin/redis-server 10.192.168.110:6379 [cluster](lookupKeyWrite+0x11)[0x4472c1]\r\n/usr/local/redis-cluster/bin/redis-server 10.192.168.110:6379 [cluster](setKey+0x12)[0x447342]\r\n/usr/local/redis-cluster/bin/redis-server 10.192.168.110:6379 [cluster](setGenericCommand+0x98)[0x453048]\r\n/usr/local/redis-cluster/bin/redis-server 10.192.168.110:6379 [cluster](setexCommand+0x48)[0x4533e8]\r\n/usr/local/redis-cluster/bin/redis-server 10.192.168.110:6379 [cluster](call+0x9b)[0x430c0b]\r\n/usr/local/redis-cluster/bin/redis-server 10.192.168.110:6379 [cluster](processCommand+0x33f)[0x431eaf]\r\n/usr/local/redis-cluster/bin/redis-server 10.192.168.110:6379 [cluster](processInputBuffer+0x175)[0x440be5]\r\n/usr/local/redis-cluster/bin/redis-server 10.192.168.110:6379 [cluster](aeProcessEvents+0x2a0)[0x42b030]\r\n/usr/local/redis-cluster/bin/redis-server 10.192.168.110:6379 [cluster](aeMain+0x2b)[0x42b2fb]\r\n/usr/local/redis-cluster/bin/redis-server 10.192.168.110:6379 [cluster](main+0x4c0)[0x4281a0]\r\n/lib64/libc.so.6(__libc_start_main+0xf5)[0x7f1c6fe8a555]\r\n/usr/local/redis-cluster/bin/redis-server 10.192.168.110:6379 [cluster][0x4283fa]\r\n\r\n------ INFO OUTPUT ------\r\n# Server\r\nredis_version:5.0.7\r\nredis_git_sha1:00000000\r\nredis_git_dirty:0\r\nredis_build_id:4bf8cbd677c898fd\r\nredis_mode:cluster\r\nos:Linux 5.13.9-1.el7.elrepo.x86_64 x86_64\r\narch_bits:64\r\nmultiplexing_api:epoll\r\natomicvar_api:atomic-builtin\r\ngcc_version:4.8.5\r\nprocess_id:3801\r\nrun_id:3b9c4ae5ca8d54ea5ed13119202be85093e8698f\r\ntcp_port:6379\r\nuptime_in_seconds:7831\r\nuptime_in_days:0\r\nhz:10\r\nconfigured_hz:10\r\nlru_clock:10948112\r\nexecutable:/usr/local/redis-cluster/bin/redis-server\r\nconfig_file:/usr/local/redis-cluster/conf/redis.conf\r\n\r\n# Clients\r\nconnected_clients:1136\r\nclient_recent_max_input_buffer:212853\r\nclient_recent_max_output_buffer:151648\r\nblocked_clients:0\r\n\r\n# Memory\r\nused_memory:9383009688\r\nused_memory_human:8.74G\r\nused_memory_rss:9790894080\r\nused_memory_rss_human:9.12G\r\nused_memory_peak:10850468568\r\nused_memory_peak_human:10.11G\r\nused_memory_peak_perc:86.48%\r\nused_memory_overhead:1885663084\r\nused_memory_startup:6820928\r\nused_memory_dataset:7497346604\r\nused_memory_dataset_perc:79.96%\r\nallocator_allocated:9384272192\r\nallocator_active:9603088384\r\nallocator_resident:9763696640\r\ntotal_system_memory:67443118080\r\ntotal_system_memory_human:62.81G\r\nused_memory_lua:58368\r\nused_memory_lua_human:57.00K\r\nused_memory_scripts:5792\r\nused_memory_scripts_human:5.66K\r\nnumber_of_cached_scripts:6\r\nmaxmemory:31138512896\r\nmaxmemory_human:29.00G\r\nmaxmemory_policy:volatile-lru\r\nallocator_frag_ratio:1.02\r\nallocator_frag_bytes:218816192\r\nallocator_rss_ratio:1.02\r\nallocator_rss_bytes:160608256\r\nrss_overhead_ratio:1.00\r\nrss_overhead_bytes:27197440\r\nmem_fragmentation_ratio:1.04\r\nmem_fragmentation_bytes:407247864\r\nmem_not_counted_for_evict:0\r\nmem_replication_backlog:1048576\r\nmem_clients_slaves:49694\r\nmem_clients_normal:24575934\r\nmem_aof_buffer:0\r\nmem_allocator:jemalloc-5.1.0\r\nactive_defrag_running:0\r\nlazyfree_pending_objects:0\r\n# Persistence\r\nloading:0\r\nrdb_changes_since_last_save:204822\r\nrdb_bgsave_in_progress:1\r\nrdb_last_save_time:1705446774\r\nrdb_last_bgsave_status:ok\r\nrdb_last_bgsave_time_sec:89\r\nrdb_current_bgsave_time_sec:93\r\nrdb_last_cow_size:981446656\r\naof_enabled:0\r\naof_rewrite_in_progress:0\r\naof_rewrite_scheduled:0\r\naof_last_rewrite_time_sec:-1\r\naof_current_rewrite_time_sec:-1\r\naof_last_bgrewrite_status:ok\r\naof_last_write_status:ok\r\naof_last_cow_size:0\r\n\r\n# Stats\r\ntotal_connections_received:51528\r\ntotal_commands_processed:40619768\r\ninstantaneous_ops_per_sec:5097\r\ntotal_net_input_bytes:38550800830\r\ntotal_net_output_bytes:409991261705\r\ninstantaneous_input_kbps:3574.66\r\ninstantaneous_output_kbps:79212.42\r\nrejected_connections:0\r\nsync_full:1\r\nsync_partial_ok:0\r\nsync_partial_err:1\r\nexpired_keys:869031\r\nexpired_stale_perc:21.31\r\nexpired_time_cap_reached_count:0\r\nevicted_keys:0\r\nkeyspace_hits:24142677\r\nkeyspace_misses:9177066\r\npubsub_channels:0\r\npubsub_patterns:0\r\nlatest_fork_usec:262963\r\nmigrate_cached_sockets:0\r\nslave_expires_tracked_keys:0\r\nactive_defrag_hits:0\r\nactive_defrag_misses:0\r\nactive_defrag_key_hits:0\r\nactive_defrag_key_misses:0\r\n\r\n# Replication\r\nrole:master\r\nconnected_slaves:1\r\nslave0:ip=10.192.168.10,port=6379,state=online,offset=6618468739616,lag=0\r\nmaster_replid:02b2ffabd478278fe85bbda84f4895cf26ccd5f9\r\nmaster_replid2:bc4e041e7ff90bf8ec6854f17d73bfd066c690a4\r\nmaster_repl_offset:6618468885009\r\nsecond_repl_offset:6593887229785\r\nrepl_backlog_active:1\r\nrepl_backlog_size:1048576\r\nrepl_backlog_first_byte_offset:6618467836434\r\nrepl_backlog_histlen:1048576\r\n\r\n# CPU\r\nused_cpu_sys:894.270956\r\nused_cpu_user:811.458485\r\nused_cpu_sys_children:384.419806\r\nused_cpu_user_children:1780.582258\r\n\r\n# Commandstats\r\ncmdstat_zrem:calls=57217,usec=114711,usec_per_call=2.00\r\ncmdstat_pttl:calls=254720,usec=336486,usec_per_call=1.32\r\ncmdstat_getset:calls=2,usec=28,usec_per_call=14.00\r\ncmdstat_smembers:calls=423762,usec=3863162,usec_per_call=9.12\r\ncmdstat_cluster:calls=57411,usec=13815306,usec_per_call=240.64\r\ncmdstat_evalsha:calls=21893,usec=1167352,usec_per_call=53.32\r\ncmdstat_rpush:calls=1,usec=28,usec_per_call=28.00\r\ncmdstat_zcard:calls=20430,usec=53512,usec_per_call=2.62\r\ncmdstat_setex:calls=1820633,usec=27730292,usec_per_call=15.23\r\ncmdstat_hmset:calls=514700,usec=14321507,usec_per_call=27.82\r\ncmdstat_pexpire:calls=629899,usec=1212997,usec_per_call=1.93\r\ncmdstat_del:calls=1257530,usec=20075684,usec_per_call=15.96\r\ncmdstat_multi:calls=29098,usec=3268,usec_per_call=0.11\r\ncmdstat_zadd:calls=14104,usec=8747955,usec_per_call=620.25\r\ncmdstat_hset:calls=126079,usec=2215756,usec_per_call=17.57\r\ncmdstat_hdel:calls=57714,usec=141220,usec_per_call=2.45\r\ncmdstat_zrangebyscore:calls=50,usec=476,usec_per_call=9.52\r\ncmdstat_rpop:calls=610,usec=1189,usec_per_call=1.95\r\ncmdstat_zscore:calls=327,usec=3549,usec_per_call=10.85\r\ncmdstat_get:calls=11679839,usec=35019081,usec_per_call=3.00\r\ncmdstat_client:calls=42552,usec=47833,usec_per_call=1.12\r\ncmdstat_expire:calls=5,usec=63,usec_per_call=12.60\r\ncmdstat_select:calls=1,usec=8,usec_per_call=8.00\r\ncmdstat_ping:calls=756879,usec=392108,usec_per_call=0.52\r\ncmdstat_incrby:calls=24829,usec=383602,usec_per_call=15.45\r\ncmdstat_sadd:calls=285963,usec=401809,usec_per_call=1.41\r\ncmdstat_zremrangebyrank:calls=20206,usec=3670254,usec_per_call=181.64\r\ncmdstat_zrange:calls=815907,usec=93071168,usec_per_call=114.07\r\ncmdstat_eval:calls=114432,usec=7155527,usec_per_call=62.53\r\ncmdstat_lpush:calls=4,usec=132,usec_per_call=33.00\r\ncmdstat_lpop:calls=57217,usec=27230,usec_per_call=0.48\r\ncmdstat_ttl:calls=147,usec=124,usec_per_call=0.84\r\ncmdstat_sscan:calls=2949524,usec=25520884,usec_per_call=8.65\r\ncmdstat_incr:calls=98730,usec=216386,usec_per_call=2.19\r\ncmdstat_sismember:calls=114804,usec=97000,usec_per_call=0.84\r\ncmdstat_dbsize:calls=1,usec=1,usec_per_call=1.00\r\ncmdstat_srem:calls=2341,usec=16111,usec_per_call=6.88\r\ncmdstat_zremrangebyscore:calls=32,usec=390,usec_per_call=12.19\r\ncmdstat_hgetall:calls=1659854,usec=20509186,usec_per_call=12.36\r\ncmdstat_auth:calls=59690,usec=63191,usec_per_call=1.06\r\ncmdstat_mget:calls=9585742,usec=34489406,usec_per_call=3.60\r\ncmdstat_psync:calls=1,usec=122,usec_per_call=122.00\r\ncmdstat_hexists:calls=57220,usec=77175,usec_per_call=1.35\r\ncmdstat_set:calls=827250,usec=16916536,usec_per_call=20.45\r\ncmdstat_replconf:calls=135727,usec=109003,usec_per_call=0.80\r\ncmdstat_info:calls=47081,usec=21688788,usec_per_call=460.67\r\ncmdstat_readonly:calls=3702,usec=489,usec_per_call=0.13\r\ncmdstat_hget:calls=136666,usec=379129,usec_per_call=2.77\r\ncmdstat_unlink:calls=26871,usec=293074,usec_per_call=10.91\r\ncmdstat_hincrby:calls=69273,usec=223137,usec_per_call=3.22\r\ncmdstat_exists:calls=5378923,usec=4792072,usec_per_call=0.89\r\ncmdstat_wait:calls=109114,usec=99857,usec_per_call=0.92\r\ncmdstat_hmget:calls=66957,usec=471368,usec_per_call=7.04\r\ncmdstat_publish:calls=2,usec=61,usec_per_call=30.50\r\ncmdstat_exec:calls=29098,usec=505908,usec_per_call=17.39\r\ncmdstat_append:calls=5356,usec=26767,usec_per_call=5.00\r\ncmdstat_lindex:calls=171648,usec=220814,usec_per_call=1.29\r\n\r\n# Cluster\r\ncluster_enabled:1\r\n\r\n# Keyspace\r\ndb0:keys=20636899,expires=20450637,avg_ttl=659452518\r\n\r\n------ CLIENT LIST OUTPUT ------\r\nid=13454 addr=10.192.22.21:20062 fd=1525 name= age=6042 idle=3 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=ping\r\nid=13455 addr=10.192.22.21:16950 fd=1526 name= age=6042 idle=2 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=ping\r\nid=13458 addr=10.192.22.21:45408 fd=1529 name= age=6042 idle=2 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=ping\r\nid=13460 addr=10.192.22.21:52024 fd=1531 name= age=6042 idle=3 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=ping\r\nid=13461 addr=10.192.22.21:59986 fd=1532 name= age=6042 idle=2 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=ping\r\nid=13464 addr=10.192.22.21:23082 fd=1535 name= age=6042 idle=2 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=ping\r\nid=13467 addr=10.192.22.21:2384 fd=1538 name= age=6042 idle=2 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=ping\r\nid=13474 addr=10.192.22.9:35904 fd=40 name= age=6042 idle=0 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=32768 obl=0 oll=0 omem=0 events=r cmd=get\r\nid=13186 addr=10.192.22.165:8477 fd=395 name= age=6042 idle=1 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=del\r\nid=13191 addr=10.192.22.51:17167 fd=405 name= age=6042 idle=3 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=ping\r\nid=13193 addr=10.192.22.51:51378 fd=408 name= age=6042 idle=3 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=ping\r\nid=14774 addr=10.192.22.151:15205 fd=58 name= age=6012 idle=0 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=hgetall\r\nid=15710 addr=10.192.22.182:47599 fd=15 name= age=5887 idle=15 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=pexpire\r\nid=13196 addr=10.192.22.165:27843 fd=412 name= age=6042 idle=0 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=del\r\nid=13197 addr=10.192.22.165:44871 fd=413 name= age=6042 idle=0 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=del\r\nid=13202 addr=10.192.22.165:62170 fd=418 name= age=6042 idle=3 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=ping\r\nid=15695 addr=10.192.22.47:2881 fd=14 name= age=5889 idle=3 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=set\r\nid=15696 addr=10.192.22.169:24206 fd=18 name= age=5889 idle=3 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=set\r\nid=13241 addr=10.192.22.36:26530 fd=890 name= age=6042 idle=3 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=ping\r\nid=13242 addr=10.192.22.15:6689 fd=892 name= age=6042 idle=3 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=ping\r\nid=18858 addr=10.192.22.60:11622 fd=41 name= age=5508 idle=3 flags=r db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=ping\r\nid=18859 addr=10.192.22.100:46427 fd=46 name= age=5508 idle=3 flags=r db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=ping\r\nid=13247 addr=10.192.22.36:15556 fd=904 name= age=6042 idle=3 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=ping\r\nid=13248 addr=10.192.22.36:29682 fd=905 name= age=6042 idle=3 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=ping\r\nid=13249 addr=10.192.22.36:51742 fd=908 name= age=6042 idle=3 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=ping\r\nid=13252 addr=10.192.22.15:31109 fd=911 name= age=6042 idle=3 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=ping\r\nid=13253 addr=10.192.22.15:2081 fd=914 name= age=6042 idle=3 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=ping\r\nid=13255 addr=10.192.22.15:26858 fd=919 name= age=6042 idle=3 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=ping\r\nid=13256 addr=10.192.22.36:52358 fd=921 name= age=6042 idle=3 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=ping\r\nid=13257 addr=10.192.22.36:21663 fd=923 name= age=6042 idle=3 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=ping\r\nid=13264 addr=10.192.22.15:25423 fd=1408 name= age=6042 idle=3 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=ping\r\nid=13265 addr=10.192.22.15:35373 fd=1409 name= age=6042 idle=3 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=ping\r\nid=13266 addr=10.192.22.15:3585 fd=1410 name= age=6042 idle=3 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=ping\r\nid=13267 addr=10.192.22.15:31479 fd=1411 name= age=6042 idle=3 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=ping\r\nid=13271 addr=10.192.22.36:27302 fd=1415 name= age=6042 idle=3 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=ping\r\nid=13272 addr=10.192.22.36:7748 fd=1416 name= age=6042 idle=3 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=ping\r\nid=13276 addr=10.192.22.36:35594 fd=1420 name= age=6042 idle=3 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=ping\r\nid=13279 addr=10.192.22.36:60096 fd=1423 name= age=6042 idle=3 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=ping\r\nid=13280 addr=10.192.22.15:24191 fd=1424 name= age=6042 idle=2 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=del\r\nid=13282 addr=10.192.22.15:62597 fd=1426 name= age=6042 idle=3 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=ping\r\nid=13284 addr=10.192.22.15:40426 fd=1428 name= age=6042 idle=3 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=ping\r\nid=13285 addr=10.192.22.15:36463 fd=1429 name= age=6042 idle=3 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=ping\r\nid=13287 addr=10.192.22.36:10038 fd=1431 name= age=6042 idle=3 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=ping\r\nid=13288 addr=10.192.22.36:11718 fd=1432 name= age=6042 idle=3 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=ping\r\nid=13291 addr=10.192.22.36:14698 fd=1435 name= age=6042 idle=3 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=ping\r\nid=13292 addr=10.192.22.36:18694 fd=1436 name= age=6042 idle=3 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=ping\r\nid=13293 addr=10.192.22.15:49939 fd=1437 name= age=6042 idle=2 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=del\r\nid=14262 addr=10.192.22.22:13319 fd=1076 name= age=6035 idle=5 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=ping\r\nid=14263 addr=10.192.22.22:17251 fd=1886 name= age=6035 idle=5 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=ping\r\nid=14264 addr=10.192.22.22:14556 fd=1887 name= age=6035 idle=5 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=ping\r\nid=14265 addr=10.192.22.22:46730 fd=1888 name= age=6035 idle=5 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=ping\r\nid=14266 addr=10.192.22.171:8709 fd=1889 name= age=6035 idle=5 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=ping\r\nid=14267 addr=10.192.22.22:15370 fd=1890 name= age=6035 idle=5 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=ping\r\nid=14268 addr=10.192.22.22:21402 fd=1891 name= age=6035 idle=5 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=ping\r\nid=14269 addr=10.192.22.171:37542 fd=1892 name= age=6035 idle=0 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=wait\r\nid=14270 addr=10.192.22.171:64886 fd=1893 name= age=6035 idle=5 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=ping\r\nid=14271 addr=10.192.22.171:56407 fd=1894 name= age=6035 idle=0 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=set\r\nid=14272 addr=10.192.22.22:54830 fd=1895 name= age=6035 idle=5 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=ping\r\nid=27677 addr=10.192.21.37:46306 fd=43 name= age=4021 idle=0 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=32768 obl=0 oll=0 omem=0 events=r cmd=hgetall\r\nid=13429 addr=10.192.22.21:20399 fd=891 name= age=6042 idle=3 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=ping\r\nid=13430 addr=10.192.22.21:51704 fd=893 name= age=6042 idle=3 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=ping\r\nid=13431 addr=10.192.22.21:22298 fd=895 name= age=6042 idle=3 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=ping\r\nid=13432 addr=10.192.22.21:37687 fd=897 name= age=6042 idle=3 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=ping\r\nid=13433 addr=10.192.22.21:24476 fd=898 name= age=6042 idle=3 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=ping\r\nid=13435 addr=10.192.22.21:40557 fd=902 name= age=6042 idle=3 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=ping\r\nid=13437 addr=10.192.22.21:30675 fd=906 name= age=6042 idle=3 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=ping\r\nid=13439 addr=10.192.22.21:17476 fd=912 name= age=6042 idle=3 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=ping\r\nid=13441 addr=10.192.22.21:63177 fd=916 name= age=6042 idle=3 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=ping\r\nid=13443 addr=10.192.22.21:63391 fd=918 name= age=6042 idle=3 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=ping\r\nid=13445 addr=10.192.22.21:8653 fd=922 name= age=6042 idle=3 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=ping\r\nid=13447 addr=10.192.22.21:18357 fd=926 name= age=6042 idle=3 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=ping\r\nid=13449 addr=10.192.22.21:51359 fd=1520 name= age=6042 idle=3 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=ping\r\nid=13451 addr=10.192.22.21:39916 fd=1522 name= age=6042 idle=3 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=ping\r\n\r\n------ CURRENT CLIENT INFO ------\r\nid=12376 addr=10.192.22.15:38989 fd=1051 name= age=6076 idle=0 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=336 qbuf-free=32432 obl=0 oll=0 omem=0 events=r cmd=setex\r\nargv[0]: 'SETEX'\r\nargv[1]: 'a11appleplusmps1jl_USER_GAME_BALANCE_CACHE_KEY'\r\nargv[2]: '2592000'\r\nargv[3]: '{\"@class\":\"com.alibaba.fastjson.JSONObject\",\"hasBalance\":\"1\",\"platform\":{\"@class\":\"com.alibaba.fastjson.JSONObject\",\"a11104\":{\"@class\":\"com.alibaba.fastjson.JSONObject\",\"balance\":\r\n\"0.5\",\"gameKind\":\"5\"}},\"timestamp\":[\"java.lang.Long\",1705446928664]}'\r\n3801:M 16 Jan 2024 23:15:28.678 # key 'a11bingoplusmps1jl_USER_GAME_BALANCE_CACHE_KEY' found in DB containing the following object:\r\n3801:M 16 Jan 2024 23:15:28.678 # Object type: 0\r\n3801:M 16 Jan 2024 23:15:28.678 # Object encoding: 0\r\n3801:M 16 Jan 2024 23:15:28.678 # Object refcount: 1\r\n3801:M 16 Jan 2024 23:15:28.678 # Object raw string len: 247\r\n3801:M 16 Jan 2024 23:15:28.679 # Object raw string content: \"{\\\"@class\\\":\\\"com.alibaba.fastjson.JSONObject\\\",\\\"hasBalance\\\":\\\"1\\\",\\\"platform\\\":{\\\"@class\\\":\\\"com.alibaba.fastjson.JSONObject\r\n\\\",\\\"a11104\\\":{\\\"@class\\\":\\\"com.alibaba.fastjson.JSONObject\\\",\\\"balance\\\":\\\"0.5\\\",\\\"gameKind\\\":\\\"5\\\"}},\\\"timestamp\\\":[\\\"java.lang.Long\\\",1705446928662]}\"\r\n\r\n------ REGISTERS ------\r\n3801:M 16 Jan 2024 23:15:28.679 # \r\nRAX:0000000000000000 RBX:000000000000044d\r\nRCX:00000000027bb370 RDX:00007f1c7022f7b8\r\nRDI:00007f1c7022f760 RSI:0000000000000000\r\nRBP:000000000053890e RSP:00007fff1508a620\r\nR8 :0000000000000001 R9 :00007f1c70d75f80\r\nR10:7562206568742074 R11:0000000000000206\r\nR12:0000000000535ae8 R13:0000000000000000\r\nR14:00007f1bd23387c0 R15:0000000000000000\r\nRIP:000000000046f3ea EFL:0000000000010202\r\nCSGSFS:002b000000000033\r\n3801:M 16 Jan 2024 23:15:28.679 # (00007fff1508a62f) -> 00007f1c6fa1a800\r\n3801:M 16 Jan 2024 23:15:28.679 # (00007fff1508a62e) -> 0000000000000000\r\n3801:M 16 Jan 2024 23:15:28.679 # (00007fff1508a62d) -> 00000000004472c1\r\n3801:M 16 Jan 2024 23:15:28.679 # (00007fff1508a62c) -> 00007f1b21febe10\r\n3801:M 16 Jan 2024 23:15:28.679 # (00007fff1508a62b) -> 00007f1c6fa1a800\r\n3801:M 16 Jan 2024 23:15:28.679 # (00007fff1508a62a) -> 00007f1b42cb8610\r\n3801:M 16 Jan 2024 23:15:28.679 # (00007fff1508a629) -> 0000000000446ff1\r\n3801:M 16 Jan 2024 23:15:28.679 # (00007fff1508a628) -> 00007f1c6fa1a800\r\n3801:M 16 Jan 2024 23:15:28.679 # (00007fff1508a627) -> 0000000000446376\r\n3801:M 16 Jan 2024 23:15:28.679 # (00007fff1508a626) -> 00007f1bd23387c0\r\n3801:M 16 Jan 2024 23:15:28.679 # (00007fff1508a625) -> 00007f1b21febe10\r\n3801:M 16 Jan 2024 23:15:28.679 # (00007fff1508a624) -> 00007f1c6fa1a800\r\n\r\n\r\n\r\n------ FAST MEMORY TEST ------\r\n3801:M 16 Jan 2024 23:15:28.679 # Bio thread for job type #0 terminated\r\n3801:M 16 Jan 2024 23:15:28.680 # Bio thread for job type #1 terminated\r\n3801:M 16 Jan 2024 23:15:28.680 # Bio thread for job type #2 terminated\r\n*** Preparing to test memory region 78f000 (2252800 bytes)\r\n*** Preparing to test memory region 27ab000 (135168 bytes)\r\n*** Preparing to test memory region 7f1986400000 (11620319232 bytes)\r\n*** Preparing to test memory region 7f1c3afbb000 (738197504 bytes)\r\n*** Preparing to test memory region 7f1c66fbc000 (8388608 bytes)\r\n*** Preparing to test memory region 7f1c677bd000 (8388608 bytes)\r\n*** Preparing to test memory region 7f1c67fbe000 (8388608 bytes)\r\n*** Preparing to test memory region 7f1c687be000 (9437184 bytes)\r\n*** Preparing to test memory region 7f1c6f600000 (8388608 bytes)\r\n*** Preparing to test memory region 7f1c70231000 (20480 bytes)\r\n*** Preparing to test memory region 7f1c7044e000 (16384 bytes)\r\n*** Preparing to test memory region 7f1c70d74000 (20480 bytes)\r\n*** Preparing to test memory region 7f1c70d7f000 (4096 bytes)\r\n*** Preparing to test memory region 7f1c70d80000 (4096 bytes)\r\n*** Preparing to test memory region 7f1c70d83000 (4096 bytes)\r\n.O.O.29554:C 16 Jan 2024 23:15:28.882 * DB saved on disk\r\n29554:C 16 Jan 2024 23:15:29.153 * RDB: 937 MB of memory used by copy-on-write\r\nO.O.O.O.O.O.O.O.O.O.O.O.O\r\nFast memory test PASSED, however your memory can still be broken. Please run a memory test for several hours if possible.\r\n\r\n------ DUMPING CODE AROUND EIP ------\r\nSymbol: _serverAssert (base: 0x46f380)\r\nModule: /usr/local/redis-cluster/bin/redis-server 10.192.168.110:6379 [cluster] (base 0x400000)\r\n$ xxd -r -p /tmp/dump.hex /tmp/dump.bin\r\n$ objdump --adjust-vma=0x46f380 -D -b binary -m i386:x86-64 /tmp/dump.bin\r\n------\r\n3801:M 16 Jan 2024 23:16:13.419 # dump of function (hexdump of 234 bytes):\r\n41548b05241f32004989fc554889f585c05389d37505e8f5fdffffbe6ee05300bf0300000031c0e8e4f2fbff4d89e089d94889eabe87e05300bf0300000031c0e8cbf2fbffbe08d05300bf0300000031c04c8925c01e320048892dc11e320\r\n0891dc31e3200e8a6f2fbffc60425ffffffff785b5d415cc3660f1f84000000000041544989fc55534883c4808b159b1e320085d20f84e700000031c0be38d05300bf03000000e866f2fbff418b9424a000000031c0bea2e05300bf030000\r\n0031ed31dbe849f2fbff418b54240831c0beb5e05300bf03000000e833f2fbff418b54244031c0bec5e05300bf\r\n\r\n=== REDIS BUG REPORT END. Make sure to include from START to END. ===\r\n\r\n       Please report the crash by opening an issue on github:\r\n\r\n           http://github.com/antirez/redis/issues\r\n\r\n  Suspect RAM error? Use redis-server --test-memory to verify it.\r\n\r\n30861:C 16 Jan 2024 23:22:36.207 # oO0OoO0OoO0Oo Redis is starting oO0OoO0OoO0Oo\r\n30861:C 16 Jan 2024 23:22:36.207 # Redis version=5.0.7, bits=64, commit=00000000, modified=0, pid=30861, just started\r\n30861:C 16 Jan 2024 23:22:36.207 # Configuration loaded\r\n30862:M 16 Jan 2024 23:22:36.208 * Increased maximum number of open files to 100032 (it was originally set to 65535).\r\n30862:M 16 Jan 2024 23:22:36.212 * Node configuration loaded, I'm dfb7127a87a8e2d349e7ea919df4b7783263c22e\r\n30862:M 16 Jan 2024 23:22:36.212 * Running mode=cluster, port=6379.\r\n30862:M 16 Jan 2024 23:22:36.213 # Server initialized\r\n30862:M 16 Jan 2024 23:22:36.213 # WARNING you have Transparent Huge Pages (THP) support enabled in your kernel. This will create latency and memory usage issues with Redis. To fix this iss\r\nue run the command 'echo never > /sys/kernel/mm/transparent_hugepage/enabled' as root, and add it to your /etc/rc.local in order to retain the setting after a reboot. Redis must be restarte\r\nd after THP is disabled.\r\n30862:M 16 Jan 2024 23:23:40.207 * DB loaded from disk: 63.994 seconds\r\n30862:M 16 Jan 2024 23:23:40.207 * Ready to accept connections\r\n30862:M 16 Jan 2024 23:23:40.210 # Configuration change detected. Reconfiguring myself as a replica of eba22d65b844ef980cc061c31fc6a103f1f6179c\r\n30862:S 16 Jan 2024 23:23:40.210 * Before turning into a replica, using my master parameters to synthesize a cached master: I may be able to synchronize with the new master with just a part\r\nial transfer.\r\n\r\n```",
  "state": "open",
  "created_at": "2024-01-19T09:01:55Z",
  "updated_at": "2024-01-23T02:53:03Z",
  "closed_at": null,
  "labels": [],
  "comments_data": [
    {
      "id": 1900018745,
      "user": "bluebiubluebiu",
      "created_at": "2024-01-19T09:05:12Z",
      "body": "redis_version:5.0.7\r\nredis_mode:cluster\r\nos:Linux 5.13.9-1.el7.elrepo.x86_64 x86_64\r\ngcc_version:4.8.5\r\nlinux-server: cpu 64c mem 64G\r\nredis-mem-limit: 29G"
    },
    {
      "id": 1905202487,
      "user": "enjoy-binbin",
      "created_at": "2024-01-23T02:53:02Z",
      "body": "Weird. We also specifically removed this assertion in #12177."
    }
  ]
}