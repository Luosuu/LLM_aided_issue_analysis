{
  "issue_number": 11604.0,
  "title": "[BUG]dependency errors",
  "body": "Hi，\r\n\r\nWe recently conducted a study to detect build dependency errors, focusing on missing dependencies and redundant dependencies. A missing dependency （MS） is a dependency that is not declared in the build script and a redundant dependency（RD） is a dependency that is declared in the build script that is not actually used. We have detected the following dependency errors in your public projects. Could you please help us to check these dependency errors? The data format is dependency --- target.\r\n\r\nMS\r\n0['/home/lv/WorkSpace/vmake_experiment/redis-master/deps/jemalloc/lib/libjemalloc.a---redis-benchmark']\r\n1['/home/lv/WorkSpace/vmake_experiment/redis-master/deps/hiredis/libhiredis.a---redis-benchmark']\r\n2['/home/lv/WorkSpace/vmake_experiment/redis-master/deps/hiredis/libhiredis.a---redis-server']\r\n3['/home/lv/WorkSpace/vmake_experiment/redis-master/deps/jemalloc/lib/libjemalloc.a---redis-server']\r\n4['/home/lv/WorkSpace/vmake_experiment/redis-master/deps/lua/src/liblua.a---redis-server']\r\n5['/home/lv/WorkSpace/vmake_experiment/redis-master/deps/jemalloc/lib/libjemalloc.a---redis-cli']\r\n6['/home/lv/WorkSpace/vmake_experiment/redis-master/deps/hiredis/libhiredis.a---redis-cli']\r\n7['/home/lv/WorkSpace/vmake_experiment/redis-master/deps/linenoise/linenoise.o---redis-cli']\r\n\r\nRD\r\n0['.make-prerequisites---redis-check-aof.o']\r\n1['.make-prerequisites---redis-check-rdb.o']\r\n2['.make-prerequisites---redis-benchmark.o']\r\n3['.make-prerequisites---geohash_helper.o']\r\n4['.make-prerequisites---setproctitle.o']\r\n5['.make-prerequisites---replication.o']\r\n6['.make-prerequisites---hyperloglog.o']\r\n7['.make-prerequisites---networking.o']\r\n8['.make-prerequisites---endianconv.o']\r\n9['.make-prerequisites---localtime.o']\r\n10['.make-prerequisites---childinfo.o']\r\n11['.make-prerequisites---quicklist.o']\r\n12['.make-prerequisites---redis-cli.o']\r\n13['.make-prerequisites---sparkline.o']\r\n14['.make-prerequisites---scripting.o']\r\n15['.make-prerequisites---tracking.o']\r\n16['.make-prerequisites---listpack.o']\r\n17['.make-prerequisites---t_string.o']\r\n18['.make-prerequisites---sentinel.o']\r\n19['.make-prerequisites---t_stream.o']\r\n20['.make-prerequisites---lazyfree.o']\r\n21['.make-prerequisites---geohash.o']\r\n22['.make-prerequisites---zmalloc.o']\r\n23['.make-prerequisites---siphash.o']\r\n24['.make-prerequisites---memtest.o']\r\n25['.make-prerequisites---cluster.o']\r\n26['.make-prerequisites---slowlog.o']\r\n27['.make-prerequisites---release.o']\r\n28['.make-prerequisites---lolwut5.o']\r\n29['.make-prerequisites---latency.o']\r\n30['.make-prerequisites---ziplist.o']\r\n31['.make-prerequisites---blocked.o']\r\n32['.make-prerequisites---lolwut.o']\r\n33['.make-prerequisites---object.o']\r\n34['.make-prerequisites---pqsort.o']\r\n35['.make-prerequisites---adlist.o']\r\n36['.make-prerequisites---defrag.o']\r\n37['.make-prerequisites---server.o']\r\n38['.make-prerequisites---t_zset.o']\r\n39['.make-prerequisites---module.o']\r\n40['.make-prerequisites---notify.o']\r\n41['.make-prerequisites---expire.o']\r\n42['.make-prerequisites---zipmap.o']\r\n43['.make-prerequisites---t_hash.o']\r\n44['.make-prerequisites---gopher.o']\r\n45['.make-prerequisites---t_list.o']\r\n46['.make-prerequisites---bitops.o']\r\n47['.make-prerequisites---pubsub.o']\r\n48['.make-prerequisites---intset.o']\r\n49['.make-prerequisites---config.o']\r\n50['.make-prerequisites---syncio.o']\r\n51['all---install']\r\n52['.make-prerequisites---t_set.o']\r\n53['.make-prerequisites---lzf_c.o']\r\n54['.make-prerequisites---multi.o']\r\n55['.make-prerequisites---lzf_d.o']\r\n56['.make-prerequisites---debug.o']\r\n57['.make-prerequisites---crc64.o']\r\n58['.make-prerequisites---crc16.o']\r\n59['.make-prerequisites---evict.o']\r\n60['.make-prerequisites---rand.o']\r\n61['.make-prerequisites---anet.o']\r\n62['.make-prerequisites---sha1.o']\r\n63['.make-prerequisites---sort.o']\r\n64['.make-prerequisites---dict.o']\r\n65['.make-prerequisites---util.o']\r\n66['.make-prerequisites---aof.o']\r\n67['.make-prerequisites---bio.o']\r\n68['.make-prerequisites---rio.o']\r\n69['.make-prerequisites---geo.o']\r\n70['.make-prerequisites---rdb.o']\r\n71['.make-prerequisites---rax.o']\r\n72['.make-prerequisites---sds.o']\r\n73['.make-prerequisites---acl.o']\r\n74['.make-prerequisites---ae.o']\r\n75['.make-prerequisites---db.o']\r\n",
  "state": "closed",
  "created_at": "2022-12-09T07:16:37Z",
  "updated_at": "2023-11-24T08:22:29Z",
  "closed_at": "2023-11-24T08:22:29Z",
  "labels": [
    "state:to-be-closed"
  ],
  "comments_data": [
    {
      "id": 1344607828,
      "user": "madolson",
      "created_at": "2022-12-09T18:06:03Z",
      "body": "I'm not entirely sure how these were generated. All of the `.make-prerequisites` are not real issues, for reasons described in the Makefile. The missing dependencies are all from the sub dependency folders. The last one, \"all install\" also seems fine. Since install is a build convenience build action.\r\n\r\nI don't think any of these are issues."
    },
    {
      "id": 1344979706,
      "user": "Meiye-lj",
      "created_at": "2022-12-10T02:09:54Z",
      "body": "Hi，thanks for your feedback\nIn MAKE dependencies, practitioners are used to declaring incomplete dependencies (e.g., missing header files). This phenomenon is very common and easy to be overlooked. However, incomplete build declarations can lead to incorrect and inefficient builds, or the builds that seem correct but contain incorrect parts and difficult to debug when errors occur (incorrect incremental builds). Our study hopes to help practitioners detect this dependency problems. \nWe have run our methods in your project to detect these dependency problems, and hope to get your check. If there is anything unclear, I would be happy to provide more information.\n\n--------------------------------\n\n\n----- 原始邮件 -----\n发件人：Madelyn Olson ***@***.***>\n收件人：redis/redis ***@***.***>\n抄送人：Meiye-lj ***@***.***>,  Author ***@***.***>\n主题：Re: [redis/redis] [BUG]dependency errors (Issue #11604)\n日期：2022年12月10日 02点06分\n\n\r\nI'm not entirely sure how these were generated. All of the .make-prerequisites are not real issues, for reasons described in the Makefile. The missing dependencies are all from the sub dependency folders. The last one, \"all install\" also seems fine. Since install is a build convenience build action.\r\nI don't think any of these are issues.\r\n\r\n—\nReply to this email directly, view it on GitHub, or unsubscribe.\nYou are receiving this because you authored the thread.Message ID: ***@***.***>"
    },
    {
      "id": 1352375066,
      "user": "madolson",
      "created_at": "2022-12-14T23:57:28Z",
      "body": "Hi yes, I don't think any of these are real dependency issues. It looks like the way we structure our makefile is probably suboptimal and makes the static analysis report a false positive."
    }
  ]
}