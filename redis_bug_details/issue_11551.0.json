{
  "issue_number": 11551.0,
  "title": "[CRASH] Redis sentinel crash on inserting json",
  "body": "Notice!\r\n- If a Redis module was involved, please open an issue in the module's repo instead!\r\n- If you're using docker on Apple M1, please make sure the image you're using was compiled for ARM!\r\n\r\nMy use case: \r\nI'm running a redis sentinel on k8s deployment (using redis-ha template). I compiled the Redis-JSOn and Redisearch modules manually inside the docker image (redis version - 6.2.7)\r\n\r\n\r\n**Crash report**\r\n\r\nPaste the complete crash log between the quotes below. Please include a few lines from the log preceding the crash report to provide some context.\r\n\r\n```\r\nCrash report:\r\n1:M 27 Nov 2022 11:59:34.830 # Redis 6.2.7 crashed by signal: 11, si_code: 128\r\n1:M 27 Nov 2022 11:59:34.830 # Accessing address: (nil)\r\n1:M 27 Nov 2022 11:59:34.830 # Crashed running the instruction at: 0x7f5f86415602\r\n\r\n------ STACK TRACE ------\r\nEIP:\r\n/lib/x86_64-linux-gnu/libc.so.6(abort+0x1ee)[0x7f5f86415602]\r\n\r\nBacktrace:\r\n/lib/x86_64-linux-gnu/libpthread.so.0(+0x13140)[0x7f5f865db140]\r\n/lib/x86_64-linux-gnu/libc.so.6(abort+0x1ee)[0x7f5f86415602]\r\n/usr/lib/redis/modules/rejson.so(+0x11d507)[0x7f5f8636b507]\r\n/usr/lib/redis/modules/rejson.so(+0x11b80e)[0x7f5f8636980e]\r\n/usr/lib/redis/modules/rejson.so(+0x11b5a7)[0x7f5f863695a7]\r\n/usr/lib/redis/modules/rejson.so(+0x11b359)[0x7f5f86369359]\r\n/usr/lib/redis/modules/rejson.so(+0x11a264)[0x7f5f86368264]\r\n/usr/lib/redis/modules/rejson.so(+0x11b0c9)[0x7f5f863690c9]\r\n/usr/lib/redis/modules/rejson.so(+0x17b43)[0x7f5f86265b43]\r\n/usr/lib/redis/modules/rejson.so(+0x17a0d)[0x7f5f86265a0d]\r\n/usr/lib/redis/modules/rejson.so(+0xcb9a2)[0x7f5f863199a2]\r\n/usr/lib/redis/modules/rejson.so(JSONAPI_getDouble+0x54)[0x7f5f862ad934]\r\n/usr/lib/redis/modules/redisearch.so(JSON_StoreNumericInDocField+0xd4)[0x7f5f856e8354]\r\n/usr/lib/redis/modules/redisearch.so(JSON_StoreNumericInDocFieldFromArr+0x47)[0x7f5f856e84c7]\r\n/usr/lib/redis/modules/redisearch.so(JSON_LoadDocumentField+0x97)[0x7f5f856e8987]\r\n/usr/lib/redis/modules/redisearch.so(Document_LoadSchemaFieldJson+0x116)[0x7f5f856d1596]\r\n/usr/lib/redis/modules/redisearch.so(IndexSpec_UpdateDoc+0x188)[0x7f5f8570dbc8]\r\n/usr/lib/redis/modules/redisearch.so(Indexes_UpdateMatchingWithSchemaRules+0x94)[0x7f5f8570e1d4]\r\n/usr/lib/redis/modules/redisearch.so(HashNotificationCallback+0x182)[0x7f5f856ed972]\r\nredis-server *:6379(moduleNotifyKeyspaceEvent+0xce)[0x56329dadadbe]\r\nredis-server *:6379(notifyKeyspaceEvent+0x21)[0x56329dac7691]\r\nredis-server *:6379(RM_NotifyKeyspaceEvent+0x2f)[0x56329dad1bdf]\r\n/usr/lib/redis/modules/rejson.so(+0xd8e40)[0x7f5f86326e40]\r\n/usr/lib/redis/modules/rejson.so(+0x377f8)[0x7f5f862857f8]\r\n/usr/lib/redis/modules/rejson.so(+0x620a7)[0x7f5f862b00a7]\r\nredis-server *:6379(RedisModuleCommandDispatcher+0x53)[0x56329dad8b73]\r\nredis-server *:6379(call+0xdb)[0x56329da4d25b]\r\nredis-server *:6379(processCommand+0x5a3)[0x56329da4ee73]\r\nredis-server *:6379(processInputBuffer+0xf8)[0x56329da62668]\r\nredis-server *:6379(+0xfc458)[0x56329dafa458]\r\nredis-server *:6379(aeProcessEvents+0x292)[0x56329da45e32]\r\nredis-server *:6379(aeMain+0x1d)[0x56329da4609d]\r\nredis-server *:6379(main+0x316)[0x56329da422b6]\r\n/lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xea)[0x7f5f86416d0a]\r\nredis-server *:6379(_start+0x2a)[0x56329da4278a]\r\n\r\n------ REGISTERS ------\r\n1:M 27 Nov 2022 11:59:34.831 #\r\nRAX:0000000000000000 RBX:00007f5f863eef80\r\nRCX:00007f5f8642bce1 RDX:0000000000000000\r\nRDI:0000000000000002 RSI:00007ffc2f621080\r\nRBP:00007f5f863ec1d8 RSP:00007ffc2f6211a0\r\nR8 :0000000000000000 R9 :00007ffc2f621080\r\nR10:0000000000000008 R11:0000000000000246\r\nR12:0000000000000001 R13:0000000000000000\r\nR14:00007f5f863e8d08 R15:00007ffc2f621450\r\nRIP:00007f5f86415602 EFL:0000000000010246\r\nCSGSFS:002b000000000033\r\n1:M 27 Nov 2022 11:59:34.831 # (00007ffc2f6211af) -> 0000000000000000\r\n1:M 27 Nov 2022 11:59:34.831 # (00007ffc2f6211ae) -> 0000000000000000\r\n1:M 27 Nov 2022 11:59:34.831 # (00007ffc2f6211ad) -> 0000000000000000\r\n1:M 27 Nov 2022 11:59:34.831 # (00007ffc2f6211ac) -> 0000000000000000\r\n1:M 27 Nov 2022 11:59:34.831 # (00007ffc2f6211ab) -> 0000000000000000\r\n1:M 27 Nov 2022 11:59:34.831 # (00007ffc2f6211aa) -> 0000000000000000\r\n1:M 27 Nov 2022 11:59:34.831 # (00007ffc2f6211a9) -> 0000000000000000\r\n1:M 27 Nov 2022 11:59:34.831 # (00007ffc2f6211a8) -> 0000000000000000\r\n1:M 27 Nov 2022 11:59:34.831 # (00007ffc2f6211a7) -> 0000000000000000\r\n1:M 27 Nov 2022 11:59:34.831 # (00007ffc2f6211a6) -> 0000000000000000\r\n1:M 27 Nov 2022 11:59:34.831 # (00007ffc2f6211a5) -> 0000000000000000\r\n1:M 27 Nov 2022 11:59:34.831 # (00007ffc2f6211a4) -> 0000000000000000\r\n1:M 27 Nov 2022 11:59:34.831 # (00007ffc2f6211a3) -> 0000000000000000\r\n1:M 27 Nov 2022 11:59:34.831 # (00007ffc2f6211a2) -> 0000000000000000\r\n1:M 27 Nov 2022 11:59:34.831 # (00007ffc2f6211a1) -> 0000000000000000\r\n1:M 27 Nov 2022 11:59:34.831 # (00007ffc2f6211a0) -> 0000000000000020\r\n\r\n------ INFO OUTPUT ------\r\n# Server\r\nredis_version:6.2.7\r\nredis_git_sha1:00000000\r\nredis_git_dirty:0\r\nredis_build_id:5c01bc25f716fa59\r\nredis_mode:standalone\r\nos:Linux 5.4.188-104.359.amzn2.x86_64 x86_64\r\narch_bits:64\r\nmonotonic_clock:POSIX clock_gettime\r\nmultiplexing_api:epoll\r\natomicvar_api:c11-builtin\r\ngcc_version:10.2.1\r\nprocess_id:1\r\nprocess_supervised:no\r\nrun_id:be6d08234f988c639cc05ce92769d03fbaa17353\r\ntcp_port:6379\r\nserver_time_usec:1669550374131065\r\nuptime_in_seconds:287\r\nuptime_in_days:0\r\nhz:10\r\nconfigured_hz:10\r\nlru_clock:8605990\r\nexecutable:/data/redis-server\r\nconfig_file:/data/conf/redis.conf\r\nio_threads_active:0\r\n\r\n# Clients\r\nconnected_clients:7\r\ncluster_connections:0\r\nmaxclients:10000\r\nclient_recent_max_input_buffer:48\r\nclient_recent_max_output_buffer:0\r\nblocked_clients:0\r\ntracking_clients:1\r\nclients_in_timeout_table:0\r\n\r\n# Memory\r\nused_memory:7478400\r\nused_memory_human:7.13M\r\nused_memory_rss:9363456\r\nused_memory_rss_human:8.93M\r\nused_memory_peak:7478400\r\nused_memory_peak_human:7.13M\r\nused_memory_peak_perc:257.37%\r\nused_memory_overhead:2144704\r\nused_memory_startup:907064\r\nused_memory_dataset:5333696\r\nused_memory_dataset_perc:81.17%\r\nallocator_allocated:3251360\r\nallocator_active:3706880\r\nallocator_resident:6549504\r\ntotal_system_memory:16591826944\r\ntotal_system_memory_human:15.45G\r\nused_memory_lua:32768\r\nused_memory_lua_human:32.00K\r\nused_memory_scripts:0\r\nused_memory_scripts_human:0B\r\nnumber_of_cached_scripts:0\r\nmaxmemory:524288000\r\nmaxmemory_human:500.00M\r\nmaxmemory_policy:allkeys-lru\r\nallocator_frag_ratio:1.14\r\nallocator_frag_bytes:455520\r\nallocator_rss_ratio:1.77\r\nallocator_rss_bytes:2842624\r\nrss_overhead_ratio:1.43\r\nrss_overhead_bytes:2813952\r\nmem_fragmentation_ratio:3.43\r\nmem_fragmentation_bytes:6634944\r\nmem_not_counted_for_evict:0\r\nmem_replication_backlog:1048576\r\nmem_clients_slaves:41024\r\nmem_clients_normal:143544\r\nmem_aof_buffer:0\r\nmem_allocator:jemalloc-5.1.0\r\nactive_defrag_running:0\r\nlazyfree_pending_objects:0\r\nlazyfreed_objects:0\r\n\r\n# Persistence\r\nloading:0\r\ncurrent_cow_size:0\r\ncurrent_cow_size_age:0\r\ncurrent_fork_perc:0.00\r\ncurrent_save_keys_processed:0\r\ncurrent_save_keys_total:0\r\nrdb_changes_since_last_save:44\r\nrdb_bgsave_in_progress:0\r\nrdb_last_save_time:1669550087\r\nrdb_last_bgsave_status:ok\r\nrdb_last_bgsave_time_sec:0\r\nrdb_current_bgsave_time_sec:-1\r\nrdb_last_cow_size:802816\r\naof_enabled:0\r\naof_rewrite_in_progress:0\r\naof_rewrite_scheduled:0\r\naof_last_rewrite_time_sec:-1\r\naof_current_rewrite_time_sec:-1\r\naof_last_bgrewrite_status:ok\r\naof_last_write_status:ok\r\naof_last_cow_size:0\r\nmodule_fork_in_progress:0\r\nmodule_fork_last_cow_size:0\r\n\r\n# Stats\r\ntotal_connections_received:53\r\ntotal_commands_processed:1900\r\ninstantaneous_ops_per_sec:7\r\ntotal_net_input_bytes:281423\r\ntotal_net_output_bytes:1151059\r\ninstantaneous_input_kbps:1.17\r\ninstantaneous_output_kbps:11.28\r\nrejected_connections:0\r\nsync_full:1\r\nsync_partial_ok:1\r\nsync_partial_err:1\r\nexpired_keys:0\r\nexpired_stale_perc:0.00\r\nexpired_time_cap_reached_count:0\r\nexpire_cycle_cpu_milliseconds:2\r\nevicted_keys:0\r\nkeyspace_hits:467\r\nkeyspace_misses:0\r\npubsub_channels:1\r\npubsub_patterns:0\r\nlatest_fork_usec:3589\r\ntotal_forks:1\r\nmigrate_cached_sockets:0\r\nslave_expires_tracked_keys:0\r\nactive_defrag_hits:0\r\nactive_defrag_misses:0\r\nactive_defrag_key_hits:0\r\nactive_defrag_key_misses:0\r\ntracking_total_keys:0\r\ntracking_total_items:0\r\ntracking_total_prefixes:0\r\nunexpected_error_replies:0\r\ntotal_error_replies:0\r\ndump_payload_sanitizations:0\r\ntotal_reads_processed:1825\r\ntotal_writes_processed:3650\r\nio_threaded_reads_processed:0\r\nio_threaded_writes_processed:0\r\n\r\n# Replication\r\nrole:master\r\nconnected_slaves:2\r\nmin_slaves_good_slaves:2\r\nslave0:ip=172.20.22.22,port=6379,state=online,offset=417834,lag=1\r\nslave1:ip=172.20.106.249,port=6379,state=online,offset=417834,lag=1\r\nmaster_failover_state:no-failover\r\nmaster_replid:13d6627d6df24c5774705a7e72d26e0cad9e26a5\r\nmaster_replid2:6079001e182c6db127c9f96696a3fa218c49a8f8\r\nmaster_repl_offset:417975\r\nsecond_repl_offset:350215\r\nrepl_backlog_active:1\r\nrepl_backlog_size:1048576\r\nrepl_backlog_first_byte_offset:291531\r\nrepl_backlog_histlen:126445\r\n\r\n# CPU\r\nused_cpu_sys:0.385586\r\nused_cpu_user:0.802771\r\nused_cpu_sys_children:0.000000\r\nused_cpu_user_children:0.003900\r\nused_cpu_sys_main_thread:0.378645\r\nused_cpu_user_main_thread:0.800034\r\n\r\n# Modules\r\nmodule:name=ReJSON,ver=999999,api=1,filters=0,usedby=[search],using=[],options=[handle-io-errors]\r\nmodule:name=search,ver=999999,api=1,filters=0,usedby=[],using=[ReJSON],options=[handle-io-errors]\r\n\r\n# Commandstats\r\ncmdstat_multi:calls=2,usec=2,usec_per_call=1.00,rejected_calls=0,failed_calls=0\r\ncmdstat_hello:calls=1,usec=8,usec_per_call=8.00,rejected_calls=0,failed_calls=0\r\ncmdstat_subscribe:calls=12,usec=42,usec_per_call=3.50,rejected_calls=0,failed_calls=0\r\ncmdstat_info:calls=116,usec=20386,usec_per_call=175.74,rejected_calls=0,failed_calls=0\r\ncmdstat_replconf:calls=242,usec=579,usec_per_call=2.39,rejected_calls=0,failed_calls=0\r\ncmdstat_client:calls=27,usec=321,usec_per_call=11.89,rejected_calls=0,failed_calls=0\r\ncmdstat_role:calls=1,usec=4,usec_per_call=4.00,rejected_calls=0,failed_calls=0\r\ncmdstat_select:calls=1,usec=2,usec_per_call=2.00,rejected_calls=0,failed_calls=0\r\ncmdstat_slaveof:calls=2,usec=2529,usec_per_call=1264.50,rejected_calls=0,failed_calls=0\r\ncmdstat_publish:calls=595,usec=5059,usec_per_call=8.50,rejected_calls=0,failed_calls=0\r\ncmdstat_FT.SEARCH:calls=8,usec=3333,usec_per_call=416.62,rejected_calls=0,failed_calls=0\r\ncmdstat_json.set:calls=44,usec=13200,usec_per_call=300.00,rejected_calls=0,failed_calls=0\r\ncmdstat_psync:calls=2,usec=354,usec_per_call=177.00,rejected_calls=0,failed_calls=0\r\ncmdstat_ping:calls=843,usec=1102,usec_per_call=1.31,rejected_calls=0,failed_calls=0\r\ncmdstat_exec:calls=2,usec=8821,usec_per_call=4410.50,rejected_calls=0,failed_calls=0\r\ncmdstat_config:calls=2,usec=6003,usec_per_call=3001.50,rejected_calls=0,failed_calls=0\r\n\r\n# Errorstats\r\n\r\n# Cluster\r\ncluster_enabled:0\r\n\r\n# Keyspace\r\ndb0:keys=86,expires=0,avg_ttl=0\r\n\r\n------ CLIENT LIST OUTPUT ------\r\nid=46 addr=10.104.48.136:60276 laddr=10.104.74.148:6379 fd=10 name= age=143 idle=1 flags=S db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 argv-mem=0 obl=0 oll=0 omem=0 tot-mem=20512 events=r cmd=replconf user=default redir=-1\r\nid=47 addr=10.104.93.248:7239 laddr=10.104.74.148:6379 fd=11 name=sentinel-ad403180-cmd age=143 idle=1 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 argv-mem=0 obl=0 oll=0 omem=0 tot-mem=20496 events=r cmd=ping user=default redir=-1\r\nid=53 addr=10.104.48.136:60346 laddr=10.104.74.148:6379 fd=9 name=sentinel-0aca95b2-cmd age=142 idle=1 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 argv-mem=0 obl=0 oll=0 omem=0 tot-mem=20512 events=r cmd=publish user=default redir=-1\r\nid=54 addr=10.104.48.136:60348 laddr=10.104.74.148:6379 fd=15 name=sentinel-0aca95b2-pubsub age=142 idle=1 flags=P db=0 sub=1 psub=0 multi=-1 qbuf=0 qbuf-free=0 argv-mem=0 obl=0 oll=0 omem=0 tot-mem=20504 events=r cmd=subscribe user=default redir=-1\r\nid=48 addr=10.104.93.248:63079 laddr=10.104.74.148:6379 fd=12 name=sentinel-ad403180-pubsub age=143 idle=1 flags=P db=0 sub=1 psub=0 multi=-1 qbuf=0 qbuf-free=0 argv-mem=0 obl=0 oll=0 omem=0 tot-mem=20504 events=r cmd=subscribe user=default redir=-1\r\nid=49 addr=10.104.11.106:52576 laddr=10.104.74.148:6379 fd=13 name=sentinel-5cc9c773-cmd age=142 idle=1 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 argv-mem=0 obl=0 oll=0 omem=0 tot-mem=20496 events=r cmd=ping user=default redir=-1\r\nid=60 addr=10.104.11.106:54204 laddr=10.104.74.148:6379 fd=16 name= age=100 idle=1 flags=S db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 argv-mem=0 obl=0 oll=0 omem=0 tot-mem=20512 events=r cmd=replconf user=default redir=-1\r\nid=50 addr=10.104.11.106:52578 laddr=10.104.74.148:6379 fd=14 name=sentinel-5cc9c773-pubsub age=142 idle=1 flags=P db=0 sub=1 psub=0 multi=-1 qbuf=0 qbuf-free=0 argv-mem=0 obl=0 oll=0 omem=0 tot-mem=20504 events=r cmd=subscribe user=default redir=-1\r\nid=52 addr=10.104.11.249:42322 laddr=10.104.74.148:6379 fd=8 name= age=142 idle=0 flags=t db=0 sub=0 psub=0 multi=-1 qbuf=1676 qbuf-free=39278 argv-mem=1643 obl=0 oll=0 omem=0 tot-mem=63115 events=r cmd=json.set user=default redir=0\r\n\r\n------ CURRENT CLIENT INFO ------\r\nid=52 addr=10.104.11.249:42322 laddr=10.104.74.148:6379 fd=8 name= age=142 idle=0 flags=t db=0 sub=0 psub=0 multi=-1 qbuf=1676 qbuf-free=39278 argv-mem=1643 obl=0 oll=0 omem=0 tot-mem=63115 events=r cmd=json.set user=default redir=0\r\nargv[0]: 'JSON.SET'\r\nargv[1]: 'cd4ce37e-181a-6344-353e-20254797b3f1:cd9917280304620424f59afc546b04dcaafe1db3862a61fd1be62bb0181669ac'\r\nargv[2]: '$'\r\nargv[3]: '{\"assetIDReversible\":\"YXNzZXQ7Ozt3b3JrbG9hZDs7O2Nsb3VkOzs7YXdzOzs7Y2xvdWROZXR3b3JrOzs7Ozs7Ozs7eyJhY2NvdW50IjoiNDA2NDA2MTU1ODYzIiwiYWNjb3VudEdyb3VwTmFtZSI6IlVOU1BFQ0lGSUVEIiwiaWQiOiJ2cGMtMGI1NTc2ZDBlNGJjOWViZGQiLCJyZWdpb24iOiJ1cy1lYXN0LTEifQ\\\\=\\\\=\",\"assetId\":\"cd9917280304620424f59afc546b04dcaafe1db3862a61fd1be62bb0181669ac\",\"assetType\":\"workload\\\\-cloud\\\\-aws\\\\-cloudNetwork\",\"assetTypeSchemaVersion\":1,\"attributes\":{\"aggregatedTags\":{\"Name\":[\"omribar\\\\-ipv6\\\\-vpc\"]},\"cidrs\":[\"10\\\\.0\\\\.0\\\\.0/16\"],\"geoLocation\":\"America\",\"ipv4AddressesRange\":[{\"max\":\"10\\\\.0\\\\.255\\\\.255\",\"min\":\"10\\\\.0\\\\.0\\\\.0\"}],\"ipv4RangeMaxNumeric\":[167837695],\"ipv4RangeMinNumeric\":[167772160],\"ipv6AddressesRange\":[{\"max\":\"2600\\\\:1f18\\\\:15d0\\\\:c3ff\\\\:ffff\\\\:ffff\\\\:ffff\\\\:ffff\",\"min\":\"2600\\\\:1f18\\\\:15d0\\\\:c300\\\\:\\\\:\"}],\"ipv6RangeMaxNumericHigh\":[-6485149275107835000],\"ipv6RangeMaxNumericLow\":[9223372036854776000],\"ipv6RangeMinNumericHigh\":[-6485149275107835000],\"ipv6RangeMinNumericLow\":[-9223372036854776000],\"v6CIDRs\":[\"2600\\\\:1f18\\\\:11:M 27 Nov 2022 11:59:34.832 # key 'cd4ce37e-181a-6344-353e-20254797b3f1:cd9917280304620424f59afc546b04dcaafe1db3862a61fd1be62bb0181669ac' found in DB containing the following object:\r\n1:M 27 Nov 2022 11:59:34.832 # Object type: 5\r\n1:M 27 Nov 2022 11:59:34.832 # Object encoding: 0\r\n1:M 27 Nov 2022 11:59:34.832 # Object refcount: 1\r\n\r\n------ MODULES INFO OUTPUT ------\r\n# ReJSON_trace\r\nReJSON_trace:   0: redis_module::base_info_func\r\n   1: rejson::__info_func\r\n   2: modulesCollectInfo\r\n             at /usr/src/redis/src/module.c:7100:9\r\n   3: logModulesInfo\r\n             at /usr/src/redis/src/debug.c:1598:22\r\n   4: printCrashReport\r\n             at /usr/src/redis/src/debug.c:1849:5\r\n      sigsegvHandler\r\n             at /usr/src/redis/src/debug.c:1831:5\r\n   5: <unknown>\r\n   6: abort\r\n   7: std::sys::unix::abort_internal\r\n   8: rust_panic\r\n   9: std::panicking::rust_panic_with_hook\r\n  10: std::panicking::begin_panic_handler::{{closure}}\r\n  11: std::sys_common::backtrace::__rust_end_short_backtrace\r\n  12: rust_begin_unwind\r\n  13: core::panicking::panic_fmt\r\n  14: core::panicking::panic\r\n  15: jsonpath_lib::select::json_node::<impl jsonpath_lib::select::select_value::SelectValue for ijson::value::IValue>::get_long\r\n  16: JSONAPI_getDouble\r\n  17: JSON_StoreNumericInDocField\r\n  18: JSON_StoreNumericInDocFieldFromArr\r\n  19: JSON_LoadDocumentField\r\n  20: Document_LoadSchemaFieldJson\r\n  21: IndexSpec_UpdateDoc\r\n  22: Indexes_UpdateMatchingWithSchemaRules\r\n  23: HashNotificationCallback\r\n  24: moduleNotifyKeyspaceEvent\r\n             at /usr/src/redis/src/module.c:5983:13\r\n  25: notifyKeyspaceEvent\r\n             at /usr/src/redis/src/notify.c:111:6\r\n  26: RM_NotifyKeyspaceEvent\r\n             at /usr/src/redis/src/module.c:5951:5\r\n  27: redis_module::raw::notify_keyspace_event\r\n  28: rejson::commands::json_set\r\n  29: rejson::RedisModule_OnLoad::__do_command\r\n  30: RedisModuleCommandDispatcher\r\n             at /usr/src/redis/src/module.c:695:5\r\n  31: call\r\n             at /usr/src/redis/src/server.c:3744:5\r\n  32: processCommand\r\n             at /usr/src/redis/src/server.c:4291:9\r\n  33: processCommandAndResetClient\r\n             at /usr/src/redis/src/networking.c:2102:9\r\n      processInputBuffer\r\n             at /usr/src/redis/src/networking.c:2203:17\r\n  34: callHandler\r\n             at /usr/src/redis/src/connhelpers.h:79:18\r\n      connSocketEventHandler\r\n             at /usr/src/redis/src/connection.c:295:14\r\n  35: aeProcessEvents\r\n             at /usr/src/redis/src/ae.c:427:17\r\n  36: aeMain\r\n             at /usr/src/redis/src/ae.c:487:9\r\n  37: main\r\n             at /usr/src/redis/src/server.c:6456:5\r\n  38: __libc_start_main\r\n  39: _start\r\n\r\n\r\n# search_version\r\nsearch_RedisSearch_version:6.2.7\r\n\r\n# search_index\r\nsearch_number_of_indexes:1\r\n\r\n# search_fields_statistics\r\nsearch_fields_text:Text=19,Sortable=19\r\nsearch_fields_numeric:Numeric=9,Sortable=9\r\n\r\n# search_runtime_configurations\r\nsearch_concurrent_mode:OFF\r\nsearch_enableGC:ON\r\nsearch_minimal_term_prefix:2\r\nsearch_maximal_prefix_expansions:200\r\nsearch_query_timeout_ms:500\r\nsearch_timeout_policy:return\r\nsearch_cursor_read_size:1000\r\nsearch_cursor_max_idle_time:300000\r\nsearch_max_doc_table_size:1000000\r\nsearch_max_search_results:1000000\r\nsearch_max_aggregate_results:-1\r\nsearch_search_pool_size:20\r\nsearch_index_pool_size:8\r\nsearch_gc_scan_size:100\r\nsearch_min_phonetic_term_length:3\r\n\r\n------ FAST MEMORY TEST ------\r\n*** Preparing to test memory region 56329dc12000 (2281472 bytes)\r\n*** Preparing to test memory region 56329e8a5000 (405504 bytes)\r\n*** Preparing to test memory region 7f5f79080000 (9961472 bytes)\r\n*** Preparing to test memory region 7f5f79b23000 (3145728 bytes)\r\n*** Preparing to test memory region 7f5f7abff000 (10485760 bytes)\r\n*** Preparing to test memory region 7f5f7b600000 (10485760 bytes)\r\n*** Preparing to test memory region 7f5f7c000000 (135168 bytes)\r\n*** Preparing to test memory region 7f5f80000000 (6291456 bytes)\r\n*** Preparing to test memory region 7f5f80800000 (10485760 bytes)\r\n*** Preparing to test memory region 7f5f81200000 (4194304 bytes)\r\n*** Preparing to test memory region 7f5f8172b000 (2621440 bytes)\r\n*** Preparing to test memory region 7f5f819ac000 (10485760 bytes)\r\n*** Preparing to test memory region 7f5f823ad000 (10485760 bytes)\r\n*** Preparing to test memory region 7f5f82dae000 (10485760 bytes)\r\n*** Preparing to test memory region 7f5f837af000 (10485760 bytes)\r\n*** Preparing to test memory region 7f5f841b0000 (10485760 bytes)\r\n*** Preparing to test memory region 7f5f84bb1000 (10485760 bytes)\r\n*** Preparing to test memory region 7f5f859f9000 (28672 bytes)\r\n*** Preparing to test memory region 7f5f85a00000 (8388608 bytes)\r\n*** Preparing to test memory region 7f5f863ed000 (24576 bytes)\r\n*** Preparing to test memory region 7f5f865c4000 (16384 bytes)\r\n*** Preparing to test memory region 7f5f865e6000 (16384 bytes)\r\n*** Preparing to test memory region 7f5f868da000 (16384 bytes)\r\n*** Preparing to test memory region 7f5f86abb000 (8192 bytes)\r\n*** Preparing to test memory region 7f5f86aeb000 (4096 bytes)\r\n.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O\r\nFast memory test PASSED, however your memory can still be broken. Please run a memory test for several hours if possible.\r\n\r\n------ DUMPING CODE AROUND EIP ------\r\nSymbol: abort (base: 0x7f5f86415414)\r\nModule: /lib/x86_64-linux-gnu/libc.so.6 (base 0x7f5f863f3000)\r\n$ xxd -r -p /tmp/dump.hex /tmp/dump.bin\r\n$ objdump --adjust-vma=0x7f5f86415414 -D -b binary -m i386:x86-64 /tmp/dump.bin\r\n------\r\n1:M 27 Nov 2022 11:59:35.243 # dump of function (hexdump of 622 bytes):\r\n5364488b1c25100000004881ec2001000064488b042528000000488984241801000031c048391d79e91a00743e648b04251800000085c0750eba010000000fb11557e91a00eb1d31c0ba01000000f00fb11546e91a00740c488d3d3de91a00e8c8f8050048891d39e91a00ff052fe91a00833d34e91a00007532488d542408b91e00000031c04889e64889d731d2c70514e91a0001000000f3abbf0100000048c7042420000000e8c06a01008b05fae81a0083f8010f85c0000000c705e7e81a00000000008b05d5e81a00ffc88905cde81a00754448c705c4e81a0000000000648b14251800000085d27508ff0daae81a00eb258705a2e81a00ffc87e1b4531d2ba01000000be81000000b8ca000000488d3d85e81a000f05bf06000000e86966010064488b1c251000000048391d71e81a00743e648b04251800000085c0750eba010000000fb1154fe81a00eb1d31c0ba01000000f00fb1153ee81a00740c488d3d35e81a00e8c0f7050048891d31e81a00ff0527e81a00eb0583f802753e488db4248000000031c0b926000000c70513e81a0003000000488d9424880000004889f7f3ab4889d7b980000000b0fff3aa31d2bf06000000e87e690100833de7e71a00037514c705dbe71a0004000000bf06000000e8b1650100833dcae71a0004750bc705bee71a0005000000f4833db6e71a00057514c705aae71a0006000000bf7f000000e8106a0a00f4ebfde8ecfdffffe8e7fdffffe8e2fdffffe8ddfdffffe8d8fdffffe8d3fdffffe8cefdffffe8c9fdffffe8c4fdffffe8bffdffffe8bafdffffe8b5fdffffe8b0fdffffe8abfdffffe8a6fdffffe8a1fdffffe89cfdffffe897fdfffff745000080\r\nFunction at 0x7f5f8642bf80 is sigprocmask\r\nFunction at 0x7f5f864154f1 is abort\r\nFunction at 0x7f5f8641550c is abort\r\nFunction at 0x7f5f8642bba0 is gsignal\r\nFunction at 0x7f5f8642bf50 is sigaction\r\nFunction at 0x7f5f864bc030 is _exit\r\nFunction at 0x7f5f86415414 is abort\r\n\r\n=== REDIS BUG REPORT END. Make sure to include from START to END. ===\r\n\r\n```\r\n\r\n**Additional information**\r\n1. Running Redis sentinel (version 6.2.7) with a k8s stateful set with Redis-JSON and Redisearch which were compiled in the docker image.\r\n2. Os  - linux\r\n",
  "state": "closed",
  "created_at": "2022-11-27T12:14:12Z",
  "updated_at": "2022-11-27T13:23:37Z",
  "closed_at": "2022-11-27T12:43:42Z",
  "labels": [],
  "comments_data": [
    {
      "id": 1328239130,
      "user": "oranagra",
      "created_at": "2022-11-27T12:43:42Z",
      "body": "@nadavtsa please report in https://github.com/RedisJSON/RedisJSON/issues"
    },
    {
      "id": 1328246128,
      "user": "nadavtsa",
      "created_at": "2022-11-27T13:23:37Z",
      "body": "@oranagra done - https://github.com/RedisJSON/RedisJSON/issues/875\r\n"
    }
  ]
}