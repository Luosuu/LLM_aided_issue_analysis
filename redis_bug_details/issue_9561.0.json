{
  "issue_number": 9561.0,
  "title": "[BUG]  There is an error on redis:6.0 using docker on Mac M1 ",
  "body": "**Describe the bug**\r\n\r\nThere is an error on redis:6.0 using docker on Mac M1 (8gb RAM for docker)\r\n\r\n**To reproduce**\r\n\r\nStart docker container, run application writting/reading redis db. \r\nSee redis crashed, lsee redis logs.\r\n\r\n**Expected behavior**\r\n\r\nNo Redis crash should be\r\n\r\n**Additional information**\r\n\r\nredis           | === REDIS BUG REPORT START: Cut & paste starting from here ===\r\nredis           | 1:M 29 Sep 2021 10:44:10.559 # Redis 6.0.15 crashed by signal: 11, si_code: 1\r\nredis           | 1:M 29 Sep 2021 10:44:10.560 # Crashed running the instruction at: 0x4000042dab\r\nredis           | 1:M 29 Sep 2021 10:44:10.560 # Accessing address: 0x3a226c6562616c\r\nredis           | 1:M 29 Sep 2021 10:44:10.560 # Failed assertion: <no assertion failed> (<no file>:0)\r\nredis           |\r\nredis           | ------ STACK TRACE ------\r\nredis           | EIP:\r\nredis           | /usr/local/bin/redis-server *:6379(dictAddRaw+0xcb)[0x4000042dab]\r\nredis           |\r\nredis           | Backtrace:\r\nredis           | /usr/local/bin/redis-server *:6379(logStackTrace+0x32)[0x400008d3c2]\r\nredis           | /usr/local/bin/redis-server *:6379(sigsegvHandler+0xb0)[0x400008dad0]\r\nredis           | /lib/x86_64-linux-gnu/libpthread.so.0(+0x12730)[0x4002158730]\r\nredis           | /usr/local/bin/redis-server *:6379(dictAddRaw+0xcb)[0x4000042dab]\r\nredis           | /usr/local/bin/redis-server *:6379(setTypeAdd+0xd8)[0x4000074c58]\r\nredis           | /usr/local/bin/redis-server *:6379(saddCommand+0x65)[0x4000074d85]\r\nredis           | /usr/local/bin/redis-server *:6379(call+0xaa)[0x400004735a]\r\nredis           | /usr/local/bin/redis-server *:6379(processCommand+0x465)[0x4000047db5]\r\nredis           | /usr/local/bin/redis-server *:6379(processCommandAndResetClient+0x10)[0x4000055fd0]\r\nredis           | /usr/local/bin/redis-server *:6379(+0x5a9ca)[0x400005a9ca]\r\nredis           | /usr/local/bin/redis-server *:6379(+0xda318)[0x40000da318]\r\nredis           | /usr/local/bin/redis-server *:6379(aeProcessEvents+0x2e7)[0x4000040cd7]\r\nredis           | /usr/local/bin/redis-server *:6379(aeMain+0x1d)[0x400004101d]\r\nredis           | /usr/local/bin/redis-server *:6379(main+0x476)[0x400003d816]\r\nredis           | /lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xeb)[0x400218b09b]\r\nredis           | /usr/local/bin/redis-server *:6379(_start+0x2a)[0x400003db5a]\r\nredis           |\r\nredis           | ------ INFO OUTPUT ------\r\nredis           | # Server\r\nredis           | redis_version:6.0.15\r\nredis           | redis_git_sha1:00000000\r\nredis           | redis_git_dirty:0\r\nredis           | redis_build_id:bc06c43d1c123d61\r\nredis           | redis_mode:standalone\r\nredis           | os:Linux 5.10.47-linuxkit x86_64\r\nredis           | arch_bits:64\r\nredis           | multiplexing_api:epoll\r\nredis           | atomicvar_api:atomic-builtin\r\nredis           | gcc_version:8.3.0\r\nredis           | process_id:1\r\nredis           | run_id:2accdfa1b348e6bd55f7b6551d44055cf2031143\r\nredis           | tcp_port:6379\r\nredis           | uptime_in_seconds:117\r\nredis           | uptime_in_days:0\r\nredis           | hz:10\r\nredis           | configured_hz:10\r\nredis           | lru_clock:5522298\r\nredis           | executable:/usr/local/bin/redis-server\r\nredis           | config_file:\r\nredis           | io_threads_active:0\r\nredis           |\r\nredis           | # Clients\r\nredis           | connected_clients:16\r\nredis           | client_recent_max_input_buffer:40960\r\nredis           | client_recent_max_output_buffer:0\r\nredis           | blocked_clients:0\r\nredis           | tracking_clients:0\r\nredis           | clients_in_timeout_table:0\r\nredis           |\r\nredis           | # Memory\r\nredis           | used_memory:13555520\r\nredis           | used_memory_human:12.93M\r\nredis           | used_memory_rss:0\r\nredis           | used_memory_rss_human:0B\r\nredis           | used_memory_peak:14397512\r\nredis           | used_memory_peak_human:13.73M\r\nredis           | used_memory_peak_perc:94.15%\r\nredis           | used_memory_overhead:1192080\r\nredis           | used_memory_startup:803304\r\nredis           | used_memory_dataset:12363440\r\nredis           | used_memory_dataset_perc:96.95%\r\nredis           | allocator_allocated:13676288\r\nredis           | allocator_active:14196736\r\nredis           | allocator_resident:16764928\r\nredis           | total_system_memory:8337653760\r\nredis           | total_system_memory_human:7.77G\r\nredis           | used_memory_lua:37888\r\nredis           | used_memory_lua_human:37.00K\r\nredis           | used_memory_scripts:0\r\nredis           | used_memory_scripts_human:0B\r\nredis           | number_of_cached_scripts:0\r\nredis           | maxmemory:524288000\r\nredis           | maxmemory_human:500.00M\r\nredis           | maxmemory_policy:allkeys-lru\r\nredis           | allocator_frag_ratio:1.04\r\nredis           | allocator_frag_bytes:520448\r\nredis           | allocator_rss_ratio:1.18\r\nredis           | allocator_rss_bytes:2568192\r\nredis           | rss_overhead_ratio:0.00\r\nredis           | rss_overhead_bytes:-16764928\r\nredis           | mem_fragmentation_ratio:0.00\r\nredis           | mem_fragmentation_bytes:-13506728\r\nredis           | mem_not_counted_for_evict:0\r\nredis           | mem_replication_backlog:0\r\nredis           | mem_clients_slaves:0\r\nredis           | mem_clients_normal:328136\r\nredis           | mem_aof_buffer:0\r\nredis           | mem_allocator:jemalloc-5.1.0\r\nredis           | active_defrag_running:0\r\nredis           | lazyfree_pending_objects:0\r\nredis           |\r\nredis           | # Persistence\r\nredis           | loading:0\r\nredis           | rdb_changes_since_last_save:4368\r\nredis           | rdb_bgsave_in_progress:0\r\nredis           | rdb_last_save_time:1632912133\r\nredis           | rdb_last_bgsave_status:ok\r\nredis           | rdb_last_bgsave_time_sec:-1\r\nredis           | rdb_current_bgsave_time_sec:-1\r\nredis           | rdb_last_cow_size:0\r\nredis           | aof_enabled:0\r\nredis           | aof_rewrite_in_progress:0\r\nredis           | aof_rewrite_scheduled:0\r\nredis           | aof_last_rewrite_time_sec:-1\r\nredis           | aof_current_rewrite_time_sec:-1\r\nredis           | aof_last_bgrewrite_status:ok\r\nredis           | aof_last_write_status:ok\r\nredis           | aof_last_cow_size:0\r\nredis           | module_fork_in_progress:0\r\nredis           | module_fork_last_cow_size:0\r\nredis           |\r\nredis           | # Stats\r\nredis           | total_connections_received:16\r\nredis           | total_commands_processed:9502\r\nredis           | instantaneous_ops_per_sec:1227\r\nredis           | total_net_input_bytes:14499900\r\nredis           | total_net_output_bytes:17974966\r\nredis           | instantaneous_input_kbps:226.18\r\nredis           | instantaneous_output_kbps:118.62\r\nredis           | rejected_connections:0\r\nredis           | sync_full:0\r\nredis           | sync_partial_ok:0\r\nredis           | sync_partial_err:0\r\nredis           | expired_keys:0\r\nredis           | expired_stale_perc:0.00\r\nredis           | expired_time_cap_reached_count:0\r\nredis           | expire_cycle_cpu_milliseconds:8\r\nredis           | evicted_keys:0\r\nredis           | keyspace_hits:1135\r\nredis           | keyspace_misses:2860\r\nredis           | pubsub_channels:0\r\nredis           | pubsub_patterns:0\r\nredis           | latest_fork_usec:0\r\nredis           | migrate_cached_sockets:0\r\nredis           | slave_expires_tracked_keys:0\r\nredis           | active_defrag_hits:0\r\nredis           | active_defrag_misses:0\r\nredis           | active_defrag_key_hits:0\r\nredis           | active_defrag_key_misses:0\r\nredis           | tracking_total_keys:0\r\nredis           | tracking_total_items:0\r\nredis           | tracking_total_prefixes:0\r\nredis           | unexpected_error_replies:0\r\nredis           | total_reads_processed:5980\r\nredis           | total_writes_processed:5187\r\nredis           | io_threaded_reads_processed:0\r\nredis           | io_threaded_writes_processed:0\r\nredis           |\r\nredis           | # Replication\r\nredis           | role:master\r\nredis           | connected_slaves:0\r\nredis           | master_replid:671826bf1909ec1eb0d37cf4020c61acd302c69d\r\nredis           | master_replid2:0000000000000000000000000000000000000000\r\nredis           | master_repl_offset:0\r\nredis           | second_repl_offset:-1\r\nredis           | repl_backlog_active:0\r\nredis           | repl_backlog_size:1048576\r\nredis           | repl_backlog_first_byte_offset:0\r\nredis           | repl_backlog_histlen:0\r\nredis           |\r\nredis           | # CPU\r\nredis           | used_cpu_sys:1.278236\r\nredis           | used_cpu_user:1.494135\r\nredis           | used_cpu_sys_children:0.010561\r\nredis           | used_cpu_user_children:0.049518\r\nredis           |\r\nredis           | # Modules\r\nredis           |\r\nredis           | # Commandstats\r\nredis           | cmdstat_hmset:calls=1102,usec=72362,usec_per_call=65.66\r\nredis           | cmdstat_hincrby:calls=42,usec=4351,usec_per_call=103.60\r\nredis           | cmdstat_select:calls=10,usec=416,usec_per_call=41.60\r\nredis           | cmdstat_dbsize:calls=1,usec=43,usec_per_call=43.00\r\nredis           | cmdstat_module:calls=1,usec=96,usec_per_call=96.00\r\nredis           | cmdstat_scan:calls=1,usec=674,usec_per_call=674.00\r\nredis           | cmdstat_info:calls=2,usec=5684,usec_per_call=2842.00\r\nredis           | cmdstat_ping:calls=4,usec=169,usec_per_call=42.25\r\nredis           | cmdstat_expire:calls=7,usec=212,usec_per_call=30.29\r\nredis           | cmdstat_hget:calls=3993,usec=86605,usec_per_call=21.69\r\nredis           | cmdstat_hmget:calls=2,usec=150,usec_per_call=75.00\r\nredis           | cmdstat_sadd:calls=4336,usec=125110,usec_per_call=28.85\r\nredis           | cmdstat_config:calls=1,usec=1399,usec_per_call=1399.00\r\nredis           |\r\nredis           | # Cluster\r\nredis           | cluster_enabled:0\r\nredis           |\r\nredis           | # Keyspace\r\nredis           | db0:keys=1097,expires=5,avg_ttl=19754895\r\nredis           | db2:keys=2,expires=2,avg_ttl=21582131\r\nredis           |\r\nredis           | ------ CLIENT LIST OUTPUT ------\r\nredis           | id=11 addr=172.23.0.7:40560 fd=15 name= age=50 idle=50 flags=N db=1 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 argv-mem=0 obl=0 oll=0 omem=0 tot-mem=20504 events=r cmd=select user=default\r\nredis           | id=12 addr=172.23.0.7:40562 fd=16 name= age=50 idle=7 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 argv-mem=0 obl=0 oll=0 omem=0 tot-mem=20512 events=r cmd=hget user=default\r\nredis           | id=13 addr=172.23.0.7:40564 fd=17 name= age=50 idle=50 flags=N db=1 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 argv-mem=0 obl=0 oll=0 omem=0 tot-mem=20504 events=r cmd=select user=default\r\nredis           | id=14 addr=172.23.0.7:40566 fd=18 name= age=50 idle=20 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 argv-mem=0 obl=0 oll=0 omem=0 tot-mem=20512 events=r cmd=hget user=default\r\nredis           | id=15 addr=172.23.0.7:40568 fd=19 name= age=50 idle=50 flags=N db=1 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 argv-mem=0 obl=0 oll=0 omem=0 tot-mem=20504 events=r cmd=select user=default\r\nredis           | id=18 addr=172.23.0.7:40580 fd=22 name= age=20 idle=20 flags=N db=2 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 argv-mem=0 obl=0 oll=0 omem=0 tot-mem=20512 events=r cmd=expire user=default\r\nredis           | id=19 addr=172.23.0.7:40582 fd=23 name= age=20 idle=0 flags=N db=2 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 argv-mem=0 obl=0 oll=0 omem=0 tot-mem=20520 events=r cmd=hincrby user=default\r\nredis           | id=16 addr=172.23.0.7:40570 fd=20 name= age=50 idle=0 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=872 qbuf-free=31896 argv-mem=70 obl=13 oll=0 omem=0 tot-mem=61534 events=r cmd=sadd user=default\r\nredis           | id=9 addr=172.23.0.7:40552 fd=13 name= age=79 idle=79 flags=N db=1 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 argv-mem=0 obl=0 oll=0 omem=0 tot-mem=20504 events=r cmd=select user=default\r\nredis           | id=10 addr=172.23.0.7:40554 fd=14 name= age=79 idle=22 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 argv-mem=0 obl=0 oll=0 omem=0 tot-mem=20512 events=r cmd=hget user=default\r\nredis           | id=4 addr=172.23.0.1:61370 fd=8 name= age=103 idle=13 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 argv-mem=0 obl=0 oll=0 omem=0 tot-mem=20496 events=r cmd=ping user=default\r\nredis           | id=5 addr=172.23.0.7:40482 fd=9 name= age=97 idle=97 flags=N db=1 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 argv-mem=0 obl=0 oll=0 omem=0 tot-mem=20504 events=r cmd=select user=default\r\nredis           | id=17 addr=172.23.0.7:40578 fd=21 name= age=23 idle=23 flags=N db=2 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 argv-mem=0 obl=0 oll=0 omem=0 tot-mem=20512 events=r cmd=expire user=default\r\nredis           | id=6 addr=172.23.0.7:40484 fd=10 name= age=97 idle=22 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 argv-mem=0 obl=0 oll=0 omem=0 tot-mem=20512 events=r cmd=hget user=default\r\nredis           | id=7 addr=172.23.0.7:40486 fd=11 name= age=97 idle=97 flags=N db=1 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 argv-mem=0 obl=0 oll=0 omem=0 tot-mem=20504 events=r cmd=select user=default\r\nredis           | id=8 addr=172.23.0.7:40488 fd=12 name= age=97 idle=23 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 argv-mem=0 obl=0 oll=0 omem=0 tot-mem=20512 events=r cmd=hget user=default\r\nredis           |\r\nredis           | ------ CURRENT CLIENT INFO ------\r\nredis           | id=16 addr=172.23.0.7:40570 fd=20 name= age=50 idle=0 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=872 qbuf-free=31896 argv-mem=70 obl=13 oll=0 omem=0 tot-mem=61534 events=r cmd=sadd user=default\r\nredis           | argv[0]: 'SADD'\r\nredis           | argv[1]: 'zc:ti:d19_DB_DDL'\r\nredis           | argv[2]: 'd19_DB_PDO_MYSQL_DDL_VERTEX_ORDER_INVOICE_STATUS_2'\r\nredis           | 1:M 29 Sep 2021 10:44:10.577 # key 'zc:ti:d19_DB_DDL' found in DB containing the following object:\r\nredis           | 1:M 29 Sep 2021 10:44:10.577 # Object type: 2\r\nredis           | 1:M 29 Sep 2021 10:44:10.577 # Object encoding: 2\r\nredis           | 1:M 29 Sep 2021 10:44:10.577 # Object refcount: 1\r\nredis           | 1:M 29 Sep 2021 10:44:10.577 # Set size: 1025\r\nredis           |\r\nredis           | ------ REGISTERS ------\r\nredis           | 1:M 29 Sep 2021 10:44:10.577 #\r\nredis           | RAX:0000004005708640 RBX:0000004002aa7903\r\nredis           | RCX:a9f34c6b5448e5ea RDX:a1bb64e34cefb119\r\nredis           | RDI:000000000000005f RSI:7aa43cb24c280a95\r\nredis           | RBP:0848288818a754f3 RSP:0000004001c08860\r\nredis           | R8 :000000400018b038 R9 :0000004002a33050\r\nredis           | R10:0000004002aa7933 R11:0000000000000002\r\nredis           | R12:223a226c6562616c R13:0000000000000000\r\nredis           | R14:0000004002a33020 R15:00000000000004f3\r\nredis           | RIP:0000004000042dab EFL:0000000000000206\r\nredis           | CSGSFS:002b000000000033\r\nredis           | 1:M 29 Sep 2021 10:44:10.577 # (0000004001c0886f) -> 0000000000000002\r\nredis           | 1:M 29 Sep 2021 10:44:10.578 # (0000004001c0886e) -> 000000000000000f\r\nredis           | 1:M 29 Sep 2021 10:44:10.578 # (0000004001c0886d) -> 0005cd2002a4b2c2\r\nredis           | 1:M 29 Sep 2021 10:44:10.578 # (0000004001c0886c) -> 0000000000000000\r\nredis           | 1:M 29 Sep 2021 10:44:10.578 # (0000004001c0886b) -> 0000004000074c58\r\nredis           | 1:M 29 Sep 2021 10:44:10.578 # (0000004001c0886a) -> 000000000000000f\r\nredis           | 1:M 29 Sep 2021 10:44:10.578 # (0000004001c08869) -> 0000004002a902e0\r\nredis           | 1:M 29 Sep 2021 10:44:10.578 # (0000004001c08868) -> 0000000000000000\r\nredis           | 1:M 29 Sep 2021 10:44:10.578 # (0000004001c08867) -> 0000004002aa7903\r\nredis           | 1:M 29 Sep 2021 10:44:10.578 # (0000004001c08866) -> 0000000000000000\r\nredis           | 1:M 29 Sep 2021 10:44:10.578 # (0000004001c08865) -> 0000004002a33020\r\nredis           | 1:M 29 Sep 2021 10:44:10.578 # (0000004001c08864) -> 0000004002947cc8\r\nredis           | 1:M 29 Sep 2021 10:44:10.578 # (0000004001c08863) -> 0000004002a33030\r\nredis           | 1:M 29 Sep 2021 10:44:10.578 # (0000004001c08862) -> 0000004002a33070\r\nredis           | 1:M 29 Sep 2021 10:44:10.579 # (0000004001c08861) -> 0000000000002798\r\nredis           | 1:M 29 Sep 2021 10:44:10.579 # (0000004001c08860) -> 0000000000000000\r\nredis           |\r\nredis           | ------ MODULES INFO OUTPUT ------\r\nredis           |\r\nredis           | ------ FAST MEMORY TEST ------\r\nredis           | 1:M 29 Sep 2021 10:44:10.583 # Bio thread for job type #0 terminated\r\nredis           | 1:M 29 Sep 2021 10:44:10.583 # Bio thread for job type #1 terminated\r\nredis           | 1:M 29 Sep 2021 10:44:10.584 # Bio thread for job type #2 terminated\r\nredis           | *** Preparing to test memory region 40001dc000 (2547712 bytes)\r\nredis           | *** Preparing to test memory region 4001c32000 (12288 bytes)\r\nredis           | *** Preparing to test memory region 4001dba000 (8192 bytes)\r\nredis           | *** Preparing to test memory region 4002142000 (16384 bytes)\r\nredis           | *** Preparing to test memory region 4002163000 (16384 bytes)\r\nredis           | *** Preparing to test memory region 4002324000 (40960 bytes)\r\nredis           | *** Preparing to test memory region 4002600000 (2097152 bytes)\r\nredis           | *** Preparing to test memory region 400292e000 (2097152 bytes)\r\nredis           | *** Preparing to test memory region 4003000000 (4194304 bytes)\r\nredis           | *** Preparing to test memory region 400352e000 (8388608 bytes)\r\nredis           | *** Preparing to test memory region 4003d2f000 (8388608 bytes)\r\nredis           | *** Preparing to test memory region 4004530000 (8388608 bytes)\r\nredis           | *** Preparing to test memory region 4004d31000 (8388608 bytes)\r\nredis           | *** Preparing to test memory region 4005531000 (18874368 bytes)\r\nredis           | .O.O.O.O.O.O.O.O.O.O.O.O.O.O\r\nredis           | Fast memory test PASSED, however your memory can still be broken. Please run a memory test for several hours if possible.\r\nredis           |\r\nredis           | ------ DUMPING CODE AROUND EIP ------\r\nredis           | Symbol: dictAddRaw (base: 0x4000042ce0)\r\nredis           | Module: /usr/local/bin/redis-server *:6379 (base 0x4000000000)\r\nredis           | $ xxd -r -p /tmp/dump.hex /tmp/dump.bin\r\nredis           | $ objdump --adjust-vma=0x4000042ce0 -D -b binary -m i386:x86-64 /tmp/dump.bin\r\nredis           | ------\r\nredis           | 1:M 29 Sep 2021 10:44:10.972 # dump of function (hexdump of 331 bytes):\r\nredis           | 415741564989fe41554989d5415455534889f34883ec2848837f50ff740b48837f58000f84cf000000498b064889dfff104889c54d85ed740849c745000000000049837e50ff7520498b7618498b7e284885f60f84370100004839fe0f8656010000660f1f440000498d461048894424184989c1498d465048894424104d8b79104921ef4a8d04fd000000004889442408498b014e8b24f84d85e4752eeb7190498b06488b40184885c074154c890c24498b7e084889deffd04c8b0c2485c075134d8b6424104d85e47445498b14244839d375cc4d85ed74044d8965004531ed4883c4284c89e85b5d415c415d415e415fc3660f1f440000be01000000e8befaffffe922ffffff660f1f84000000000049837e50ff0f84d00000004983c1204c394c24100f8553ffffff4983ffff74ad498d6e30bf18000000e812c600004c8b6424084c0365004989c549\r\nredis           | Function at 0x40000428a0 is dictRehash\r\nredis           | Function at 0x400004f430 is zmalloc\r\nredis           |\r\nredis           | === REDIS BUG REPORT END. Make sure to include from START to END. ===\r\n",
  "state": "closed",
  "created_at": "2021-09-29T11:11:47Z",
  "updated_at": "2022-03-18T12:50:41Z",
  "closed_at": "2022-03-18T12:50:40Z",
  "labels": [
    "state:to-be-closed"
  ],
  "comments_data": [
    {
      "id": 932717632,
      "user": "yoav-steinberg",
      "created_at": "2021-10-02T08:56:56Z",
      "body": "According to the report this happened in a docker container on an M1 Mac, but I see that the platform was x86_64:\r\n>`redis | os:Linux 5.10.47-linuxkit x86_64`\r\n\r\nUnless I'm missing something this should either be an ARM build (in if it's been run on an M1, docker or no docker) or an x86_64 build, but not on M1.\r\n\r\nAlso if this was indeed run in a container, can you point to what container it was? This can help recreate.\r\n\r\nCan you provide some minimal Redis command sequence to recreate this? Looks like you were working with Redis sets.\r\n\r\n@oranagra I see we got a SIGSEGV and I noticed the invalid address **isn't** 8 byte aligned. Do ARM alignment issues cause SIGSEGV or some other signal?"
    },
    {
      "id": 932745254,
      "user": "oranagra",
      "created_at": "2021-10-02T12:36:45Z",
      "body": "I think it's using binary translation https://en.m.wikipedia.org/wiki/Rosetta_(software)\r\nWhich is supposed to work now after we resolved #8062 in Redis 6.0.10 \r\n\r\nRegarding alignment issues I think all modern ARM processor handle that properly, and the ones who didn't used to generate a SIGBUS. \r\n"
    },
    {
      "id": 932760165,
      "user": "sundb",
      "created_at": "2021-10-02T14:19:44Z",
      "body": "@yoav-steinberg I've reproduced the problem on m1's docker, using `redis-benchmark -t zadd -l -r 10000` and it crashes, but I haven't found the crashing problem yet.\r\nAlso, I found out that m1 docker is emulated using qemu, and I'm not sure if the crash was caused by qemu.\r\n@oranagra I ran the unstable code on top of https://hub.docker.com/_/redis and it still crashed."
    },
    {
      "id": 932765653,
      "user": "sundb",
      "created_at": "2021-10-02T14:55:33Z",
      "body": "@deivua Can you share your docker start command or docker-compose.yml?\r\nIs your platform parameter `linux/x86_64`, if so you can try removing it and test again."
    },
    {
      "id": 1003160591,
      "user": "mojtabacazi",
      "created_at": "2021-12-30T19:47:48Z",
      "body": "I'm using `bitnami/redis:6.2-debian-10` without any modifications using `qemu` and it's crashing similarly to what op described here. "
    },
    {
      "id": 1003232306,
      "user": "sundb",
      "created_at": "2021-12-31T01:19:12Z",
      "body": "@mojtabacazi Can you share your docker start command or docker_compose.yml?"
    },
    {
      "id": 1055233474,
      "user": "sundb",
      "created_at": "2022-03-01T09:51:43Z",
      "body": "Related to #10341, so we can close it."
    },
    {
      "id": 1072380347,
      "user": "oranagra",
      "created_at": "2022-03-18T12:50:40Z",
      "body": "closing, see https://github.com/redis/redis/issues/10162#issuecomment-1072375709"
    }
  ]
}