{
  "issue_number": 10338.0,
  "title": "[CRASH] Can't start redis server",
  "body": "**Crash report**\r\n```\r\n\r\n=== REDIS BUG REPORT START: Cut & paste starting from here ===\r\n[6281] 24 Feb 09:51:23.081 #     Redis 2.8.19 crashed by signal: 10\r\n[6281] 24 Feb 09:51:23.081 #     Failed assertion: <no assertion failed> (<no file>:0)\r\n[6281] 24 Feb 09:51:23.081 # --- STACK TRACE\r\n0   redis-server-2.8.19.app             0x0000000104a47197 logStackTrace + 103\r\n1   libsystem_platform.dylib            0x00007fff2036a440 _platform_memset$VARIANT$Rosetta + 108\r\n2   libsystem_platform.dylib            0x00007fff20367d7d _sigtramp + 29\r\n3   ???                                 0x0000000000000004 0x0 + 4\r\n4   ???                                 0x2e322d7265767265 0x0 + 3328773043932000869\r\n[6281] 24 Feb 09:51:23.082 # --- INFO OUTPUT\r\n[6281] 24 Feb 09:51:23.082 # # Server\r\nredis_version:2.8.19\r\nredis_git_sha1:00000000\r\nredis_git_dirty:0\r\nredis_build_id:eb33e7d0f77a29c1\r\nredis_mode:standalone\r\nos:Darwin 20.5.0 x86_64\r\narch_bits:64\r\nmultiplexing_api:kqueue\r\ngcc_version:4.2.1\r\nprocess_id:6281\r\nrun_id:f79aa4f071e11667ebd3232aa701bdf0e9928fd0\r\ntcp_port:6379\r\nuptime_in_seconds:0\r\nuptime_in_days:0\r\nhz:10\r\nlru_clock:0\r\nconfig_file:/var/folders/09/49nnqyw524q9119xjd6wbl080000gn/T/embedded-redis-server_637910051475594777275399.conf\r\n\r\n# Clients\r\nconnected_clients:0\r\nclient_longest_output_list:0\r\nclient_biggest_input_buf:0\r\nblocked_clients:0\r\n\r\n# Memory\r\nused_memory:970784\r\nused_memory_human:948.03K\r\nused_memory_rss:0\r\nused_memory_peak:970784\r\nused_memory_peak_human:948.03K\r\nused_memory_lua:35840\r\nmem_fragmentation_ratio:0.00\r\nmem_allocator:libc\r\n\r\n# Persistence\r\nloading:0\r\nrdb_changes_since_last_save:0\r\nrdb_bgsave_in_progress:0\r\nrdb_last_save_time:1645663883\r\nrdb_last_bgsave_status:ok\r\nrdb_last_bgsave_time_sec:-1\r\nrdb_current_bgsave_time_sec:-1\r\naof_enabled:0\r\naof_rewrite_in_progress:0\r\naof_rewrite_scheduled:0\r\naof_last_rewrite_time_sec:-1\r\naof_current_rewrite_time_sec:-1\r\naof_last_bgrewrite_status:ok\r\naof_last_write_status:ok\r\n\r\n# Stats\r\ntotal_connections_received:0\r\ntotal_commands_processed:0\r\ninstantaneous_ops_per_sec:0\r\ntotal_net_input_bytes:0\r\ntotal_net_output_bytes:0\r\ninstantaneous_input_kbps:0.00\r\ninstantaneous_output_kbps:0.00\r\nrejected_connections:0\r\nsync_full:0\r\nsync_partial_ok:0\r\nsync_partial_err:0\r\nexpired_keys:0\r\nevicted_keys:0\r\nkeyspace_hits:0\r\nkeyspace_misses:0\r\npubsub_channels:0\r\npubsub_patterns:0\r\nlatest_fork_usec:0\r\n\r\n# Replication\r\nrole:master\r\nconnected_slaves:0\r\nmaster_repl_offset:0\r\nrepl_backlog_active:0\r\nrepl_backlog_size:1048576\r\nrepl_backlog_first_byte_offset:0\r\nrepl_backlog_histlen:0\r\n\r\n# CPU\r\nused_cpu_sys:0.01\r\nused_cpu_user:0.02\r\nused_cpu_sys_children:0.00\r\nused_cpu_user_children:0.00\r\n\r\n# Commandstats\r\n\r\n# Keyspace\r\nhash_init_value: 1645618994\r\n\r\n[6281] 24 Feb 09:51:23.082 # --- CLIENT LIST OUTPUT\r\n[6281] 24 Feb 09:51:23.082 # \r\n[6281] 24 Feb 09:51:23.082 # --- REGISTERS\r\n[6281] 24 Feb 09:51:23.082 # \r\nRAX:000000030d6cdac0 RBX:0000000000000067\r\nRCX:000000030d6ce000 RDX:00007fb415d373fe\r\nRDI:000000030d6cda50 RSI:0000000000000000\r\nRBP:000000030d6cd810 RSP:000000030d6cd618\r\nR8 :000000030d6cd458 R9 :0000000000000000\r\nR10:000000030d6cd0c0 R11:ffffffffffffffff\r\nR12:00007fb723405c70 R13:000000030d6cd898\r\nR14:00007fff8061bcf0 R15:00007fb723708628\r\nRIP:00007fff2036a440 EFL:0000000000000202\r\nCS :000000000000002b FS:0000000000000000  GS:0000000000000000\r\n[6281] 24 Feb 09:51:23.082 # (000000030d6cd627) -> 00007fff8061c074\r\n[6281] 24 Feb 09:51:23.082 # (000000030d6cd626) -> 00007fff202f01da\r\n[6281] 24 Feb 09:51:23.082 # (000000030d6cd625) -> 000000030d6cd750\r\n[6281] 24 Feb 09:51:23.082 # (000000030d6cd624) -> 0000000000403000\r\n[6281] 24 Feb 09:51:23.082 # (000000030d6cd623) -> 00007fff8061c074\r\n[6281] 24 Feb 09:51:23.082 # (000000030d6cd622) -> 0000000000400000\r\n[6281] 24 Feb 09:51:23.082 # (000000030d6cd621) -> 000000030d6cd6f8\r\n[6281] 24 Feb 09:51:23.082 # (000000030d6cd620) -> 00007fff202ed135\r\n[6281] 24 Feb 09:51:23.082 # (000000030d6cd61f) -> 000000010ce8c080\r\n[6281] 24 Feb 09:51:23.082 # (000000030d6cd61e) -> 0000000000000003\r\n[6281] 24 Feb 09:51:23.082 # (000000030d6cd61d) -> 00000000090008ff\r\n[6281] 24 Feb 09:51:23.082 # (000000030d6cd61c) -> 00000000000018eb\r\n[6281] 24 Feb 09:51:23.082 # (000000030d6cd61b) -> 00007fb723405d40\r\n[6281] 24 Feb 09:51:23.082 # (000000030d6cd61a) -> 000000030d6cda50\r\n[6281] 24 Feb 09:51:23.082 # (000000030d6cd619) -> 000000030d6cd660\r\n[6281] 24 Feb 09:51:23.082 # (000000030d6cd618) -> 0000000104a57424\r\n[6281] 24 Feb 09:51:23.082 # \r\n=== REDIS BUG REPORT END. Make sure to include from START to END. ===\r\n```\r\n\r\n**Additional information**\r\n- using `it.ozimov:embedded-redis:0.7.3`\r\n- code\r\n```\r\n@TestConfiguration\r\npublic class TestRedisConfig {\r\n    private RedisServer redisServer;\r\n\r\n    @PostConstruct\r\n    public void setUp() throws IOException {\r\n        final int redisDefaultPort = 6379;\r\n        this.redisServer = new RedisServer(isRedisRunning(redisDefaultPort) ? findAvailablePort() : redisDefaultPort);\r\n        redisServer.start();\r\n    }\r\n}\r\n```\r\n- I'm using mac m1, but the above code is working well on a different equipment of the same model(mac m1).",
  "state": "closed",
  "created_at": "2022-02-24T01:05:24Z",
  "updated_at": "2022-02-24T06:41:23Z",
  "closed_at": "2022-02-24T06:41:22Z",
  "labels": [
    "state:to-be-closed"
  ],
  "comments_data": [
    {
      "id": 1049416535,
      "user": "sundb",
      "created_at": "2022-02-24T01:55:46Z",
      "body": "@HyunAh-iia You can create an issue in https://github.com/kstyrc/embedded-redis."
    },
    {
      "id": 1049542670,
      "user": "oranagra",
      "created_at": "2022-02-24T06:41:22Z",
      "body": "Indeed you should report it in the repo maintaining the version you used (based on a version this repo no longer maintains).\r\nside note, it could be related to these: https://github.com/redis/redis/issues/8062\r\nresolved by https://github.com/redis/redis/pull/8088 and https://github.com/redis/redis/pull/8150"
    }
  ]
}