{
  "issue_number": 8204.0,
  "title": "[BUG] redis 6.0.8 sentinel can't make the master to slave ",
  "body": "**Describe the bug**\r\n\r\nwe have one master and one slave node . and each node also have the sentine service . Beside this we also have the single one Sentinel node. Now we have this case we set the keys to the master reached the maxmemory. and  we make the manaul failover. The sentinel config rewirte success but the result is the slave become the master and the original master not become the slave.And in the sentinel.log it will print the below message every 10 seconds.\r\n\r\n\" +convert-to-slave slave 172.16.35.116:6379 172.16.35.116 6379 @ mymaster 172.16.35.112 6379\r\n\r\nAdd the sentinel config below :\r\nport 26380\r\ndir \"/var/lib/redis\"\r\ndaemonize yes\r\nrequirepass olonsXtiTJmxOooBwM72jqmE7deEryWV\r\nlogfile \"/var/log/redis/sentinel.log\"\r\nsentinel myid a61c5628fe9b10eb9908abb529d1fd4b5b779b86\r\nsentinel deny-scripts-reconfig yes\r\nsentinel monitor mymaster 172.16.35.112 6379 2\r\nsentinel client-reconfig-script mymaster /etc/redis/redis_failover.sh\r\nsentinel auth-pass mymaster olonsXtiTJmxOooBwM72jqmE7deEryWV\r\nsentinel auth-user mymaster unicloud_sentinel\r\nprotected-mode yes\r\nbind 0.0.0.0\r\npidfile \"/var/run/redis-sentinel.pid\"\r\n# Generated by CONFIG REWRITE\r\nuser default on #5e5576f9f2f599d6a716c03ff1be2682766bcfbbb496d9dbb254dfa4d0430067 ~* +@all\r\nsentinel config-epoch mymaster 7\r\nsentinel leader-epoch mymaster 6\r\nsentinel known-replica mymaster 172.16.35.116 6379\r\nsentinel known-sentinel mymaster 172.16.35.116 26380 39b20842c6f6d18aebb153246bb73d13c3fcd448\r\nsentinel known-sentinel mymaster 172.16.35.125 26380 8f780c36e18ebd34ad87a331ab9a89ff7a95ba64\r\nsentinel current-epoch 7\r\n\r\n\r\n",
  "state": "open",
  "created_at": "2020-12-17T03:14:41Z",
  "updated_at": "2021-09-22T11:26:08Z",
  "closed_at": null,
  "labels": [
    "state:to-be-closed"
  ],
  "comments_data": [
    {
      "id": 752088589,
      "user": "hwware",
      "created_at": "2020-12-29T14:09:57Z",
      "body": "hello @Cloud-Zhang , can you also share the original master(172.16.35.112) and slave(172.16.35.116) log? and if poossible, the more detailed sentinel log? thanks!"
    },
    {
      "id": 924264591,
      "user": "arielcarrera",
      "created_at": "2021-09-21T18:39:22Z",
      "body": "I have the same problem"
    },
    {
      "id": 924344905,
      "user": "hwware",
      "created_at": "2021-09-21T20:08:05Z",
      "body": "> I have the same problem\r\n\r\nCould you please provide us more detail? including how many master and replica nodes, their config file, and how to reproduce it?  Thanks"
    },
    {
      "id": 924497813,
      "user": "arielcarrera",
      "created_at": "2021-09-22T01:02:18Z",
      "body": "> > I have the same problem\r\n> \r\n> Could you please provide us more detail? including how many master and replica nodes, their config file, and how to reproduce it? Thanks\r\n\r\nI found the problem, it was due to a bad configuration. I forgot to save some changes in my config file by mistake and my master node had \"cluster-enabled yes\". After comment this line it works as expected.\r\n\r\n- Redis version: 5.0.3 64 bit\r\n- OS: CentOS Stream 8\r\n- x86_64\r\n\r\nThank you\r\n"
    }
  ]
}