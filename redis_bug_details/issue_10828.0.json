{
  "issue_number": 10828.0,
  "title": "[CRASH] Redis 6.2.6 crashed by signal: 11, si_code: 1 | redislabs/redismod:latest | Intel Mac",
  "body": "Notice!\r\n- If a Redis module was involved, please open an issue in the module's repo instead!\r\n- If you're using docker on Apple M1, please make sure the image you're using was compiled for ARM!\r\n\r\n\r\n**Crash report**\r\n\r\nPaste the complete crash log between the quotes below. Please include a few lines from the log preceding the crash report to provide some context.\r\n\r\n```\r\n1:C 07 Jun 2022 18:27:27.106 # oO0OoO0OoO0Oo Redis is starting oO0OoO0OoO0Oo\r\n1:C 07 Jun 2022 18:27:27.106 # Redis version=6.2.6, bits=64, commit=00000000, modified=0, pid=1, just started\r\n1:C 07 Jun 2022 18:27:27.106 # Configuration loaded\r\n1:M 07 Jun 2022 18:27:27.107 * monotonic clock: POSIX clock_gettime\r\n1:M 07 Jun 2022 18:27:27.108 * Running mode=standalone, port=6379.\r\n1:M 07 Jun 2022 18:27:27.108 # Server initialized\r\n1:M 07 Jun 2022 18:27:27.108 * <ai> Redis version found by RedisAI: 6.2.6 - oss\r\n1:M 07 Jun 2022 18:27:27.108 * <ai> RedisAI version 10205, git_sha=746b199e69f272d12aab00c26d31c8e35eb48b29\r\n1:M 07 Jun 2022 18:27:27.108 * Module 'ai' loaded from /usr/lib/redis/modules/redisai.so\r\n1:M 07 Jun 2022 18:27:27.109 * <search> Redis version found by RedisSearch : 6.2.6 - oss\r\n1:M 07 Jun 2022 18:27:27.109 * <search> RediSearch version 99.99.99 (Git=master-06a4938c)\r\n1:M 07 Jun 2022 18:27:27.109 * <search> Low level api version 1 initialized successfully\r\n1:M 07 Jun 2022 18:27:27.109 * <search> concurrent writes: OFF, gc: ON, prefix min length: 2, prefix max expansions: 200, query timeout (ms): 500, timeout policy: return, cursor read size: 1000, cursor max idle (ms): 300000, max doctable size: 1000000, max number of search results:  1000000, search pool size: 20, index pool size: 8, \r\n1:M 07 Jun 2022 18:27:27.110 * <search> Initialized thread pool!\r\n1:M 07 Jun 2022 18:27:27.110 * <search> Enabled diskless replication\r\n1:M 07 Jun 2022 18:27:27.110 * Module 'search' loaded from /usr/lib/redis/modules/redisearch.so\r\n1:M 07 Jun 2022 18:27:27.112 * <graph> Starting up RedisGraph version 2.8.13.\r\n1:M 07 Jun 2022 18:27:27.113 * <graph> Thread pool created, using 12 threads.\r\n1:M 07 Jun 2022 18:27:27.113 * <graph> Maximum number of OpenMP threads set to 12\r\n1:M 07 Jun 2022 18:27:27.113 * Module 'graph' loaded from /usr/lib/redis/modules/redisgraph.so\r\n1:M 07 Jun 2022 18:27:27.115 * <timeseries> RedisTimeSeries version 10611, git_sha=ac24ed70355e718b4778b3f237e9649cbdfb7a71\r\n1:M 07 Jun 2022 18:27:27.115 * <timeseries> Redis version found by RedisTimeSeries : 6.2.6 - oss\r\n1:M 07 Jun 2022 18:27:27.115 * <timeseries> loaded default CHUNK_SIZE_BYTES policy: 4096\r\n1:M 07 Jun 2022 18:27:27.115 * <timeseries> loaded server DUPLICATE_POLICY: block\r\n1:M 07 Jun 2022 18:27:27.115 * <timeseries> Setting default series ENCODING to: compressed\r\n1:M 07 Jun 2022 18:27:27.115 * <timeseries> Detected redis oss\r\n1:M 07 Jun 2022 18:27:27.115 * <timeseries> Enabled diskless replication\r\n1:M 07 Jun 2022 18:27:27.115 * Module 'timeseries' loaded from /usr/lib/redis/modules/redistimeseries.so\r\n1:M 07 Jun 2022 18:27:27.115 * <ReJSON> version: 20009 git sha: d8d4b19 branch: HEAD\r\n1:M 07 Jun 2022 18:27:27.115 * <ReJSON> Exported RedisJSON_V1 API\r\n1:M 07 Jun 2022 18:27:27.115 * <ReJSON> Enabled diskless replication\r\n1:M 07 Jun 2022 18:27:27.115 * <ReJSON> Created new data type 'ReJSON-RL'\r\n1:M 07 Jun 2022 18:27:27.115 * Module 'ReJSON' loaded from /usr/lib/redis/modules/rejson.so\r\n1:M 07 Jun 2022 18:27:27.115 * <search> Acquired RedisJSON_V1 API\r\n1:M 07 Jun 2022 18:27:27.115 * <graph> Acquired RedisJSON_V1 API\r\n1:M 07 Jun 2022 18:27:27.115 * Module 'bf' loaded from /usr/lib/redis/modules/redisbloom.so\r\n1:M 07 Jun 2022 18:27:27.116 * <rg> RedisGears version 1.2.4, git_sha=0c8365367cd345a965d675343558585e923555a7, compiled_os=linux-bullseye-x64\r\n1:M 07 Jun 2022 18:27:27.116 * <rg> Redis version found by RedisGears : 6.2.6 - oss\r\n1:M 07 Jun 2022 18:27:27.116 * <rg> MaxExecutions:1000\r\n1:M 07 Jun 2022 18:27:27.116 * <rg> MaxExecutionsPerRegistration:100\r\n1:M 07 Jun 2022 18:27:27.116 * <rg> ProfileExecutions:0\r\n1:M 07 Jun 2022 18:27:27.116 * <rg> ExecutionThreads:3\r\n1:M 07 Jun 2022 18:27:27.116 * <rg> ExecutionMaxIdleTime:5000\r\n1:M 07 Jun 2022 18:27:27.116 * <rg> SendMsgRetries:3\r\n1:M 07 Jun 2022 18:27:27.116 * <rg> Plugin:[/var/opt/redislabs/modules/rg/plugin/gears_python.so]\r\n1:M 07 Jun 2022 18:27:27.117 # <rg> Loading plugin GearsPythonPlugin version 10000 \r\n1:M 07 Jun 2022 18:27:27.117 * <rg> Initializing GearsPythonPlugin version 1.0.0\r\n1:M 07 Jun 2022 18:27:27.117 * <rg> Python config:\r\n1:M 07 Jun 2022 18:27:27.117 * <rg>     CreateVenv : 0\r\n1:M 07 Jun 2022 18:27:27.117 * <rg>     DownloadDeps : 0\r\n1:M 07 Jun 2022 18:27:27.117 * <rg>     ForeceDownloadDepsOnEnterprise : 0\r\n1:M 07 Jun 2022 18:27:27.117 * <rg>     PythonAttemptTraceback : 1\r\n1:M 07 Jun 2022 18:27:27.117 * <rg>     OverridePythonAllocators : 1\r\n1:M 07 Jun 2022 18:27:27.117 * <rg>     PythonInstallReqMaxIdleTime : 30000\r\n1:M 07 Jun 2022 18:27:27.117 * <rg>     DependenciesUrl : http://redismodules.s3.amazonaws.com/redisgears/redisgears-python.Linux-bullseye-x86_64.1.2.4.tgz\r\n1:M 07 Jun 2022 18:27:27.117 * <rg>     DependenciesSha256 : a82d7a74dcdffdac54a1ca882aee64993f980380d791b4aef9244f618b43ff59\r\n1:M 07 Jun 2022 18:27:27.117 * <rg>     PythonInstallationDir : /var/opt/redislabs/modules/rg\r\n1:M 07 Jun 2022 18:27:27.118 * <rg> PYENV_DIR: /var/opt/redislabs/modules/rg//python3_1.2.4/\r\n1:M 07 Jun 2022 18:27:27.118 * <rg> PYENV_HOME_DIR: /var/opt/redislabs/modules/rg//python3_1.2.4//.venv/\r\n1:M 07 Jun 2022 18:27:27.118 * <rg> PYENV_BIN_DIR: /var/opt/redislabs/modules/rg//python3_1.2.4//.venv//bin\r\n1:M 07 Jun 2022 18:27:27.118 * <rg> PYENV_ACTIVATE: /var/opt/redislabs/modules/rg//python3_1.2.4//.venv//bin/activate_this.py\r\n1:M 07 Jun 2022 18:27:27.118 * <rg> PYENV_ACTIVATE_SCRIPT: /var/opt/redislabs/modules/rg//python3_1.2.4//.venv//bin/activate\r\n1:M 07 Jun 2022 18:27:27.118 * <rg> log file is \r\n\r\n1:M 07 Jun 2022 18:27:27.118 * <rg> Found python installation under: /var/opt/redislabs/modules/rg//python3_1.2.4/\r\n1:M 07 Jun 2022 18:27:27.185 * Module 'rg' loaded from /usr/lib/redis/modules/redisgears.so\r\n1:M 07 Jun 2022 18:27:27.186 * Ready to accept connections\r\n1:M 07 Jun 2022 18:28:00.333 * DB saved on disk\r\n1:M 07 Jun 2022 18:28:22.365 * DB saved on disk\r\n1:M 07 Jun 2022 18:33:23.031 * 100 changes in 300 seconds. Saving...\r\n1:M 07 Jun 2022 18:33:23.032 * Background saving started by pid 60\r\n60:C 07 Jun 2022 18:33:23.041 * DB saved on disk\r\n60:C 07 Jun 2022 18:33:23.043 * RDB: 0 MB of memory used by copy-on-write\r\n1:M 07 Jun 2022 18:33:23.133 * Background saving terminated with success\r\n\r\n\r\n=== REDIS BUG REPORT START: Cut & paste starting from here ===\r\n1:M 07 Jun 2022 18:37:13.926 # Redis 6.2.6 crashed by signal: 11, si_code: 1\r\n1:M 07 Jun 2022 18:37:13.926 # Accessing address: 0xfffffffffffffff4\r\n1:M 07 Jun 2022 18:37:13.926 # Crashed running the instruction at: 0x7f52830b9b70\r\n\r\n------ STACK TRACE ------\r\nEIP:\r\n/usr/lib/redis/modules/redisearch.so(NumericRange_Add+0xa0)[0x7f52830b9b70]\r\n\r\nBacktrace:\r\n/lib/x86_64-linux-gnu/libpthread.so.0(+0x14140)[0x7f528496f140]\r\n/usr/lib/redis/modules/redisearch.so(NumericRange_Add+0xa0)[0x7f52830b9b70]\r\n/usr/lib/redis/modules/redisearch.so(NumericRangeNode_Add+0x125)[0x7f52830b9f25]\r\n/usr/lib/redis/modules/redisearch.so(NumericRangeTree_Add+0x20)[0x7f52830ba290]\r\n/usr/lib/redis/modules/redisearch.so(IndexerBulkAdd+0x6d)[0x7f528309c16d]\r\n/usr/lib/redis/modules/redisearch.so(+0x12b2f7)[0x7f52830ae2f7]\r\n/usr/lib/redis/modules/redisearch.so(+0x12b882)[0x7f52830ae882]\r\n/usr/lib/redis/modules/redisearch.so(Indexer_Add+0x55)[0x7f52830af065]\r\n/usr/lib/redis/modules/redisearch.so(Document_AddToIndexes+0xe0)[0x7f528309c490]\r\n/usr/lib/redis/modules/redisearch.so(IndexSpec_UpdateDoc+0x10d)[0x7f52830d7aed]\r\n/usr/lib/redis/modules/redisearch.so(Indexes_UpdateMatchingWithSchemaRules+0x94)[0x7f52830d8204]\r\n/usr/lib/redis/modules/redisearch.so(HashNotificationCallback+0x182)[0x7f52830b8dc2]\r\nredis-server *:6379(moduleNotifyKeyspaceEvent+0xce)[0x5583110a869e]\r\nredis-server *:6379(notifyKeyspaceEvent+0x21)[0x558311094fa1]\r\nredis-server *:6379(RM_NotifyKeyspaceEvent+0x2f)[0x55831109f4ff]\r\n/usr/lib/redis/modules/rejson.so(+0xd67b0)[0x7f527761e7b0]\r\n/usr/lib/redis/modules/rejson.so(+0x36e10)[0x7f527757ee10]\r\n/usr/lib/redis/modules/rejson.so(+0x61951)[0x7f52775a9951]\r\nredis-server *:6379(RedisModuleCommandDispatcher+0x53)[0x5583110a6453]\r\nredis-server *:6379(call+0xa1)[0x55831101b1a1]\r\nredis-server *:6379(processCommand+0x593)[0x55831101cd23]\r\nredis-server *:6379(processInputBuffer+0xf8)[0x55831102fec8]\r\nredis-server *:6379(+0xfbbb8)[0x5583110c7bb8]\r\nredis-server *:6379(aeProcessEvents+0x292)[0x558311013e32]\r\nredis-server *:6379(aeMain+0x1d)[0x55831101409d]\r\nredis-server *:6379(main+0x316)[0x5583110102b6]\r\n/lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xea)[0x7f52847bcd0a]\r\nredis-server *:6379(_start+0x2a)[0x55831101078a]\r\n\r\n------ REGISTERS ------\r\n1:M 07 Jun 2022 18:37:13.928 # \r\nRAX:000000000000000a RBX:00007f52733ce790\r\nRCX:0000000000000000 RDX:0000000000000001\r\nRDI:00007f52733ce790 RSI:0000000000000330\r\nRBP:0000000000000330 RSP:00007ffcb4ca13b0\r\nR8 :cfa6062247c2fade R9 :00007f5284211f23\r\nR10:0000000000000006 R11:00007f52832cacd0\r\nR12:0000000000000330 R13:0000000000000001\r\nR14:00007f527307aba0 R15:00007ffcb4cb9540\r\nRIP:00007f52830b9b70 EFL:0000000000010246\r\nCSGSFS:002b000000000033\r\n1:M 07 Jun 2022 18:37:13.928 # (00007ffcb4ca13bf) -> 00007f52830ba290\r\n1:M 07 Jun 2022 18:37:13.928 # (00007ffcb4ca13be) -> 00007f527307aba0\r\n1:M 07 Jun 2022 18:37:13.928 # (00007ffcb4ca13bd) -> 0000000000000001\r\n1:M 07 Jun 2022 18:37:13.928 # (00007ffcb4ca13bc) -> 00007ffcb4ca3770\r\n1:M 07 Jun 2022 18:37:13.928 # (00007ffcb4ca13bb) -> 00007f5273370800\r\n1:M 07 Jun 2022 18:37:13.928 # (00007ffcb4ca13ba) -> 00007f52733cd5d8\r\n1:M 07 Jun 2022 18:37:13.928 # (00007ffcb4ca13b9) -> 0000000000000000\r\n1:M 07 Jun 2022 18:37:13.928 # (00007ffcb4ca13b8) -> 0000000000000000\r\n1:M 07 Jun 2022 18:37:13.928 # (00007ffcb4ca13b7) -> 00007f52830e2b59\r\n1:M 07 Jun 2022 18:37:13.928 # (00007ffcb4ca13b6) -> 00007ffcb4cb9540\r\n1:M 07 Jun 2022 18:37:13.928 # (00007ffcb4ca13b5) -> 00007f52830b9f25\r\n1:M 07 Jun 2022 18:37:13.928 # (00007ffcb4ca13b4) -> 00007f52732e2668\r\n1:M 07 Jun 2022 18:37:13.928 # (00007ffcb4ca13b3) -> 00007f52733cd5d8\r\n1:M 07 Jun 2022 18:37:13.928 # (00007ffcb4ca13b2) -> 00007f52733d9630\r\n1:M 07 Jun 2022 18:37:13.928 # (00007ffcb4ca13b1) -> 0000000000000002\r\n1:M 07 Jun 2022 18:37:13.928 # (00007ffcb4ca13b0) -> 00007f52734cb500\r\n\r\n------ INFO OUTPUT ------\r\n# Server\r\nredis_version:6.2.6\r\nredis_git_sha1:00000000\r\nredis_git_dirty:0\r\nredis_build_id:9c335ca9779faba5\r\nredis_mode:standalone\r\nos:Linux 5.10.104-linuxkit x86_64\r\narch_bits:64\r\nmultiplexing_api:epoll\r\natomicvar_api:atomic-builtin\r\ngcc_version:10.2.1\r\nprocess_id:1\r\nprocess_supervised:no\r\nrun_id:a15e7bdb45af784307c602d897cd7a0a13df2030\r\ntcp_port:6379\r\nserver_time_usec:1654627033925959\r\nuptime_in_seconds:586\r\nuptime_in_days:0\r\nhz:10\r\nconfigured_hz:10\r\nlru_clock:10459865\r\nexecutable:/data/redis-server\r\nconfig_file:\r\nio_threads_active:0\r\n\r\n# Clients\r\nconnected_clients:2\r\ncluster_connections:0\r\nmaxclients:10000\r\nclient_recent_max_input_buffer:520\r\nclient_recent_max_output_buffer:21720\r\nblocked_clients:0\r\ntracking_clients:0\r\nclients_in_timeout_table:0\r\n\r\n# Memory\r\nused_memory:10472464\r\nused_memory_human:9.99M\r\nused_memory_rss:33411072\r\nused_memory_rss_human:31.86M\r\nused_memory_peak:10555704\r\nused_memory_peak_human:10.07M\r\nused_memory_peak_perc:99.21%\r\nused_memory_overhead:9362432\r\nused_memory_startup:9310608\r\nused_memory_dataset:1110032\r\nused_memory_dataset_perc:95.54%\r\nallocator_allocated:10925312\r\nallocator_active:11587584\r\nallocator_resident:17072128\r\ntotal_system_memory:33674465280\r\ntotal_system_memory_human:31.36G\r\nused_memory_lua:37888\r\nused_memory_lua_human:37.00K\r\nused_memory_scripts:0\r\nused_memory_scripts_human:0B\r\nnumber_of_cached_scripts:0\r\nmaxmemory:0\r\nmaxmemory_human:0B\r\nmaxmemory_policy:noeviction\r\nallocator_frag_ratio:1.06\r\nallocator_frag_bytes:662272\r\nallocator_rss_ratio:1.47\r\nallocator_rss_bytes:5484544\r\nrss_overhead_ratio:1.96\r\nrss_overhead_bytes:16338944\r\nmem_fragmentation_ratio:3.19\r\nmem_fragmentation_bytes:22942392\r\nmem_not_counted_for_evict:0\r\nmem_replication_backlog:0\r\nmem_clients_slaves:0\r\nmem_clients_normal:41032\r\nmem_aof_buffer:0\r\nmem_allocator:jemalloc-5.1.0\r\nactive_defrag_running:0\r\nlazyfree_pending_objects:0\r\nlazyfreed_objects:0\r\n\r\n# Persistence\r\nloading:0\r\ncurrent_cow_size:0\r\ncurrent_cow_size_age:0\r\ncurrent_fork_perc:0.00\r\ncurrent_save_keys_processed:0\r\ncurrent_save_keys_total:0\r\nrdb_changes_since_last_save:3201\r\nrdb_bgsave_in_progress:0\r\nrdb_last_save_time:1654626803\r\nrdb_last_bgsave_status:ok\r\nrdb_last_bgsave_time_sec:0\r\nrdb_current_bgsave_time_sec:-1\r\nrdb_last_cow_size:811008\r\naof_enabled:0\r\naof_rewrite_in_progress:0\r\naof_rewrite_scheduled:0\r\naof_last_rewrite_time_sec:-1\r\naof_current_rewrite_time_sec:-1\r\naof_last_bgrewrite_status:ok\r\naof_last_write_status:ok\r\naof_last_cow_size:0\r\nmodule_fork_in_progress:0\r\nmodule_fork_last_cow_size:0\r\n\r\n# Stats\r\ntotal_connections_received:3\r\ntotal_commands_processed:20482\r\ninstantaneous_ops_per_sec:44\r\ntotal_net_input_bytes:5659232\r\ntotal_net_output_bytes:5988375\r\ninstantaneous_input_kbps:11.99\r\ninstantaneous_output_kbps:13.17\r\nrejected_connections:0\r\nsync_full:0\r\nsync_partial_ok:0\r\nsync_partial_err:0\r\nexpired_keys:39\r\nexpired_stale_perc:0.00\r\nexpired_time_cap_reached_count:0\r\nexpire_cycle_cpu_milliseconds:15\r\nevicted_keys:0\r\nkeyspace_hits:19822\r\nkeyspace_misses:2423\r\npubsub_channels:0\r\npubsub_patterns:0\r\nlatest_fork_usec:944\r\ntotal_forks:6\r\nmigrate_cached_sockets:0\r\nslave_expires_tracked_keys:0\r\nactive_defrag_hits:0\r\nactive_defrag_misses:0\r\nactive_defrag_key_hits:0\r\nactive_defrag_key_misses:0\r\ntracking_total_keys:0\r\ntracking_total_items:0\r\ntracking_total_prefixes:0\r\nunexpected_error_replies:0\r\ntotal_error_replies:0\r\ndump_payload_sanitizations:0\r\ntotal_reads_processed:20479\r\ntotal_writes_processed:20477\r\nio_threaded_reads_processed:0\r\nio_threaded_writes_processed:0\r\n\r\n# Replication\r\nrole:master\r\nconnected_slaves:0\r\nmaster_failover_state:no-failover\r\nmaster_replid:3e34689ec20d73807dcec81f7d8017e44140be83\r\nmaster_replid2:0000000000000000000000000000000000000000\r\nmaster_repl_offset:0\r\nsecond_repl_offset:-1\r\nrepl_backlog_active:0\r\nrepl_backlog_size:1048576\r\nrepl_backlog_first_byte_offset:0\r\nrepl_backlog_histlen:0\r\n\r\n# CPU\r\nused_cpu_sys:11.910317\r\nused_cpu_user:10.257825\r\nused_cpu_sys_children:0.010372\r\nused_cpu_user_children:0.008196\r\nused_cpu_sys_main_thread:2.537683\r\nused_cpu_user_main_thread:2.556233\r\n\r\n# Modules\r\nmodule:name=bf,ver=20209,api=1,filters=0,usedby=[],using=[],options=[]\r\nmodule:name=search,ver=999999,api=1,filters=0,usedby=[],using=[ReJSON],options=[handle-io-errors]\r\nmodule:name=graph,ver=20813,api=1,filters=0,usedby=[],using=[ReJSON],options=[]\r\nmodule:name=timeseries,ver=10611,api=1,filters=0,usedby=[],using=[],options=[handle-io-errors]\r\nmodule:name=ReJSON,ver=20009,api=1,filters=0,usedby=[search|graph],using=[],options=[handle-io-errors]\r\nmodule:name=ai,ver=10205,api=1,filters=0,usedby=[],using=[],options=[handle-io-errors]\r\nmodule:name=rg,ver=10204,api=1,filters=1,usedby=[rg],using=[rg],options=[]\r\n\r\n# Commandstats\r\ncmdstat_keys:calls=3,usec=97,usec_per_call=32.33,rejected_calls=0,failed_calls=0\r\ncmdstat_ts.mrange:calls=2913,usec=720012,usec_per_call=247.17,rejected_calls=0,failed_calls=0\r\ncmdstat_ts.revrange:calls=2913,usec=65191,usec_per_call=22.38,rejected_calls=0,failed_calls=0\r\ncmdstat_flushall:calls=2,usec=5826,usec_per_call=2913.00,rejected_calls=0,failed_calls=0\r\ncmdstat_pexpireat:calls=813,usec=10252,usec_per_call=12.61,rejected_calls=0,failed_calls=0\r\ncmdstat_FT.SEARCH:calls=26,usec=1722,usec_per_call=66.23,rejected_calls=0,failed_calls=0\r\ncmdstat_info:calls=4,usec=38,usec_per_call=9.50,rejected_calls=0,failed_calls=0\r\ncmdstat_json.set:calls=3761,usec=210027,usec_per_call=55.84,rejected_calls=0,failed_calls=0\r\ncmdstat_ts.madd:calls=2913,usec=179731,usec_per_call=61.70,rejected_calls=0,failed_calls=0\r\ncmdstat_FT.CREATE:calls=2,usec=271,usec_per_call=135.50,rejected_calls=0,failed_calls=0\r\ncmdstat_config:calls=1,usec=13,usec_per_call=13.00,rejected_calls=0,failed_calls=0\r\ncmdstat_command:calls=1,usec=980,usec_per_call=980.00,rejected_calls=0,failed_calls=0\r\ncmdstat_ts.create:calls=300,usec=11196,usec_per_call=37.32,rejected_calls=0,failed_calls=0\r\ncmdstat_json.get:calls=6830,usec=119460,usec_per_call=17.49,rejected_calls=0,failed_calls=0\r\n\r\n# Errorstats\r\n\r\n# Cluster\r\ncluster_enabled:0\r\n\r\n# Keyspace\r\ndb0:keys=205,expires=12,avg_ttl=1589530\r\n\r\n------ CLIENT LIST OUTPUT ------\r\nid=20 addr=172.18.0.1:59178 laddr=172.18.0.2:6379 fd=20 name= age=531 idle=0 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=80 qbuf-free=40874 argv-mem=49 obl=0 oll=0 omem=0 tot-mem=61521 events=r cmd=json.set user=default redir=-1\r\nid=23 addr=127.0.0.1:34318 laddr=127.0.0.1:6379 fd=21 name= age=329 idle=33 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 argv-mem=0 obl=0 oll=0 omem=0 tot-mem=20504 events=r cmd=json.get user=default redir=-1\r\n\r\n------ CURRENT CLIENT INFO ------\r\nid=20 addr=172.18.0.1:59178 laddr=172.18.0.2:6379 fd=20 name= age=531 idle=0 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=80 qbuf-free=40874 argv-mem=49 obl=0 oll=0 omem=0 tot-mem=61521 events=r cmd=json.set user=default redir=-1\r\nargv[0]: 'JSON.SET'\r\nargv[1]: 'trade:TGT:1m'\r\nargv[2]: '$.parent_status'\r\nargv[3]: '\"PreSubmitted\"'\r\n1:M 07 Jun 2022 18:37:13.928 # key 'trade:TGT:1m' found in DB containing the following object:\r\n1:M 07 Jun 2022 18:37:13.928 # Object type: 5\r\n1:M 07 Jun 2022 18:37:13.928 # Object encoding: 0\r\n1:M 07 Jun 2022 18:37:13.928 # Object refcount: 1\r\n\r\n------ MODULES INFO OUTPUT ------\r\n# graph_executing commands\r\n\r\n# ReJSON_trace\r\nReJSON_trace:   0: redis_module::base_info_func\r\n   1: rejson::__info_func\r\n   2: modulesCollectInfo\r\n             at /usr/src/redis/src/module.c:7078:9\r\n   3: logModulesInfo\r\n             at /usr/src/redis/src/debug.c:1598:22\r\n   4: printCrashReport\r\n             at /usr/src/redis/src/debug.c:1849:5\r\n      sigsegvHandler\r\n             at /usr/src/redis/src/debug.c:1831:5\r\n   5: <unknown>\r\n   6: NumericRange_Add\r\n   7: NumericRangeNode_Add\r\n   8: NumericRangeTree_Add\r\n   9: IndexerBulkAdd\r\n  10: indexBulkFields\r\n  11: Indexer_Process\r\n  12: Indexer_Add\r\n  13: Document_AddToIndexes\r\n  14: IndexSpec_UpdateDoc\r\n  15: Indexes_UpdateMatchingWithSchemaRules\r\n  16: HashNotificationCallback\r\n  17: moduleNotifyKeyspaceEvent\r\n             at /usr/src/redis/src/module.c:5961:13\r\n  18: notifyKeyspaceEvent\r\n             at /usr/src/redis/src/notify.c:111:6\r\n  19: RM_NotifyKeyspaceEvent\r\n             at /usr/src/redis/src/module.c:5929:5\r\n  20: redis_module::raw::notify_keyspace_event\r\n  21: rejson::commands::json_set\r\n  22: rejson::RedisModule_OnLoad::__do_command\r\n  23: RedisModuleCommandDispatcher\r\n             at /usr/src/redis/src/module.c:694:5\r\n  24: call\r\n             at /usr/src/redis/src/server.c:3721:5\r\n  25: processCommand\r\n             at /usr/src/redis/src/server.c:4241:9\r\n  26: processCommandAndResetClient\r\n             at /usr/src/redis/src/networking.c:2039:9\r\n      processInputBuffer\r\n             at /usr/src/redis/src/networking.c:2140:17\r\n  27: callHandler\r\n             at /usr/src/redis/src/connhelpers.h:79:18\r\n      connSocketEventHandler\r\n             at /usr/src/redis/src/connection.c:295:14\r\n  28: aeProcessEvents\r\n             at /usr/src/redis/src/ae.c:427:17\r\n  29: aeMain\r\n             at /usr/src/redis/src/ae.c:487:9\r\n  30: main\r\n             at /usr/src/redis/src/server.c:6401:5\r\n  31: __libc_start_main\r\n  32: _start\r\n\r\n\r\n# ai_versions\r\nai_RedisAI_version:1.2.5\r\nai_low_level_API_version:1\r\nai_rdb_version:4\r\n\r\n# ai_git\r\nai_git_sha:746b199e69f272d12aab00c26d31c8e35eb48b29\r\n\r\n# ai_load_time_configs\r\nai_threads_per_queue:1\r\nai_inter_op_parallelism:0\r\nai_intra_op_parallelism:0\r\nai_model_execution_timeout:5000\r\nai_backend_memory_limit:0\r\n\r\n# ai_backends_info\r\n\r\n# ai_cpu\r\nai_self_used_cpu_sys:11.910756\r\nai_self_used_cpu_user:10.274309\r\nai_children_used_cpu_sys:0.010372\r\nai_children_used_cpu_user:0.008196\r\nai_main_thread_used_cpu_sys:2.910756\r\nai_main_thread_used_cpu_user:2.274309\r\nai_queue_CPU_bthread_n1_used_cpu_total:17.023022\r\n\r\n# rg\r\nrg_nexecutions:0\r\nrg_nregistrations:0\r\n\r\n# rg_regisrations\r\n\r\n# rg_plugins\r\nrg_GearsPythonPlugin:version=10000\r\n\r\n# rg_python_stats\r\nrg_TotalAllocated:23743656\r\nrg_PeakAllocated:8294040\r\nrg_CurrAllocated:8201528\r\n\r\n# rg_python_requirements\r\n\r\n# rg_python_sessions\r\n\r\n------ FAST MEMORY TEST ------\r\n1:M 07 Jun 2022 18:37:13.947 # Bio thread for job type #0 terminated\r\n1:M 07 Jun 2022 18:37:13.948 # Bio thread for job type #1 terminated\r\n1:M 07 Jun 2022 18:37:13.948 # Bio thread for job type #2 terminated\r\n*** Preparing to test memory region 5583111df000 (2277376 bytes)\r\n*** Preparing to test memory region 558312f3d000 (544768 bytes)\r\n*** Preparing to test memory region 7f52675f4000 (5242880 bytes)\r\n*** Preparing to test memory region 7f5268000000 (135168 bytes)\r\n*** Preparing to test memory region 7f526cff3000 (4194304 bytes)\r\n*** Preparing to test memory region 7f526d600000 (8388608 bytes)\r\n*** Preparing to test memory region 7f526de00000 (4194304 bytes)\r\n*** Preparing to test memory region 7f526e400000 (8388608 bytes)\r\n*** Preparing to test memory region 7f526ec00000 (4194304 bytes)\r\n*** Preparing to test memory region 7f526f1fb000 (8388608 bytes)\r\n*** Preparing to test memory region 7f526f9fc000 (8388608 bytes)\r\n*** Preparing to test memory region 7f52701fd000 (8388608 bytes)\r\n*** Preparing to test memory region 7f52709fe000 (8388608 bytes)\r\n*** Preparing to test memory region 7f52711ff000 (8388608 bytes)\r\n*** Preparing to test memory region 7f5271a00000 (8388608 bytes)\r\n*** Preparing to test memory region 7f5272200000 (4194304 bytes)\r\n*** Preparing to test memory region 7f5272780000 (8388608 bytes)\r\n*** Preparing to test memory region 7f5272f80000 (13107200 bytes)\r\n*** Preparing to test memory region 7f5273d27000 (2621440 bytes)\r\n*** Preparing to test memory region 7f5273fa8000 (8388608 bytes)\r\n*** Preparing to test memory region 7f5274b0e000 (139264 bytes)\r\n*** Preparing to test memory region 7f5274b31000 (8388608 bytes)\r\n*** Preparing to test memory region 7f5275332000 (8388608 bytes)\r\n*** Preparing to test memory region 7f5275b33000 (8388608 bytes)\r\n*** Preparing to test memory region 7f5276334000 (8388608 bytes)\r\n*** Preparing to test memory region 7f5276b35000 (8388608 bytes)\r\n*** Preparing to test memory region 7f52776e4000 (8388608 bytes)\r\n*** Preparing to test memory region 7f5277ee5000 (8388608 bytes)\r\n*** Preparing to test memory region 7f52788af000 (12288 bytes)\r\n*** Preparing to test memory region 7f52788b3000 (8388608 bytes)\r\n*** Preparing to test memory region 7f52790b4000 (8388608 bytes)\r\n*** Preparing to test memory region 7f52798b5000 (8388608 bytes)\r\n*** Preparing to test memory region 7f527a0b6000 (8388608 bytes)\r\n*** Preparing to test memory region 7f527a8b7000 (8388608 bytes)\r\n*** Preparing to test memory region 7f527b0b8000 (8388608 bytes)\r\n*** Preparing to test memory region 7f527b8b9000 (8388608 bytes)\r\n*** Preparing to test memory region 7f527c0ba000 (8388608 bytes)\r\n*** Preparing to test memory region 7f527c8bb000 (8388608 bytes)\r\n*** Preparing to test memory region 7f527d0bc000 (8388608 bytes)\r\n*** Preparing to test memory region 7f527d8bd000 (8388608 bytes)\r\n*** Preparing to test memory region 7f527e0be000 (8388608 bytes)\r\n*** Preparing to test memory region 7f527e8bf000 (8388608 bytes)\r\n*** Preparing to test memory region 7f527f0c0000 (8388608 bytes)\r\n*** Preparing to test memory region 7f527f8c1000 (8388608 bytes)\r\n*** Preparing to test memory region 7f52819fb000 (12288 bytes)\r\n*** Preparing to test memory region 7f52819ff000 (8388608 bytes)\r\n*** Preparing to test memory region 7f5282200000 (8388608 bytes)\r\n*** Preparing to test memory region 7f5282a00000 (4194304 bytes)\r\n*** Preparing to test memory region 7f5282f81000 (8192 bytes)\r\n*** Preparing to test memory region 7f52833b9000 (28672 bytes)\r\n*** Preparing to test memory region 7f52833c1000 (8388608 bytes)\r\n*** Preparing to test memory region 7f5283dff000 (4096 bytes)\r\n*** Preparing to test memory region 7f5283e00000 (8388608 bytes)\r\n*** Preparing to test memory region 7f5284649000 (4096 bytes)\r\n*** Preparing to test memory region 7f528474f000 (4096 bytes)\r\n*** Preparing to test memory region 7f5284790000 (24576 bytes)\r\n*** Preparing to test memory region 7f5284957000 (16384 bytes)\r\n*** Preparing to test memory region 7f5284979000 (16384 bytes)\r\n*** Preparing to test memory region 7f5284c6d000 (16384 bytes)\r\n*** Preparing to test memory region 7f5284e4e000 (8192 bytes)\r\n*** Preparing to test memory region 7f5284e7e000 (4096 bytes)\r\n```\r\n\r\n**Additional information**\r\n\r\n1. redislabs/redismod:latest on Docker Desktop 4.8.2 on MacBook Pro (15-inch, 2018), macOS 12.4\r\n2. No reliably consistent way to reproduce that I have found.\r\n3. docker:\r\n```\r\n# docker-compose.yml\r\nservices:\r\n  redis:\r\n    restart: always\r\n    image: redislabs/redismod:latest\r\n    ports:\r\n      - 6379:6379\r\n```\r\n",
  "state": "closed",
  "created_at": "2022-06-07T19:02:19Z",
  "updated_at": "2022-06-08T11:22:44Z",
  "closed_at": "2022-06-08T05:22:52Z",
  "labels": [],
  "comments_data": [
    {
      "id": 1149360513,
      "user": "sundb",
      "created_at": "2022-06-08T01:49:42Z",
      "body": "@jlixfeld Please create a new issue in https://github.com/RedisLabsModules/redismod."
    },
    {
      "id": 1149475995,
      "user": "oranagra",
      "created_at": "2022-06-08T05:22:52Z",
      "body": "or in https://github.com/RediSearch/RediSearch (it looks like the crash is there)."
    },
    {
      "id": 1149778166,
      "user": "jlixfeld",
      "created_at": "2022-06-08T11:09:34Z",
      "body": "Ah.  I was very confused when I looked in the repositories under https://github.com/redis and couldn't find repos for the redismod or redisearch repos to create the issue there.  I assumed at that point the bug template was referring to something else and created the issue here."
    },
    {
      "id": 1149790064,
      "user": "oranagra",
      "created_at": "2022-06-08T11:22:44Z",
      "body": "thanks for that feedback.. we'll look into ways to make it clearer."
    }
  ]
}