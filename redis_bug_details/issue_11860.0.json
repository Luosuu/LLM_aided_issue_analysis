{
  "issue_number": 11860.0,
  "title": "[CRASH] Docker redis container crashed continuously",
  "body": "Hi All ,\r\n\r\nI'm using Redis docker container on Ubuntu , and yesterday my container crashed continuously.\r\nSince, each time I want to start it again, it stops a few seconds after.\r\n\r\nSo I checked the logs, and here it is :\r\n\r\n```\r\n=== REDIS BUG REPORT START: Cut & paste starting from here ===\r\n1:M 28 Feb 2023 10:23:35.971 # Redis 7.0.8 crashed by signal: 11, si_code: 128\r\n1:M 28 Feb 2023 10:23:35.971 # Accessing address: 0\r\n\r\n------ INFO OUTPUT ------\r\n# Server\r\nredis_version:7.0.8\r\nredis_git_sha1:00000000\r\nredis_git_dirty:0\r\nredis_build_id:759b58da3ee56703\r\nredis_mode:standalone\r\nos:Linux 5.4.0-100-generic x86_64\r\narch_bits:64\r\nmonotonic_clock:POSIX clock_gettime\r\nmultiplexing_api:epoll\r\natomicvar_api:c11-builtin\r\ngcc_version:12.2.1\r\nprocess_id:1\r\nprocess_supervised:no\r\nrun_id:822120138e8633ae8417de3a0d2063206094677c\r\ntcp_port:6379\r\nserver_time_usec:1677579810563280\r\nuptime_in_seconds:17\r\nuptime_in_days:0\r\nhz:10\r\nconfigured_hz:10\r\nlru_clock:16635426\r\nexecutable:/data/redis-server\r\nconfig_file:\r\nio_threads_active:0\r\n\r\n# Clients\r\nconnected_clients:6\r\ncluster_connections:0\r\nmaxclients:10000\r\nclient_recent_max_input_buffer:20480\r\nclient_recent_max_output_buffer:0\r\nblocked_clients:0\r\ntracking_clients:0\r\nclients_in_timeout_table:0\r\n\r\n# Memory\r\nused_memory:1241968\r\nused_memory_human:1.18M\r\nused_memory_rss:527994880\r\nused_memory_rss_human:503.54M\r\nused_memory_peak:596541328\r\nused_memory_peak_human:568.91M\r\nused_memory_peak_perc:0.21%\r\nused_memory_overhead:985272\r\nused_memory_startup:862152\r\nused_memory_dataset:256696\r\nused_memory_dataset_perc:67.58%\r\nallocator_allocated:538504496\r\nallocator_active:538767360\r\nallocator_resident:544329728\r\ntotal_system_memory:16785887232\r\ntotal_system_memory_human:15.63G\r\nused_memory_lua:957948928\r\nused_memory_vm_eval:957948928\r\nused_memory_lua_human:913.57M\r\nused_memory_scripts_eval:1424\r\nnumber_of_cached_scripts:2\r\nnumber_of_functions:0\r\nnumber_of_libraries:0\r\nused_memory_vm_functions:32768\r\nused_memory_vm_total:957981696\r\nused_memory_vm_total_human:913.60M\r\nused_memory_functions:184\r\nused_memory_scripts:1608\r\nused_memory_scripts_human:1.57K\r\nmaxmemory:0\r\nmaxmemory_human:0B\r\nmaxmemory_policy:noeviction\r\nallocator_frag_ratio:1.00\r\nallocator_frag_bytes:262864\r\nallocator_rss_ratio:1.01\r\nallocator_rss_bytes:5562368\r\nrss_overhead_ratio:0.97\r\nrss_overhead_bytes:-16334848\r\nmem_fragmentation_ratio:0.98\r\nmem_fragmentation_bytes:-10107576\r\nmem_not_counted_for_evict:8\r\nmem_replication_backlog:0\r\nmem_total_replication_buffers:0\r\nmem_clients_slaves:0\r\nmem_clients_normal:85800\r\nmem_cluster_links:0\r\nmem_aof_buffer:8\r\nmem_allocator:jemalloc-5.2.1\r\nactive_defrag_running:0\r\nlazyfree_pending_objects:0\r\nlazyfreed_objects:0\r\n\r\n# Persistence\r\nloading:0\r\nasync_loading:0\r\ncurrent_cow_peak:0\r\ncurrent_cow_size:0\r\ncurrent_cow_size_age:0\r\ncurrent_fork_perc:0.00\r\ncurrent_save_keys_processed:0\r\ncurrent_save_keys_total:0\r\nrdb_changes_since_last_save:25\r\nrdb_bgsave_in_progress:0\r\nrdb_last_save_time:1677579793\r\nrdb_last_bgsave_status:ok\r\nrdb_last_bgsave_time_sec:-1\r\nrdb_current_bgsave_time_sec:-1\r\nrdb_saves:0\r\nrdb_last_cow_size:0\r\nrdb_last_load_keys_expired:0\r\nrdb_last_load_keys_loaded:686\r\naof_enabled:1\r\naof_rewrite_in_progress:0\r\naof_rewrite_scheduled:0\r\naof_last_rewrite_time_sec:-1\r\naof_current_rewrite_time_sec:-1\r\naof_last_bgrewrite_status:ok\r\naof_rewrites:0\r\naof_rewrites_consecutive_failures:0\r\naof_last_write_status:ok\r\naof_last_cow_size:0\r\nmodule_fork_in_progress:0\r\nmodule_fork_last_cow_size:0\r\naof_current_size:56243715\r\naof_base_size:56239614\r\naof_pending_rewrite:0\r\naof_buffer_length:0\r\naof_pending_bio_fsync:0\r\naof_delayed_fsync:0\r\n\r\n# Stats\r\ntotal_connections_received:14\r\ntotal_commands_processed:44\r\ninstantaneous_ops_per_sec:17\r\ntotal_net_input_bytes:11401\r\ntotal_net_output_bytes:10363\r\ntotal_net_repl_input_bytes:0\r\ntotal_net_repl_output_bytes:0\r\ninstantaneous_input_kbps:5.43\r\ninstantaneous_output_kbps:0.07\r\ninstantaneous_input_repl_kbps:0.00\r\ninstantaneous_output_repl_kbps:0.00\r\nrejected_connections:0\r\nsync_full:0\r\nsync_partial_ok:0\r\nsync_partial_err:0\r\nexpired_keys:0\r\nexpired_stale_perc:0.00\r\nexpired_time_cap_reached_count:0\r\nexpire_cycle_cpu_milliseconds:0\r\nevicted_keys:0\r\nevicted_clients:0\r\ntotal_eviction_exceeded_time:0\r\ncurrent_eviction_exceeded_time:0\r\nkeyspace_hits:0\r\nkeyspace_misses:10\r\npubsub_channels:0\r\npubsub_patterns:1\r\npubsubshard_channels:0\r\nlatest_fork_usec:0\r\ntotal_forks:0\r\nmigrate_cached_sockets:0\r\nslave_expires_tracked_keys:0\r\nactive_defrag_hits:0\r\nactive_defrag_misses:0\r\nactive_defrag_key_hits:0\r\nactive_defrag_key_misses:0\r\ntotal_active_defrag_time:0\r\ncurrent_active_defrag_time:0\r\ntracking_total_keys:0\r\ntracking_total_items:0\r\ntracking_total_prefixes:0\r\nunexpected_error_replies:0\r\ntotal_error_replies:0\r\ndump_payload_sanitizations:0\r\ntotal_reads_processed:38\r\ntotal_writes_processed:29\r\nio_threaded_reads_processed:0\r\nio_threaded_writes_processed:0\r\nreply_buffer_shrinks:4\r\nreply_buffer_expands:0\r\n\r\n# Replication\r\nrole:master\r\nconnected_slaves:0\r\nmaster_failover_state:no-failover\r\nmaster_replid:ceff55483824e89b8ea9638c47d0a6c01a41ea3a\r\nmaster_replid2:0000000000000000000000000000000000000000\r\nmaster_repl_offset:0\r\nsecond_repl_offset:-1\r\nrepl_backlog_active:0\r\nrepl_backlog_size:1048576\r\nrepl_backlog_first_byte_offset:0\r\nrepl_backlog_histlen:0\r\n\r\n# CPU\r\nused_cpu_sys:1.606245\r\nused_cpu_user:4.594422\r\nused_cpu_sys_children:0.000000\r\nused_cpu_user_children:0.001928\r\nused_cpu_sys_main_thread:1.605321\r\nused_cpu_user_main_thread:4.591781\r\n\r\n# Modules\r\n\r\n# Commandstats\r\ncmdstat_info:calls=2,usec=156,usec_per_call=78.00,rejected_calls=0,failed_calls=0\r\ncmdstat_eval:calls=14,usec=608,usec_per_call=43.43,rejected_calls=0,failed_calls=0\r\ncmdstat_select:calls=4,usec=9,usec_per_call=2.25,rejected_calls=0,failed_calls=0\r\ncmdstat_psubscribe:calls=1,usec=5,usec_per_call=5.00,rejected_calls=0,failed_calls=0\r\ncmdstat_lpop:calls=5,usec=700294,usec_per_call=140058.80,rejected_calls=0,failed_calls=0\r\ncmdstat_zrangebyscore:calls=10,usec=42,usec_per_call=4.20,rejected_calls=0,failed_calls=0\r\ncmdstat_ping:calls=8,usec=87,usec_per_call=10.88,rejected_calls=0,failed_calls=0\r\n\r\n# Errorstats\r\n\r\n# Latencystats\r\nlatency_percentiles_usec_info:p50=57.087,p99=99.327,p99.9=99.327\r\nlatency_percentiles_usec_eval:p50=28.031,p99=151.551,p99.9=151.551\r\nlatency_percentiles_usec_select:p50=2.007,p99=4.015,p99.9=4.015\r\nlatency_percentiles_usec_psubscribe:p50=5.023,p99=5.023,p99.9=5.023\r\nlatency_percentiles_usec_lpop:p50=2.007,p99=700448.767,p99.9=700448.767\r\nlatency_percentiles_usec_zrangebyscore:p50=3.007,p99=6.015,p99.9=6.015\r\nlatency_percentiles_usec_ping:p50=1.003,p99=77.311,p99.9=77.311\r\n\r\n# Cluster\r\ncluster_enabled:0\r\n\r\n# Keyspace\r\ndb0:keys=687,expires=0,avg_ttl=0\r\n\r\n------ CLIENT LIST OUTPUT ------\r\nid=5 addr=172.18.0.2:35494 laddr=172.18.0.4:6379 fd=9 name= age=16 idle=16 flags=N db=0 sub=0 psub=0 ssub=0 multi=-1 qbuf=0 qbuf-free=0 argv-mem=0 multi-mem=0 rbs=1024 rbp=0 obl=0 oll=0 omem=0 tot-mem=1800 events=r cmd=info user=default redir=-1 resp=2\r\nid=6 addr=172.18.0.2:35496 laddr=172.18.0.4:6379 fd=10 name= age=16 idle=16 flags=P db=0 sub=0 psub=1 ssub=0 multi=-1 qbuf=0 qbuf-free=0 argv-mem=0 multi-mem=0 rbs=1024 rbp=0 obl=0 oll=0 omem=0 tot-mem=1824 events=r cmd=psubscribe user=default redir=-1 resp=2\r\nid=15 addr=172.18.0.5:51928 laddr=172.18.0.4:6379 fd=11 name= age=0 idle=0 flags=N db=0 sub=0 psub=0 ssub=0 multi=-1 qbuf=0 qbuf-free=20474 argv-mem=0 multi-mem=0 rbs=1024 rbp=0 obl=0 oll=0 omem=0 tot-mem=22272 events=r cmd=eval user=default redir=-1 resp=2\r\nid=16 addr=172.18.0.5:51930 laddr=172.18.0.4:6379 fd=12 name= age=0 idle=0 flags=N db=0 sub=0 psub=0 ssub=0 multi=-1 qbuf=0 qbuf-free=20474 argv-mem=0 multi-mem=0 rbs=1024 rbp=0 obl=0 oll=0 omem=0 tot-mem=22272 events=r cmd=eval user=default redir=-1 resp=2\r\nid=17 addr=172.18.0.5:51932 laddr=172.18.0.4:6379 fd=13 name= age=0 idle=0 flags=N db=0 sub=0 psub=0 ssub=0 multi=-1 qbuf=0 qbuf-free=20474 argv-mem=0 multi-mem=0 rbs=16384 rbp=0 obl=0 oll=0 omem=0 tot-mem=37632 events=r cmd=eval user=default redir=-1 resp=2\r\nid=18 addr=172.18.0.5:51934 laddr=172.18.0.4:6379 fd=14 name= age=0 idle=0 flags=N db=0 sub=0 psub=0 ssub=0 multi=-1 qbuf=559 qbuf-free=19915 argv-mem=507 multi-mem=0 rbs=16384 rbp=16384 obl=0 oll=0 omem=0 tot-mem=38195 events=r cmd=eval user=default redir=-1 resp=2\r\n\r\n------ CURRENT CLIENT INFO ------\r\nid=18 addr=172.18.0.5:51934 laddr=172.18.0.4:6379 fd=14 name= age=0 idle=0 flags=N db=0 sub=0 psub=0 ssub=0 multi=-1 qbuf=559 qbuf-free=19915 argv-mem=507 multi-mem=0 rbs=16384 rbp=16384 obl=0 oll=0 omem=0 tot-mem=38195 events=r cmd=eval user=default redir=-1 resp=2\r\nargv[0]: '\"EVAL\"'\r\nargv[1]: '\"-- Pop the first job off of the queue...\\nlocal job = redis.call('lpop', KEYS[1])\\nlocal reserved = false\\n\\nif(job ~= false) then\\n \"'\r\nargv[2]: '\"3\"'\r\nargv[3]: '\"queues:default\"'\r\nargv[4]: '\"queues:default:reserved\"'\r\nargv[5]: '\"queues:default:notify\"'\r\nargv[6]: '\"1677579900\"'\r\n\r\n------ MODULES INFO OUTPUT ------\r\n\r\n------ CONFIG DEBUG OUTPUT ------\r\nlazyfree-lazy-expire no\r\nclient-query-buffer-limit 1gb\r\nrepl-diskless-load disabled\r\nlazyfree-lazy-eviction no\r\nlazyfree-lazy-user-flush no\r\nactivedefrag no\r\nreplica-read-only yes\r\nproto-max-bulk-len 512mb\r\nslave-read-only yes\r\nio-threads 1\r\nsanitize-dump-payload no\r\nlazyfree-lazy-server-del no\r\nio-threads-do-reads no\r\nlazyfree-lazy-user-del no\r\nlist-compress-depth 0\r\nrepl-diskless-sync yes\r\n\r\n------ FAST MEMORY TEST ------\r\n1:M 28 Feb 2023 10:23:35.972 # Bio thread for job type #0 terminated\r\n1:M 28 Feb 2023 10:23:35.972 # Bio thread for job type #1 terminated\r\n1:M 28 Feb 2023 10:23:35.972 # Bio thread for job type #2 terminated\r\n*** Preparing to test memory region 55cd9d160000 (2306048 bytes)\r\n*** Preparing to test memory region 55cd9e8a6000 (12288 bytes)\r\n*** Preparing to test memory region 7fc892037000 (437571584 bytes)\r\n*** Preparing to test memory region 7fc8cb1c2000 (520347648 bytes)\r\n*** Preparing to test memory region 7fc8ea200000 (1551892480 bytes)\r\n*** Preparing to test memory region 7fc947800000 (8388608 bytes)\r\n*** Preparing to test memory region 7fc94800d000 (24576 bytes)\r\n*** Preparing to test memory region 7fc948015000 (4096 bytes)\r\n*** Preparing to test memory region 7fc948018000 (339968 bytes)\r\n*** Preparing to test memory region 7fc948420000 (12288 bytes)\r\n*** Preparing to test memory region 7fc94854f000 (12288 bytes)\r\n.O.O.O.O.O.O.O.O.O.O.O\r\nFast memory test PASSED, however your memory can still be broken. Please run a memory test for several hours if possible.\r\n\r\n=== REDIS BUG REPORT END. Make sure to include from START to END. ===\r\n\r\n\r\n\r\n```\r\n\r\n",
  "state": "open",
  "created_at": "2023-02-28T11:24:38Z",
  "updated_at": "2023-03-02T02:45:20Z",
  "closed_at": null,
  "labels": [],
  "comments_data": [
    {
      "id": 1448040299,
      "user": "sundb",
      "created_at": "2023-02-28T11:44:18Z",
      "body": "could you give the crash log of stack report?"
    },
    {
      "id": 1448130446,
      "user": "karimabdelaah",
      "created_at": "2023-02-28T12:54:38Z",
      "body": "> could you give the crash log of stack report?\r\n\r\ncan you advise me, how to get a crash log of the stack report , that's all I got  when I tried to get the crash log ,\r\nI used 'docker logs -f < container name >' to get this log"
    },
    {
      "id": 1448147707,
      "user": "oranagra",
      "created_at": "2023-02-28T13:06:34Z",
      "body": "looking at that crash report, the only way i can think of that the stack trace would be missing is if redis was compiled without `HAVE_BACKTRACE`"
    },
    {
      "id": 1448257762,
      "user": "karimabdelaah",
      "created_at": "2023-02-28T14:17:08Z",
      "body": "> looking at that crash report, the only way i can think of that the stack trace would be missing is if redis was compiled without `HAVE_BACKTRACE`\r\n\r\nI updated redis service and add HAVE_BACKTRACE \r\n\r\n```\r\n redis:\r\n    image: redis:alpine\r\n    container_name: ${REDIS_CONTAINER_NAME}\r\n    command: redis-server --appendonly yes\r\n    volumes:\r\n      - ./.docker-data/redis:/data\r\n    ports:\r\n      - \"${REDIS_CONTAINER_PORT}:6378\"\r\n    networks:\r\n      - abilities-network\r\n    healthcheck:\r\n      test: redis-cli -h redis -p 6379 ping\r\n      start_period: 3s\r\n      interval: 2s\r\n      timeout: 2s\r\n      retries: 10\r\n    environment:\r\n      HAVE_BACKTRACE: 1\r\n```\r\nbut still, the log returns no stack trace\r\n```\r\n=== REDIS BUG REPORT START: Cut & paste starting from here ===\r\n1:M 28 Feb 2023 13:52:08.396 # Redis 7.0.8 crashed by signal: 11, si_code: 128\r\n1:M 28 Feb 2023 13:52:08.396 # Accessing address: 0\r\n\r\n------ INFO OUTPUT ------\r\n# Server\r\nredis_version:7.0.8\r\nredis_git_sha1:00000000\r\nredis_git_dirty:0\r\nredis_build_id:759b58da3ee56703\r\nredis_mode:standalone\r\nos:Linux 5.4.0-100-generic x86_64\r\narch_bits:64\r\nmonotonic_clock:POSIX clock_gettime\r\nmultiplexing_api:epoll\r\natomicvar_api:c11-builtin\r\ngcc_version:12.2.1\r\nprocess_id:1\r\nprocess_supervised:no\r\nrun_id:0e1e8ad3a7a8b935ca50870527899b8403242d3c\r\ntcp_port:6379\r\nserver_time_usec:1677592322734307\r\nuptime_in_seconds:20\r\nuptime_in_days:0\r\nhz:10\r\nconfigured_hz:10\r\nlru_clock:16647938\r\nexecutable:/data/redis-server\r\nconfig_file:\r\nio_threads_active:0\r\n\r\n# Clients\r\nconnected_clients:3\r\ncluster_connections:0\r\nmaxclients:10000\r\nclient_recent_max_input_buffer:8\r\nclient_recent_max_output_buffer:0\r\nblocked_clients:0\r\ntracking_clients:0\r\nclients_in_timeout_table:0\r\n\r\n# Memory\r\nused_memory:1157952\r\nused_memory_human:1.10M\r\nused_memory_rss:527941632\r\nused_memory_rss_human:503.48M\r\nused_memory_peak:596541232\r\nused_memory_peak_human:568.91M\r\nused_memory_peak_perc:0.19%\r\nused_memory_overhead:903000\r\nused_memory_startup:862056\r\nused_memory_dataset:254952\r\nused_memory_dataset_perc:86.16%\r\nallocator_allocated:538370512\r\nallocator_active:538607616\r\nallocator_resident:544169984\r\ntotal_system_memory:16785887232\r\ntotal_system_memory_human:15.63G\r\nused_memory_lua:957948928\r\nused_memory_vm_eval:957948928\r\nused_memory_lua_human:913.57M\r\nused_memory_scripts_eval:1424\r\nnumber_of_cached_scripts:2\r\nnumber_of_functions:0\r\nnumber_of_libraries:0\r\nused_memory_vm_functions:32768\r\nused_memory_vm_total:957981696\r\nused_memory_vm_total_human:913.60M\r\nused_memory_functions:184\r\nused_memory_scripts:1608\r\nused_memory_scripts_human:1.57K\r\nmaxmemory:0\r\nmaxmemory_human:0B\r\nmaxmemory_policy:noeviction\r\nallocator_frag_ratio:1.00\r\nallocator_frag_bytes:237104\r\nallocator_rss_ratio:1.01\r\nallocator_rss_bytes:5562368\r\nrss_overhead_ratio:0.97\r\nrss_overhead_bytes:-16228352\r\nmem_fragmentation_ratio:0.98\r\nmem_fragmentation_bytes:-9946168\r\nmem_not_counted_for_evict:8\r\nmem_replication_backlog:0\r\nmem_total_replication_buffers:0\r\nmem_clients_slaves:0\r\nmem_clients_normal:3624\r\nmem_cluster_links:0\r\nmem_aof_buffer:8\r\nmem_allocator:jemalloc-5.2.1\r\nactive_defrag_running:0\r\nlazyfree_pending_objects:0\r\nlazyfreed_objects:0\r\n\r\n# Persistence\r\nloading:0\r\nasync_loading:0\r\ncurrent_cow_peak:0\r\ncurrent_cow_size:0\r\ncurrent_cow_size_age:0\r\ncurrent_fork_perc:0.00\r\ncurrent_save_keys_processed:0\r\ncurrent_save_keys_total:0\r\nrdb_changes_since_last_save:25\r\nrdb_bgsave_in_progress:0\r\nrdb_last_save_time:1677592302\r\nrdb_last_bgsave_status:ok\r\nrdb_last_bgsave_time_sec:-1\r\nrdb_current_bgsave_time_sec:-1\r\nrdb_saves:0\r\nrdb_last_cow_size:0\r\nrdb_last_load_keys_expired:0\r\nrdb_last_load_keys_loaded:686\r\naof_enabled:1\r\naof_rewrite_in_progress:0\r\naof_rewrite_scheduled:0\r\naof_last_rewrite_time_sec:-1\r\naof_current_rewrite_time_sec:-1\r\naof_last_bgrewrite_status:ok\r\naof_rewrites:0\r\naof_rewrites_consecutive_failures:0\r\naof_last_write_status:ok\r\naof_last_cow_size:0\r\nmodule_fork_in_progress:0\r\nmodule_fork_last_cow_size:0\r\naof_current_size:56243715\r\naof_base_size:56239614\r\naof_pending_rewrite:0\r\naof_buffer_length:0\r\naof_pending_bio_fsync:0\r\naof_delayed_fsync:0\r\n\r\n# Stats\r\ntotal_connections_received:12\r\ntotal_commands_processed:18\r\ninstantaneous_ops_per_sec:0\r\ntotal_net_input_bytes:2435\r\ntotal_net_output_bytes:10267\r\ntotal_net_repl_input_bytes:0\r\ntotal_net_repl_output_bytes:0\r\ninstantaneous_input_kbps:0.01\r\ninstantaneous_output_kbps:0.00\r\ninstantaneous_input_repl_kbps:0.00\r\ninstantaneous_output_repl_kbps:0.00\r\nrejected_connections:0\r\nsync_full:0\r\nsync_partial_ok:0\r\nsync_partial_err:0\r\nexpired_keys:0\r\nexpired_stale_perc:0.00\r\nexpired_time_cap_reached_count:0\r\nexpire_cycle_cpu_milliseconds:0\r\nevicted_keys:0\r\nevicted_clients:0\r\ntotal_eviction_exceeded_time:0\r\ncurrent_eviction_exceeded_time:0\r\nkeyspace_hits:0\r\nkeyspace_misses:2\r\npubsub_channels:0\r\npubsub_patterns:1\r\npubsubshard_channels:0\r\nlatest_fork_usec:0\r\ntotal_forks:0\r\nmigrate_cached_sockets:0\r\nslave_expires_tracked_keys:0\r\nactive_defrag_hits:0\r\nactive_defrag_misses:0\r\nactive_defrag_key_hits:0\r\nactive_defrag_key_misses:0\r\ntotal_active_defrag_time:0\r\ncurrent_active_defrag_time:0\r\ntracking_total_keys:0\r\ntracking_total_items:0\r\ntracking_total_prefixes:0\r\nunexpected_error_replies:0\r\ntotal_error_replies:0\r\ndump_payload_sanitizations:0\r\ntotal_reads_processed:25\r\ntotal_writes_processed:15\r\nio_threaded_reads_processed:0\r\nio_threaded_writes_processed:0\r\nreply_buffer_shrinks:2\r\nreply_buffer_expands:0\r\n\r\n# Replication\r\nrole:master\r\nconnected_slaves:0\r\nmaster_failover_state:no-failover\r\nmaster_replid:0d604d3065500c1cf11d3a5f04d152a944594b15\r\nmaster_replid2:0000000000000000000000000000000000000000\r\nmaster_repl_offset:0\r\nsecond_repl_offset:-1\r\nrepl_backlog_active:0\r\nrepl_backlog_size:1048576\r\nrepl_backlog_first_byte_offset:0\r\nrepl_backlog_histlen:0\r\n\r\n# CPU\r\nused_cpu_sys:1.729575\r\nused_cpu_user:4.674944\r\nused_cpu_sys_children:0.000000\r\nused_cpu_user_children:0.002214\r\nused_cpu_sys_main_thread:1.728546\r\nused_cpu_user_main_thread:4.672163\r\n\r\n# Modules\r\n\r\n# Commandstats\r\ncmdstat_psubscribe:calls=1,usec=3,usec_per_call=3.00,rejected_calls=0,failed_calls=0\r\ncmdstat_ping:calls=9,usec=10,usec_per_call=1.11,rejected_calls=0,failed_calls=0\r\ncmdstat_eval:calls=2,usec=209,usec_per_call=104.50,rejected_calls=0,failed_calls=0\r\ncmdstat_lpop:calls=1,usec=734651,usec_per_call=734651.00,rejected_calls=0,failed_calls=0\r\ncmdstat_info:calls=2,usec=193,usec_per_call=96.50,rejected_calls=0,failed_calls=0\r\ncmdstat_zrangebyscore:calls=2,usec=14,usec_per_call=7.00,rejected_calls=0,failed_calls=0\r\ncmdstat_select:calls=1,usec=2,usec_per_call=2.00,rejected_calls=0,failed_calls=0\r\n\r\n# Errorstats\r\n\r\n# Latencystats\r\nlatency_percentiles_usec_psubscribe:p50=3.007,p99=3.007,p99.9=3.007\r\nlatency_percentiles_usec_ping:p50=1.003,p99=2.007,p99.9=2.007\r\nlatency_percentiles_usec_eval:p50=30.079,p99=179.199,p99.9=179.199\r\nlatency_percentiles_usec_lpop:p50=738197.503,p99=738197.503,p99.9=738197.503\r\nlatency_percentiles_usec_info:p50=68.095,p99=125.439,p99.9=125.439\r\nlatency_percentiles_usec_zrangebyscore:p50=5.023,p99=9.023,p99.9=9.023\r\nlatency_percentiles_usec_select:p50=2.007,p99=2.007,p99.9=2.007\r\n\r\n# Cluster\r\ncluster_enabled:0\r\n\r\n# Keyspace\r\ndb0:keys=687,expires=0,avg_ttl=0\r\n\r\n------ CLIENT LIST OUTPUT ------\r\nid=5 addr=172.19.0.4:43052 laddr=172.19.0.2:6379 fd=9 name= age=18 idle=18 flags=N db=0 sub=0 psub=0 ssub=0 multi=-1 qbuf=0 qbuf-free=0 argv-mem=0 multi-mem=0 rbs=1024 rbp=0 obl=0 oll=0 omem=0 tot-mem=1800 events=r cmd=info user=default redir=-1 resp=2\r\nid=6 addr=172.19.0.4:43054 laddr=172.19.0.2:6379 fd=10 name= age=18 idle=18 flags=P db=0 sub=0 psub=1 ssub=0 multi=-1 qbuf=0 qbuf-free=0 argv-mem=0 multi-mem=0 rbs=1024 rbp=0 obl=0 oll=0 omem=0 tot-mem=1824 events=r cmd=psubscribe user=default redir=-1 resp=2\r\nid=16 addr=172.19.0.5:50836 laddr=172.19.0.2:6379 fd=11 name= age=0 idle=0 flags=N db=0 sub=0 psub=0 ssub=0 multi=-1 qbuf=559 qbuf-free=19915 argv-mem=507 multi-mem=0 rbs=16384 rbp=16384 obl=0 oll=0 omem=0 tot-mem=38195 events=r cmd=eval user=default redir=-1 resp=2\r\n\r\n------ CURRENT CLIENT INFO ------\r\nid=16 addr=172.19.0.5:50836 laddr=172.19.0.2:6379 fd=11 name= age=0 idle=0 flags=N db=0 sub=0 psub=0 ssub=0 multi=-1 qbuf=559 qbuf-free=19915 argv-mem=507 multi-mem=0 rbs=16384 rbp=16384 obl=0 oll=0 omem=0 tot-mem=38195 events=r cmd=eval user=default redir=-1 resp=2\r\nargv[0]: '\"EVAL\"'\r\nargv[1]: '\"-- Pop the first job off of the queue...\\nlocal job = redis.call('lpop', KEYS[1])\\nlocal reserved = false\\n\\nif(job ~= false) then\\n \"'\r\nargv[2]: '\"3\"'\r\nargv[3]: '\"queues:default\"'\r\nargv[4]: '\"queues:default:reserved\"'\r\nargv[5]: '\"queues:default:notify\"'\r\nargv[6]: '\"1677592412\"'\r\n\r\n------ MODULES INFO OUTPUT ------\r\n\r\n------ CONFIG DEBUG OUTPUT ------\r\nreplica-read-only yes\r\nlazyfree-lazy-server-del no\r\nlazyfree-lazy-eviction no\r\nactivedefrag no\r\nrepl-diskless-sync yes\r\nslave-read-only yes\r\nproto-max-bulk-len 512mb\r\nclient-query-buffer-limit 1gb\r\nio-threads-do-reads no\r\nio-threads 1\r\nsanitize-dump-payload no\r\nlazyfree-lazy-user-flush no\r\nlazyfree-lazy-expire no\r\nlazyfree-lazy-user-del no\r\nrepl-diskless-load disabled\r\nlist-compress-depth 0\r\n\r\n------ FAST MEMORY TEST ------\r\n1:M 28 Feb 2023 13:52:08.398 # Bio thread for job type #0 terminated\r\n1:M 28 Feb 2023 13:52:08.398 # Bio thread for job type #1 terminated\r\n1:M 28 Feb 2023 13:52:08.398 # Bio thread for job type #2 terminated\r\n*** Preparing to test memory region 55e511ddc000 (2306048 bytes)\r\n*** Preparing to test memory region 55e512b35000 (12288 bytes)\r\n*** Preparing to test memory region 7f22e8637000 (437571584 bytes)\r\n*** Preparing to test memory region 7f23217c2000 (520347648 bytes)\r\n*** Preparing to test memory region 7f2340800000 (1551892480 bytes)\r\n*** Preparing to test memory region 7f239de00000 (8388608 bytes)\r\n*** Preparing to test memory region 7f239e742000 (28672 bytes)\r\n*** Preparing to test memory region 7f239e74b000 (339968 bytes)\r\n*** Preparing to test memory region 7f239eb53000 (12288 bytes)\r\n*** Preparing to test memory region 7f239ec82000 (12288 bytes)\r\n.O.O.O.O.O.O.O.O.O.O\r\nFast memory test PASSED, however your memory can still be broken. Please run a memory test for several hours if possible.\r\n\r\n=== REDIS BUG REPORT END. Make sure to include from START to END. ===\r\n\r\n```\r\n"
    },
    {
      "id": 1448271648,
      "user": "oranagra",
      "created_at": "2023-02-28T14:24:19Z",
      "body": "HAVE_BACKTRACE is a define that's automatically set by config.h depending on the system you use for build.\r\ni think the problem is Alpine Linux, using musl libc which is lacking `backtrace` functionality.\r\nmaybe you can get / make a build that uses glibc?"
    },
    {
      "id": 1448385895,
      "user": "karimabdelaah",
      "created_at": "2023-02-28T15:29:17Z",
      "body": "Do you recommend to me another docker image which can help me in my case ??"
    },
    {
      "id": 1448458747,
      "user": "oranagra",
      "created_at": "2023-02-28T16:13:20Z",
      "body": "which one are you using?\r\ni think the official one should be ok: https://hub.docker.com/_/redis"
    },
    {
      "id": 1451190392,
      "user": "sundb",
      "created_at": "2023-03-02T02:45:19Z",
      "body": "@karimabdelaah Could you share the lua script you are using if possible?"
    }
  ]
}