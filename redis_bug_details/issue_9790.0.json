{
  "issue_number": 9790.0,
  "title": "[CRASH] make test crashed when trying to install redis-6.2.6",
  "body": "**Crash report**\r\n\r\nPaste the complete crash log between the quotes below. Please include a few lines from the log preceding the crash report to provide some context.\r\n\r\n```\r\n!!! WARNING The following tests failed:\r\n\r\n*** [err]: Crash report generated on SIGABRT in tests/integration/logging.tcl\r\nExpected [string match *STACK TRACE* ### Starting server for test            \r\n29880:C 16 Nov 2021 05:40:02.556 # oO0OoO0OoO0Oo Redis is starting oO0OoO0OoO0Oo\r\n29880:C 16 Nov 2021 05:40:02.556 # Redis version=6.2.6, bits=64, commit=00000000, modified=0, pid=29880, just started                                                                             \r\n29880:C 16 Nov 2021 05:40:02.556 # Configuration loaded                                          \r\n29880:M 16 Nov 2021 05:40:02.557 * monotonic clock: POSIX clock_gettime                          \r\n                _._                                                                              \r\n           _.-``__ ''-._                                                                         \r\n      _.-``    `.  `_.  ''-._           Redis 6.2.6 (00000000/0) 64 bit                          \r\n  .-`` .-```.  ```\\/    _.,_ ''-._                                                               \r\n (    '      ,       .-`  | `,    )     Running in standalone mode                               \r\n |`-._`-...-` __...-.``-._|'` _.-'|     Port: 28118                                              \r\n |    `-._   `._    /     _.-'    |     PID: 29880                                               \r\n  `-._    `-._  `-./  _.-'    _.-'                                                               \r\n |`-._`-._    `-.__.-'    _.-'_.-'|                                                              \r\n |    `-._`-._        _.-'_.-'    |           https://redis.io                                   \r\n  `-._    `-._`-.__.-'_.-'    _.-'                                                               \r\n |`-._`-._    `-.__.-'    _.-'_.-'|                                                              \r\n |    `-._`-._        _.-'_.-'    |                                                              \r\n  `-._    `-._`-.__.-'_.-'    _.-'                                                               \r\n      `-._    `-.__.-'    _.-'\r\n          `-._        _.-'\r\n              `-.__.-'\r\n\r\n29880:M 16 Nov 2021 05:40:02.559 # WARNING: The TCP backlog setting of 511 cannot be enforced because /proc/sys/net/core/somaxconn is set to the lower value of 128.\r\n29880:M 16 Nov 2021 05:40:02.559 # Server initialized\r\n29880:M 16 Nov 2021 05:40:02.559 # WARNING overcommit_memory is set to 0! Background save may fail under low memory condition. To fix this issue add 'vm.overcommit_memory = 1' to /etc/sysctl.conf and then reboot or run the command 'sysctl vm.overcommit_memory=1' for this to take effect.\r\n29880:M 16 Nov 2021 05:40:02.560 * Ready to accept connections\r\n29880:M 16 Nov 2021 05:40:02.560 * The server is now ready to accept connections at /home/scratch.ambars_inf/WORK/REDIS/redis-6.2.6/tests/tmp/server.27116.18/socket\r\n29880:M 16 Nov 2021 05:40:02.668 - Accepted 127.0.0.1:47096\r\n29880:M 16 Nov 2021 05:40:02.668 - Client closed connection\r\n29880:M 16 Nov 2021 05:40:02.672 - Accepted 127.0.0.1:47097\r\n### Starting test Crash report generated on SIGABRT in tests/integration/logging.tcl\r\n\r\n\r\n=== REDIS BUG REPORT START: Cut & paste starting from here ===\r\n29880:M 16 Nov 2021 05:40:02.675 # Redis 6.2.6 crashed by signal: 6, si_code: 0\r\n29880:M 16 Nov 2021 05:40:02.675 # Killed by PID: 29969, UID: 26685\r\n29880:M 16 Nov 2021 05:40:02.675 # Crashed running the instruction at: 0x2aaaab6630a3] (context: type source line 46 file /home/scratch.ambars_inf/WORK/REDIS/redis-6.2.6/tests/integration/logging.tcl cmd {assert {[string match $pattern $result]}} proc ::test)\r\nCleanup: may take some time... OK\r\nMakefile:391: recipe for target 'test' failed\r\nmake[1]: *** [test] Error 1\r\nmake[1]: Leaving directory '/home/scratch.ambars_inf/WORK/REDIS/redis-6.2.6/src'\r\nMakefile:6: recipe for target 'test' failed\r\nmake: *** [test] Error 2\r\ndc1-t-sim-c16-122:~/WORK/REDIS/redis-6.2.6>\r\n\r\n```\r\n\r\n**Additional information**\r\n\r\n1. OS distribution and version: CentOS release 6.8 (Final)\r\n2. Steps to reproduce (if any) : \r\nmake --PREFIX=<path> install\r\nmake test\r\n",
  "state": "open",
  "created_at": "2021-11-16T14:07:07Z",
  "updated_at": "2021-11-16T15:46:57Z",
  "closed_at": null,
  "labels": [],
  "comments_data": [
    {
      "id": 970404109,
      "user": "oranagra",
      "created_at": "2021-11-16T15:46:57Z",
      "body": "The crash is actually intentional, the test suite is attempting to check that we can get stack trace on crashes, but it seems that for some reason on your system we can't.\r\n\r\nis there anything special about this build or toolchain? not using glibc maybe?"
    }
  ]
}