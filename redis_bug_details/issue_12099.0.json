{
  "issue_number": 12099.0,
  "title": "[CRASH] Redis 5.0.9 crash due to ziplistInsert",
  "body": "**Crash report**\r\n\r\n=== REDIS BUG REPORT START: Cut & paste starting from here ===\r\n3527:M 24 Apr 2023 08:50:02.732 # Redis 5.0.9 crashed by signal: 11\r\n3527:M 24 Apr 2023 08:50:02.732 # Crashed running the instruction at: 0x43b907\r\n3527:M 24 Apr 2023 08:50:02.732 # Accessing address: 0x7fac2126ae62\r\n3527:M 24 Apr 2023 08:50:02.732 # Failed assertion: <no assertion failed> (<no file>:0)\r\n\r\n------ STACK TRACE ------\r\nEIP:\r\n/usr/local/redis-5.0.9/src/redis-server 127.0.0.1:6378(__ziplistInsert+0x2a7)[0x43b907]\r\n\r\nBacktrace:\r\n/usr/local/redis-5.0.9/src/redis-server 127.0.0.1:6378(logStackTrace+0x3c)[0x46f95c]\r\n/usr/local/redis-5.0.9/src/redis-server 127.0.0.1:6378(sigsegvHandler+0xa3)[0x470d13]\r\n/lib64/libpthread.so.0(+0xf7e0)[0x7fab2a1537e0]\r\n/usr/local/redis-5.0.9/src/redis-server 127.0.0.1:6378(__ziplistInsert+0x2a7)[0x43b907]\r\n/usr/local/redis-5.0.9/src/redis-server 127.0.0.1:6378(quicklistReplaceAtIndex+0x62)[0x427b12]\r\n/usr/local/redis-5.0.9/src/redis-server 127.0.0.1:6378(lsetCommand+0xc2)[0x453572]\r\n/usr/local/redis-5.0.9/src/redis-server 127.0.0.1:6378(call+0xa3)[0x42e4a3]\r\n/usr/local/redis-5.0.9/src/redis-server 127.0.0.1:6378(processCommand+0x3bd)[0x431d2d]\r\n/usr/local/redis-5.0.9/src/redis-server 127.0.0.1:6378(processInputBuffer+0x15f)[0x43efaf]\r\n/usr/local/redis-5.0.9/src/redis-server 127.0.0.1:6378(aeProcessEvents+0x1d3)[0x428ec3]\r\n/usr/local/redis-5.0.9/src/redis-server 127.0.0.1:6378(aeMain+0x2b)[0x4291eb]\r\n/usr/local/redis-5.0.9/src/redis-server 127.0.0.1:6378(main+0x515)[0x431435]\r\n/lib64/libc.so.6(__libc_start_main+0x100)[0x7fab29dced20]\r\n/usr/local/redis-5.0.9/src/redis-server 127.0.0.1:6378[0x426519]\r\n\r\n------ INFO OUTPUT ------\r\n# Server\r\nredis_version:5.0.9\r\nredis_git_sha1:00000000\r\nredis_git_dirty:0\r\nredis_build_id:a228d0a7621b0c12\r\nredis_mode:standalone\r\nos:Linux 2.6.32-696.el6.x86_64 x86_64\r\narch_bits:64\r\nmultiplexing_api:epoll\r\natomicvar_api:sync-builtin\r\ngcc_version:4.4.7\r\nprocess_id:3527\r\nrun_id:b35920db7a3c7b5c20fd0eb35b5c415926b99846\r\ntcp_port:6378\r\nuptime_in_seconds:162590\r\nuptime_in_days:1\r\nhz:10\r\nconfigured_hz:10\r\nlru_clock:4575802\r\nexecutable:/usr/local/redis-5.0.9/src/redis-server\r\nconfig_file:/usr/local/redis-5.0.9/redis.conf\r\n\r\n# Clients\r\nconnected_clients:46\r\nclient_recent_max_input_buffer:161889\r\nclient_recent_max_output_buffer:0\r\nblocked_clients:0\r\n\r\n# Memory\r\nused_memory:6090824\r\nused_memory_human:5.81M\r\nused_memory_rss:14213120\r\nused_memory_rss_human:13.55M\r\nused_memory_peak:7519272\r\nused_memory_peak_human:7.17M\r\nused_memory_peak_perc:81.00%\r\nused_memory_overhead:1898412\r\nused_memory_startup:791456\r\nused_memory_dataset:4192412\r\nused_memory_dataset_perc:79.11%\r\nallocator_allocated:6142096\r\nallocator_active:6664192\r\nallocator_resident:11243520\r\ntotal_system_memory:16725413888\r\ntotal_system_memory_human:15.58G\r\nused_memory_lua:38912\r\nused_memory_lua_human:38.00K\r\nused_memory_scripts:744\r\nused_memory_scripts_human:744B\r\nnumber_of_cached_scripts:1\r\nmaxmemory:2048000000\r\nmaxmemory_human:1.91G\r\nmaxmemory_policy:noeviction\r\nallocator_frag_ratio:1.09\r\nallocator_frag_bytes:522096\r\nallocator_rss_ratio:1.69\r\nallocator_rss_bytes:4579328\r\nrss_overhead_ratio:1.26\r\nrss_overhead_bytes:2969600\r\nmem_fragmentation_ratio:2.35\r\nmem_fragmentation_bytes:8161792\r\nmem_not_counted_for_evict:0\r\nmem_replication_backlog:0\r\nmem_clients_slaves:0\r\nmem_clients_normal:843956\r\nmem_aof_buffer:0\r\nmem_allocator:jemalloc-5.1.0\r\nactive_defrag_running:0\r\nlazyfree_pending_objects:0\r\n\r\n# Persistence\r\nloading:0\r\nrdb_changes_since_last_save:18\r\nrdb_bgsave_in_progress:0\r\nrdb_last_save_time:1682297352\r\nrdb_last_bgsave_status:ok\r\nrdb_last_bgsave_time_sec:0\r\nrdb_current_bgsave_time_sec:-1\r\nrdb_last_cow_size:6787072\r\naof_enabled:0\r\naof_rewrite_in_progress:0\r\naof_rewrite_scheduled:0\r\naof_last_rewrite_time_sec:-1\r\naof_current_rewrite_time_sec:-1\r\naof_last_bgrewrite_status:ok\r\naof_last_write_status:ok\r\naof_last_cow_size:0\r\n\r\n# Stats\r\ntotal_connections_received:2927\r\ntotal_commands_processed:774777\r\ninstantaneous_ops_per_sec:4\r\ntotal_net_input_bytes:6680093306\r\ntotal_net_output_bytes:9979548239\r\ninstantaneous_input_kbps:0.47\r\ninstantaneous_output_kbps:0.02\r\nrejected_connections:0\r\nsync_full:0\r\nsync_partial_ok:0\r\nsync_partial_err:0\r\nexpired_keys:0\r\nexpired_stale_perc:0.00\r\nexpired_time_cap_reached_count:0\r\nevicted_keys:0\r\nkeyspace_hits:13946\r\nkeyspace_misses:243157\r\npubsub_channels:18\r\npubsub_patterns:0\r\nlatest_fork_usec:641\r\nmigrate_cached_sockets:0\r\nslave_expires_tracked_keys:0\r\nactive_defrag_hits:0\r\nactive_defrag_misses:0\r\nactive_defrag_key_hits:0\r\nactive_defrag_key_misses:0\r\n\r\n# Replication\r\nrole:master\r\nconnected_slaves:0\r\nmaster_replid:38e26eabecc30bfb45254279d013e894b32708ff\r\nmaster_replid2:0000000000000000000000000000000000000000\r\nmaster_repl_offset:0\r\nsecond_repl_offset:-1\r\nrepl_backlog_active:0\r\nrepl_backlog_size:1048576\r\nrepl_backlog_first_byte_offset:0\r\nrepl_backlog_histlen:0\r\n\r\n# CPU\r\nused_cpu_sys:58.135162\r\nused_cpu_user:102.963347\r\nused_cpu_sys_children:2.728585\r\nused_cpu_user_children:12.370119\r\n\r\n# Commandstats\r\ncmdstat_hget:calls=123,usec=221,usec_per_call=1.80\r\ncmdstat_hdel:calls=664,usec=1255,usec_per_call=1.89\r\ncmdstat_auth:calls=2927,usec=5180,usec_per_call=1.77\r\ncmdstat_hgetall:calls=5405,usec=17653,usec_per_call=3.27\r\ncmdstat_expire:calls=13536,usec=24807,usec_per_call=1.83\r\ncmdstat_keys:calls=1,usec=376,usec_per_call=376.00\r\ncmdstat_subscribe:calls=24,usec=62,usec_per_call=2.58\r\ncmdstat_hkeys:calls=108204,usec=276140,usec_per_call=2.55\r\ncmdstat_publish:calls=20264,usec=2125317,usec_per_call=104.88\r\ncmdstat_lpop:calls=208727,usec=496925,usec_per_call=2.38\r\ncmdstat_llen:calls=1,usec=5,usec_per_call=5.00\r\ncmdstat_hset:calls=576,usec=4960,usec_per_call=8.61\r\ncmdstat_lrange:calls=4,usec=184,usec_per_call=46.00\r\ncmdstat_set:calls=20265,usec=186745,usec_per_call=9.22\r\ncmdstat_ping:calls=236702,usec=158146,usec_per_call=0.67\r\ncmdstat_rpush:calls=354,usec=2841,usec_per_call=8.03\r\ncmdstat_eval:calls=13536,usec=517487,usec_per_call=38.23\r\ncmdstat_hmget:calls=166,usec=1340,usec_per_call=8.07\r\ncmdstat_get:calls=143200,usec=167087,usec_per_call=1.17\r\ncmdstat_del:calls=75,usec=156,usec_per_call=2.08\r\ncmdstat_select:calls=23,usec=7,usec_per_call=0.30\r\n\r\n# Cluster\r\ncluster_enabled:0\r\n\r\n# Keyspace\r\ndb0:keys=4913,expires=0,avg_ttl=0\r\ndb1:keys=2,expires=1,avg_ttl=24515\r\n\r\n------ CLIENT LIST OUTPUT ------\r\nid=17 addr=127.0.0.1:60377 fd=14 name= age=162141 idle=3 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=lpop\r\nid=18 addr=127.0.0.1:60379 fd=15 name= age=162141 idle=3 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=get\r\nid=19 addr=127.0.0.1:60381 fd=16 name= age=162141 idle=162141 flags=P db=0 sub=15 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=subscribe\r\nid=4 addr=127.0.0.1:57162 fd=8 name= age=162541 idle=0 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=228 qbuf-free=32540 obl=0 oll=0 omem=0 events=r cmd=lset\r\nid=5 addr=127.0.0.1:57164 fd=9 name= age=162541 idle=1 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=lpop\r\nid=14 addr=127.0.0.1:60369 fd=11 name= age=162141 idle=3 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=get\r\nid=20 addr=127.0.0.1:60403 fd=17 name= age=162141 idle=10 flags=N db=1 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=ping\r\nid=21 addr=127.0.0.1:60405 fd=18 name= age=162141 idle=162141 flags=P db=0 sub=1 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=subscribe\r\nid=22 addr=127.0.0.1:60407 fd=19 name= age=162141 idle=10 flags=N db=1 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=ping\r\nid=23 addr=127.0.0.1:60409 fd=20 name= age=162141 idle=2 flags=P db=0 sub=2 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=subscribe\r\nid=24 addr=127.0.0.1:60411 fd=21 name= age=162141 idle=10 flags=N db=1 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=ping\r\nid=25 addr=127.0.0.1:60413 fd=22 name= age=162141 idle=162141 flags=P db=0 sub=1 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=subscribe\r\nid=26 addr=127.0.0.1:60415 fd=23 name= age=162141 idle=10 flags=N db=1 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=ping\r\nid=27 addr=127.0.0.1:60417 fd=24 name= age=162141 idle=162141 flags=P db=0 sub=1 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=subscribe\r\nid=28 addr=127.0.0.1:60419 fd=25 name= age=162141 idle=10 flags=N db=1 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=ping\r\nid=29 addr=127.0.0.1:60421 fd=26 name= age=162141 idle=162141 flags=P db=0 sub=1 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=subscribe\r\nid=30 addr=127.0.0.1:60423 fd=27 name= age=162141 idle=10 flags=N db=1 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=ping\r\nid=31 addr=127.0.0.1:60425 fd=28 name= age=162141 idle=162141 flags=P db=0 sub=1 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=subscribe\r\nid=32 addr=127.0.0.1:60427 fd=29 name= age=162141 idle=2 flags=N db=1 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=publish\r\nid=33 addr=127.0.0.1:60429 fd=30 name= age=162141 idle=162127 flags=P db=0 sub=3 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=subscribe\r\nid=34 addr=127.0.0.1:60431 fd=31 name= age=162141 idle=2 flags=N db=1 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=set\r\nid=35 addr=127.0.0.1:60433 fd=32 name= age=162141 idle=2 flags=P db=0 sub=2 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=subscribe\r\nid=36 addr=127.0.0.1:60435 fd=33 name= age=162141 idle=5 flags=N db=1 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=eval\r\nid=2823 addr=127.0.0.1:34873 fd=7 name= age=3148 idle=1 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=rpush\r\nid=37 addr=127.0.0.1:60437 fd=34 name= age=162141 idle=162141 flags=P db=0 sub=1 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=subscribe\r\nid=38 addr=127.0.0.1:60439 fd=35 name= age=162141 idle=10 flags=N db=1 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=ping\r\nid=39 addr=127.0.0.1:60441 fd=36 name= age=162141 idle=162141 flags=P db=0 sub=1 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=subscribe\r\nid=40 addr=127.0.0.1:60443 fd=37 name= age=162141 idle=10 flags=N db=1 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=ping\r\nid=41 addr=127.0.0.1:60445 fd=38 name= age=162141 idle=162141 flags=P db=0 sub=1 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=subscribe\r\nid=42 addr=127.0.0.1:60447 fd=39 name= age=162141 idle=10 flags=N db=1 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=ping\r\nid=43 addr=127.0.0.1:60449 fd=40 name= age=162141 idle=162141 flags=P db=0 sub=1 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=subscribe\r\nid=44 addr=127.0.0.1:60451 fd=41 name= age=162141 idle=10 flags=N db=1 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=ping\r\nid=45 addr=127.0.0.1:60453 fd=42 name= age=162141 idle=162141 flags=P db=0 sub=1 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=subscribe\r\nid=46 addr=127.0.0.1:60455 fd=43 name= age=162141 idle=10 flags=N db=1 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=ping\r\nid=47 addr=127.0.0.1:60457 fd=44 name= age=162141 idle=2 flags=P db=0 sub=2 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=subscribe\r\nid=48 addr=127.0.0.1:60459 fd=45 name= age=162141 idle=10 flags=N db=1 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=ping\r\nid=49 addr=127.0.0.1:60461 fd=46 name= age=162141 idle=162141 flags=P db=0 sub=1 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=subscribe\r\nid=50 addr=127.0.0.1:60463 fd=47 name= age=162141 idle=10 flags=N db=1 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=ping\r\nid=51 addr=127.0.0.1:60465 fd=48 name= age=162141 idle=162141 flags=P db=0 sub=1 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=subscribe\r\nid=52 addr=127.0.0.1:60467 fd=49 name= age=162141 idle=10 flags=N db=1 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=ping\r\nid=53 addr=127.0.0.1:60469 fd=50 name= age=162141 idle=162141 flags=P db=0 sub=1 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=subscribe\r\nid=54 addr=127.0.0.1:60471 fd=51 name= age=162141 idle=10 flags=N db=1 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=ping\r\nid=2925 addr=127.0.0.1:32222 fd=10 name= age=109 idle=1 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=32768 obl=0 oll=0 omem=0 events=r cmd=hkeys\r\nid=55 addr=127.0.0.1:60473 fd=52 name= age=162141 idle=162141 flags=P db=0 sub=1 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=subscribe\r\nid=15 addr=127.0.0.1:60371 fd=12 name= age=162141 idle=3 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=get\r\nid=16 addr=127.0.0.1:60373 fd=13 name= age=162141 idle=3 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=get\r\n\r\n------ CURRENT CLIENT INFO ------\r\nid=4 addr=127.0.0.1:57162 fd=8 name= age=162541 idle=0 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=228 qbuf-free=32540 obl=0 oll=0 omem=0 events=r cmd=lset\r\nargv[0]: 'LSET'\r\nargv[1]: 'dpjjyd_hk_real_data_history'\r\nargv[2]: '0'\r\nargv[3]: '{\"HKCallAuctionStage\":0,\"plateData\":[],\"isHKCallAuction\":false,\"dataid\":\"5\",\"longStock\":[],\"ggts\":\"\",\"stockcode\":\"300033\",\"ggth\":\"\",\"hotStock\":[],\"marketAnalyze\":[]}'\r\n3527:M 24 Apr 2023 08:50:02.734 # key 'dpjjyd_hk_real_data_history' found in DB containing the following object:\r\n3527:M 24 Apr 2023 08:50:02.734 # Object type: 1\r\n3527:M 24 Apr 2023 08:50:02.734 # Object encoding: 9\r\n3527:M 24 Apr 2023 08:50:02.734 # Object refcount: 1\r\n3527:M 24 Apr 2023 08:50:02.734 # List length: 1\r\n\r\n------ REGISTERS ------\r\n3527:M 24 Apr 2023 08:50:02.734 # \r\nRAX:00000000000000ff RBX:00000000000000a5\r\nRCX:00000000000000a5 RDX:00007fab2984bf03\r\nRDI:00007fac2126ae62 RSI:00007fab2126b83a\r\nRBP:00007fab2126b83a RSP:00007ffc439e4980\r\nR8 :0000000000000054 R9 :0000000000000000\r\nR10:00007fab29a00900 R11:00007fab2ac01b60\r\nR12:00007fab2126b830 R13:00000000000000a5\r\nR14:00007fab216939e0 R15:0000000000000000\r\nRIP:000000000043b907 EFL:0000000000010246\r\nCSGSFS:0000000000000033\r\n3527:M 24 Apr 2023 08:50:02.734 # (00007ffc439e498f) -> 00007fab2984bf03\r\n3527:M 24 Apr 2023 08:50:02.734 # (00007ffc439e498e) -> 00007fab21606878\r\n3527:M 24 Apr 2023 08:50:02.734 # (00007ffc439e498d) -> 00007fab216939e0\r\n3527:M 24 Apr 2023 08:50:02.734 # (00007ffc439e498c) -> 00000000000000a5\r\n3527:M 24 Apr 2023 08:50:02.734 # (00007ffc439e498b) -> 0000000000000000\r\n3527:M 24 Apr 2023 08:50:02.734 # (00007ffc439e498a) -> 00000000075bcd15\r\n3527:M 24 Apr 2023 08:50:02.734 # (00007ffc439e4989) -> 00007ffc439e4a30\r\n3527:M 24 Apr 2023 08:50:02.734 # (00007ffc439e4988) -> 0000000000000001\r\n3527:M 24 Apr 2023 08:50:02.734 # (00007ffc439e4987) -> 00007fab299a240a\r\n3527:M 24 Apr 2023 08:50:02.734 # (00007ffc439e4986) -> 00007f4000000003\r\n3527:M 24 Apr 2023 08:50:02.734 # (00007ffc439e4985) -> 000009d500000002\r\n3527:M 24 Apr 2023 08:50:02.734 # (00007ffc439e4984) -> 00007fab2984bf03\r\n3527:M 24 Apr 2023 08:50:02.734 # (00007ffc439e4983) -> 0000000b299a2de2\r\n3527:M 24 Apr 2023 08:50:02.734 # (00007ffc439e4982) -> 00007f0000000002\r\n3527:M 24 Apr 2023 08:50:02.734 # (00007ffc439e4981) -> 0000000000000001\r\n3527:M 24 Apr 2023 08:50:02.734 # (00007ffc439e4980) -> 0000000000000001\r\n\r\n------ FAST MEMORY TEST ------\r\n3527:M 24 Apr 2023 08:50:02.734 # Bio thread for job type #0 terminated\r\n3527:M 24 Apr 2023 08:50:02.734 # Bio thread for job type #1 terminated\r\n3527:M 24 Apr 2023 08:50:02.734 # Bio thread for job type #2 terminated\r\n*** Preparing to test memory region 77d000 (2248704 bytes)\r\n*** Preparing to test memory region a9b000 (135168 bytes)\r\n*** Preparing to test memory region 7fab20e66000 (4096 bytes)\r\n*** Preparing to test memory region 7fab20e67000 (9437184 bytes)\r\n*** Preparing to test memory region 7fab21769000 (10485760 bytes)\r\n*** Preparing to test memory region 7fab2216a000 (10485760 bytes)\r\n*** Preparing to test memory region 7fab22b6b000 (10485760 bytes)\r\n*** Preparing to test memory region 7fab29400000 (8388608 bytes)\r\n*** Preparing to test memory region 7fab2a140000 (16384 bytes)\r\n*** Preparing to test memory region 7fab2a35d000 (16384 bytes)\r\n*** Preparing to test memory region 7fab2ac01000 (20480 bytes)\r\n*** Preparing to test memory region 7fab2ac0f000 (4096 bytes)\r\n*** Preparing to test memory region 7fab2ac13000 (4096 bytes)\r\n.O.O.O.O.O.O.O.O.O.O.O.O.O\r\nFast memory test PASSED, however your memory can still be broken. Please run a memory test for several hours if possible.\r\n\r\n------ DUMPING CODE AROUND EIP ------\r\nSymbol: __ziplistInsert (base: 0x43b660)\r\nModule: /usr/local/redis-5.0.9/src/redis-server 127.0.0.1:6378 (base 0x400000)\r\n$ xxd -r -p /tmp/dump.hex /tmp/dump.bin\r\n$ objdump --adjust-vma=0x43b660 -D -b binary -m i386:x86-64 /tmp/dump.bin\r\n------\r\n3527:M 24 Apr 2023 08:50:02.890 # dump of function (hexdump of 807 bytes):\r\n41574156415541544989fc554889f55389cb4883ec688b074889542420c744245800000000c644245f0048c744245015cd5b078944241c0fb6063cff0f845e0200003cfd0f86a60100008b460189442458488b7c2420488d4c245f488d54245089de4189dee896fbffff85c00f85160200008b74245831ffe873f4ffff0fb674245f4189c531ff89da4589ede8bff4ffff89c04901c54d01f5807d00ff0f855d0100004589efc744242800000000c744242c000000004531f68b7424284889e94c89e74c29e148894c24084401fe0374241ce849f5ffff488b4c24084989c4488d2c08807d00ff0f84630100004a8d542d004963f64889e84829f048895424108b54241c488b7c24104883ea014829ca4801f24889c6e8e5a7feff8b54242c85d20f8499010000488b7c24104489fee89cf3ffff498d442404488b7c2410488d7424304401384889442408e820eeffff8b4c243c8b54244048034c2410488b442408803c11ff74068b54242801104585f60f85ec0000008b7424584889efe86df3ffff0fb674245f89c089da4801c54889efe8b9f3ffff0fb654245f89c7488d7c3d0089d025c00000003dc00000000f848b000000488b74242089dae80fa7feff410fb74424086683f8ff740983c0016641894424084883c4684c89e05b5d415c415d415e415fc30f1f8400000000000fb6c089442458e955feffff0f1f40004489ee4889ef4589efe822f3ffff83f8fc4189c60f85be0000004983fd030f87b4000000c744242800000000c744242c010000004531f6e97dfeffff0f1f4000488b742450e8e6f1ffffe972ffffff9089e84429e04585f641894424040f8414ffffff4989ee4a8d742d004c89e74d29e6e8caf3ffff4989c44a8d2c30e9f5feffff660f1f4400000fb67c245fe83ee9ffff4189c6e9d8fdffff660f1f4400008b7f04498d3c3c803fff0f84a1fdffffe8cbe9ffff89442458e993fdffff6690488b7c24104489fee823f2ffffe962feffff660f1f4400004489742428c744242c00000000e9cffdffff660f1f440000e90bfdffff66662e0f1f84000000000085c94889f0488d770a74078b0f488d740fff89d14889c2e9e4fcffff90909090b8d5615200c366\r\n\r\n=== REDIS BUG REPORT END. Make sure to include from START to END. ===\r\n\r\n       Please report the crash by opening an issue on github:\r\n\r\n           http://github.com/antirez/redis/issues\r\n\r\n  Suspect RAM error? Use redis-server --test-memory to verify it.\r\n\r\n**Additional information**\r\nOperating System: Red Hat Enterprise Linux Server release 7.5 (Maipo)\r\nKernel: Linux Linux version 3.10.0-862.el7.x86_64\r\nRedis Version: 5.0.9\r\n",
  "state": "closed",
  "created_at": "2023-04-24T05:42:56Z",
  "updated_at": "2023-04-24T05:53:11Z",
  "closed_at": "2023-04-24T05:53:11Z",
  "labels": [],
  "comments_data": [
    {
      "id": 1519420902,
      "user": "oranagra",
      "created_at": "2023-04-24T05:53:10Z",
      "body": "i suggest you upgrade.\r\nwe've never been able to find the bugs in ziplist, or prove they come from another heap corruptions, we did take some other measures.\r\nIn Redis 6.2 we added a mechanism to detect corrupt ziplists, specifically when importing data, see: #7807\r\nIn Redis 7.0 we moved away from ziplists, and replaced them with listpacks, see: #8887, #9366, #9740\r\n\r\nunless you can find a way to consistently reproduce this, i'm afraid we have nothing to do here."
    }
  ]
}