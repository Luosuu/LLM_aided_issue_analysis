{
  "issue_number": 12649.0,
  "title": "[CRASH] Redis 4.0.11 Sentinel crashed by signal: 11",
  "body": "\r\n**Crash report**\r\n\r\n```\r\n=== REDIS BUG REPORT START: Cut & paste starting from here ===\r\n3564:X 13 Oct 11:17:46.673 # Redis 4.0.11 crashed by signal: 11\r\n3564:X 13 Oct 11:17:46.673 # Crashed running the instruction at: 0x7fbf5acb9752\r\n3564:X 13 Oct 11:17:46.673 # Accessing address: 0x7fbf52600000\r\n3564:X 13 Oct 11:17:46.673 # Failed assertion: <no assertion failed> (<no file>:0)\r\n\r\n------ STACK TRACE ------\r\nEIP:\r\n/lib64/libc.so.6(+0x16a752)[0x7fbf5acb9752]\r\n\r\nBacktrace:\r\n/usr/local/redis/bin/redis-sentinel 0.0.0.0:26379 [sentinel](logStackTrace+0x29)[0x4689a9]\r\n/usr/local/redis/bin/redis-sentinel 0.0.0.0:26379 [sentinel](sigsegvHandler+0xac)[0x46904c]\r\n/lib64/libpthread.so.0(+0xf6d0)[0x7fbf5af2b6d0]\r\n/lib64/libc.so.6(+0x16a752)[0x7fbf5acb9752]\r\n/usr/local/redis/bin/redis-sentinel 0.0.0.0:26379 [sentinel](sentinelRefreshInstanceInfo+0x248)[0x483db8]\r\n/usr/local/redis/bin/redis-sentinel 0.0.0.0:26379 [sentinel](redisProcessCallbacks+0x83)[0x49b493]\r\n/usr/local/redis/bin/redis-sentinel 0.0.0.0:26379 [sentinel](aeProcessEvents+0x2a0)[0x426820]\r\n/usr/local/redis/bin/redis-sentinel 0.0.0.0:26379 [sentinel](aeMain+0x2b)[0x426aeb]\r\n/usr/local/redis/bin/redis-sentinel 0.0.0.0:26379 [sentinel](main+0x49f)[0x4238ef]\r\n/lib64/libc.so.6(__libc_start_main+0xf5)[0x7fbf5ab71445]\r\n/usr/local/redis/bin/redis-sentinel 0.0.0.0:26379 [sentinel][0x423be2]\r\n\r\n------ INFO OUTPUT ------\r\n# Server\r\nredis_version:4.0.11\r\nredis_git_sha1:00000000\r\nredis_git_dirty:0\r\nredis_build_id:5979853c252505a8\r\nredis_mode:sentinel\r\nos:Linux 3.10.0-862.11.6.el7.x86_64 x86_64\r\narch_bits:64\r\nmultiplexing_api:epoll\r\natomicvar_api:atomic-builtin\r\ngcc_version:4.8.5\r\nprocess_id:3564\r\nrun_id:631e522a314ea883a8cd0bf6b1c168a9d0294352\r\ntcp_port:26379\r\nuptime_in_seconds:1636744\r\nuptime_in_days:18\r\nhz:13\r\nlru_clock:2668250\r\nexecutable:/usr/local/redis/bin/redis-sentinel\r\nconfig_file:/data/redis/redis-sentinel.conf\r\n\r\n# Clients\r\nconnected_clients:325\r\nclient_longest_output_list:0\r\nclient_biggest_input_buf:0\r\nblocked_clients:0\r\n\r\n# Memory\r\nused_memory:7712296\r\nused_memory_human:7.36M\r\nused_memory_rss:28467200\r\nused_memory_rss_human:27.15M\r\nused_memory_peak:18143136\r\nused_memory_peak_human:17.30M\r\nused_memory_peak_perc:42.51%\r\nused_memory_overhead:6293118\r\nused_memory_startup:781496\r\nused_memory_dataset:1419178\r\nused_memory_dataset_perc:20.48%\r\ntotal_system_memory:33603375104\r\ntotal_system_memory_human:31.30G\r\nused_memory_lua:37888\r\nused_memory_lua_human:37.00K\r\nmaxmemory:0\r\nmaxmemory_human:0B\r\nmaxmemory_policy:noeviction\r\nmem_fragmentation_ratio:3.69\r\nmem_allocator:jemalloc-4.0.3\r\nactive_defrag_running:0\r\nlazyfree_pending_objects:0\r\n\r\n# Persistence\r\nloading:0\r\nrdb_changes_since_last_save:0\r\nrdb_bgsave_in_progress:0\r\nrdb_last_save_time:1695530322\r\nrdb_last_bgsave_status:ok\r\nrdb_last_bgsave_time_sec:-1\r\nrdb_current_bgsave_time_sec:-1\r\nrdb_last_cow_size:0\r\naof_enabled:0\r\naof_rewrite_in_progress:0\r\naof_rewrite_scheduled:0\r\naof_last_rewrite_time_sec:-1\r\naof_current_rewrite_time_sec:-1\r\naof_last_bgrewrite_status:ok\r\naof_last_write_status:ok\r\naof_last_cow_size:0\r\n\r\n# Stats\r\ntotal_connections_received:1858\r\ntotal_commands_processed:4760386\r\ninstantaneous_ops_per_sec:4\r\ntotal_net_input_bytes:264232497\r\ntotal_net_output_bytes:28929188\r\ninstantaneous_input_kbps:0.28\r\ninstantaneous_output_kbps:0.09\r\nrejected_connections:0\r\nsync_full:0\r\nsync_partial_ok:0\r\nsync_partial_err:0\r\nexpired_keys:0\r\nexpired_stale_perc:0.00\r\nexpired_time_cap_reached_count:0\r\nevicted_keys:0\r\nkeyspace_hits:0\r\nkeyspace_misses:0\r\npubsub_channels:5\r\npubsub_patterns:0\r\nlatest_fork_usec:0\r\nmigrate_cached_sockets:0\r\nslave_expires_tracked_keys:0\r\nactive_defrag_hits:0\r\nactive_defrag_misses:0\r\nactive_defrag_key_hits:0\r\nactive_defrag_key_misses:0\r\n\r\n# Replication\r\nrole:master\r\nconnected_slaves:0\r\nmaster_replid:7de3d97016038174b677952d542756fa1b7ceca8\r\nmaster_replid2:0000000000000000000000000000000000000000\r\nmaster_repl_offset:0\r\nsecond_repl_offset:-1\r\nrepl_backlog_active:0\r\nrepl_backlog_size:1048576\r\nrepl_backlog_first_byte_offset:0\r\nrepl_backlog_histlen:0\r\n\r\n# CPU\r\nused_cpu_sys:1420.19\r\nused_cpu_user:1187.07\r\nused_cpu_sys_children:0.00\r\nused_cpu_user_children:0.00\r\n\r\n# Commandstats\r\ncmdstat_info:calls=1,usec=94,usec_per_call=94.00\r\ncmdstat_publish:calls=1605857,usec=15639392,usec_per_call=9.74\r\ncmdstat_ping:calls=3152608,usec=2607663,usec_per_call=0.83\r\ncmdstat_subscribe:calls=992,usec=3644,usec_per_call=3.67\r\ncmdstat_sentinel:calls=925,usec=20778,usec_per_call=22.46\r\ncmdstat_client:calls=3,usec=4,usec_per_call=1.33\r\n\r\n# Cluster\r\ncluster_enabled:0\r\n\r\n# Keyspace\r\n\r\n------ CLIENT LIST OUTPUT ------\r\nid=667 addr=10.124.91.174:52782 fd=18 name= age=430342 idle=430342 flags=N db=0 sub=1 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=subscribe\r\n...............\r\n...............\r\n\r\n------ REGISTERS ------\r\n3564:X 13 Oct 11:17:46.675 # \r\nRAX:0000000000000000 RBX:00007fbf525ffffb\r\nRCX:00007fbf5acb9752 RDX:000000000000000b\r\nRDI:00007fbf52600006 RSI:0000000000507a60\r\nRBP:000000000000006e RSP:00007fffa0c24958\r\nR8 :000000000000000b R9 :000000000000000a\r\nR10:00007fbf5400e220 R11:00007fbf5acdbaa0\r\nR12:00007fbf5404b370 R13:00007fbf54041000\r\nR14:0000000000000001 R15:0000000000000000\r\nRIP:00007fbf5acb9752 EFL:0000000000010203\r\nCSGSFS:0000000000000033\r\n3564:X 13 Oct 11:17:46.675 # (00007fffa0c24967) -> 0000000000000000\r\n3564:X 13 Oct 11:17:46.675 # (00007fffa0c24966) -> 000000000049b493\r\n3564:X 13 Oct 11:17:46.675 # (00007fffa0c24965) -> 0000000000000007\r\n3564:X 13 Oct 11:17:46.675 # (00007fffa0c24964) -> 0000000000000000\r\n3564:X 13 Oct 11:17:46.675 # (00007fffa0c24963) -> 00007fbf540500a0\r\n3564:X 13 Oct 11:17:46.675 # (00007fffa0c24962) -> 00007fffa0c249e0\r\n3564:X 13 Oct 11:17:46.675 # (00007fffa0c24961) -> 0000000000d18410\r\n3564:X 13 Oct 11:17:46.675 # (00007fffa0c24960) -> 0000000000d186d0\r\n3564:X 13 Oct 11:17:46.675 # (00007fffa0c2495f) -> 0000000000d18410\r\n3564:X 13 Oct 11:17:46.675 # (00007fffa0c2495e) -> 0000007b525ff630\r\n3564:X 13 Oct 11:17:46.675 # (00007fffa0c2495d) -> 0000000000000000\r\n3564:X 13 Oct 11:17:46.675 # (00007fffa0c2495c) -> 00007fbf5404b000\r\n3564:X 13 Oct 11:17:46.675 # (00007fffa0c2495b) -> 00007fbf5403a31a\r\n3564:X 13 Oct 11:17:46.675 # (00007fffa0c2495a) -> 0000000000000001\r\n3564:X 13 Oct 11:17:46.675 # (00007fffa0c24959) -> 0000000000000001\r\n3564:X 13 Oct 11:17:46.675 # (00007fffa0c24958) -> 0000000000483db8\r\n\r\n------ FAST MEMORY TEST ------\r\n3564:X 13 Oct 11:17:46.675 # Bio thread for job type #0 terminated\r\n3564:X 13 Oct 11:17:46.675 # Bio thread for job type #1 terminated\r\n3564:X 13 Oct 11:17:46.675 # Bio thread for job type #2 terminated\r\n*** Preparing to test memory region 745000 (98304 bytes)\r\n*** Preparing to test memory region d0b000 (135168 bytes)\r\n*** Preparing to test memory region 7fbf51200000 (20971520 bytes)\r\n*** Preparing to test memory region 7fbf527fe000 (8388608 bytes)\r\n*** Preparing to test memory region 7fbf52fff000 (8388608 bytes)\r\n*** Preparing to test memory region 7fbf53800000 (8388608 bytes)\r\n*** Preparing to test memory region 7fbf54000000 (2097152 bytes)\r\n*** Preparing to test memory region 7fbf5a800000 (2097152 bytes)\r\n*** Preparing to test memory region 7fbf5af17000 (20480 bytes)\r\n*** Preparing to test memory region 7fbf5b134000 (16384 bytes)\r\n*** Preparing to test memory region 7fbf5b853000 (16384 bytes)\r\n*** Preparing to test memory region 7fbf5b85d000 (4096 bytes)\r\n*** Preparing to test memory region 7fbf5b85e000 (4096 bytes)\r\n*** Preparing to test memory region 7fbf5b861000 (4096 bytes)\r\n.O.O.O.O.O.O.O.O.O.O.O.O.O.O\r\nFast memory test PASSED, however your memory can still be broken. Please run a memory test for several hours if possible.\r\n\r\n------ DUMPING CODE AROUND EIP ------\r\nSymbol: (null) (base: (nil))\r\nModule: /lib64/libc.so.6 (base 0x7fbf5ab4f000)\r\n$ xxd -r -p /tmp/dump.hex /tmp/dump.bin\r\n$ objdump --adjust-vma=(nil) -D -b binary -m i386:x86-64 /tmp/dump.bin\r\n------\r\n```\r\n\r\n**Additional information**\r\n\r\n1. OS CentOS Linux release 7.4.1708 (Core) 3.10.0-862.11.6.el7.x86_64  SMP Tue Aug 14 21:49:04 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux",
  "state": "open",
  "created_at": "2023-10-13T12:22:00Z",
  "updated_at": "2023-10-13T12:22:00Z",
  "closed_at": null,
  "labels": [],
  "comments_data": []
}