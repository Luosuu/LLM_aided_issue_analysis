{
  "issue_number": 12134.0,
  "title": "[BUG]Redis 6.2.6 crashed by signal: 11, si_code: 1",
  "body": "=== REDIS BUG REPORT START: Cut & paste starting from here ===\r\n1:M 01 May 2023 03:08:16.961 # Redis 6.2.6 crashed by signal: 11, si_code: 1\r\n1:M 01 May 2023 03:08:16.961 # Accessing address: 0x30\r\n1:M 01 May 2023 03:08:16.961 # Crashed running the instruction at: 0x55875746df34\r\n\r\n------ STACK TRACE ------\r\nEIP:\r\nredis-server *:6379(je_extent_heap_remove+0x5a4)[0x55875746df34]\r\n\r\nBacktrace:\r\n/lib/x86_64-linux-gnu/libpthread.so.0(+0x14140)[0x7f3d54f7d140]\r\nredis-server *:6379(je_extent_heap_remove+0x5a4)[0x55875746df34]\r\nredis-server *:6379(je_arena_dalloc_bin_junked_locked+0x16a)[0x55875744090a]\r\nredis-server *:6379(je_tcache_bin_flush_small+0x4af)[0x5587574957bf]\r\nredis-server *:6379(je_tcache_event_hard+0x4e)[0x55875749656e]\r\nredis-server *:6379(je_malloc+0x24b)[0x55875743552b]\r\nredis-server *:6379(zmalloc+0x1b)[0x558757360c6b]\r\n/usr/lib/redis/modules/redisgraph.so(PropertyMap_New+0x42)[0x7f3d53d405c2]\r\n/usr/lib/redis/modules/redisgraph.so(AST_PreparePathCreation+0x1fa)[0x7f3d53d3ee6a]\r\n/usr/lib/redis/modules/redisgraph.so(AST_PrepareCreateOp+0x101)[0x7f3d53d3f4d1]\r\n/usr/lib/redis/modules/redisgraph.so(ExecutionPlanSegment_ConvertClause+0x144)[0x7f3d53d2c914]\r\n/usr/lib/redis/modules/redisgraph.so(ExecutionPlan_PopulateExecutionPlan+0x6f)[0x7f3d53d17a2f]\r\n/usr/lib/redis/modules/redisgraph.so(NewExecutionPlan+0x117)[0x7f3d53d17b87]\r\n/usr/lib/redis/modules/redisgraph.so(ExecutionCtx_FromQuery+0xd8)[0x7f3d53d12f18]\r\n/usr/lib/redis/modules/redisgraph.so(Graph_Query+0x3f)[0x7f3d53d12baf]\r\n/usr/lib/redis/modules/redisgraph.so(+0x1c0eef)[0x7f3d53d4feef]\r\n/lib/x86_64-linux-gnu/libpthread.so.0(+0x8ea7)[0x7f3d54f71ea7]\r\n/lib/x86_64-linux-gnu/libc.so.6(clone+0x3f)[0x7f3d54ea1def]\r\n\r\n------ REGISTERS ------\r\n1:M 01 May 2023 03:08:16.963 # \r\nRAX:0000000000000000 RBX:000000000000000e\r\nRCX:00007f3cf0801770 RDX:0000000000000000\r\nRDI:00007f3cf08057b8 RSI:00007f3ce02073c0\r\nRBP:0000000000000000 RSP:00007f3d42368f48\r\nR8 :0000000000000001 R9 :00007f3ce02073c0\r\nR10:0000000000000046 R11:00005587574c72e0\r\nR12:00007f3ce02073c0 R13:00007f3d42369eb0\r\nR14:00007f3cf0805748 R15:0000000000000046\r\nRIP:000055875746df34 EFL:0000000000010246\r\nCSGSFS:002b000000000033\r\n1:M 01 May 2023 03:08:16.963 # (00007f3d42368f57) -> 00007f3c6f4074c0\r\n1:M 01 May 2023 03:08:16.963 # (00007f3d42368f56) -> 00007f3c6f4074c0\r\n1:M 01 May 2023 03:08:16.963 # (00007f3d42368f55) -> 00007f3c6f4074c0\r\n1:M 01 May 2023 03:08:16.963 # (00007f3d42368f54) -> 00007f3c6f4074c0\r\n1:M 01 May 2023 03:08:16.963 # (00007f3d42368f53) -> 00007f3ce02073c0\r\n1:M 01 May 2023 03:08:16.963 # (00007f3d42368f52) -> 00005587574957bf\r\n1:M 01 May 2023 03:08:16.963 # (00007f3d42368f51) -> 0000558757537e00\r\n1:M 01 May 2023 03:08:16.963 # (00007f3d42368f50) -> 0000000000000002\r\n1:M 01 May 2023 03:08:16.963 # (00007f3d42368f4f) -> 00007f3d42368fa0\r\n1:M 01 May 2023 03:08:16.963 # (00007f3d42368f4e) -> 00007f3d4236a1d0\r\n1:M 01 May 2023 03:08:16.963 # (00007f3d42368f4d) -> 00007f3d423691e0\r\n1:M 01 May 2023 03:08:16.963 # (00007f3d42368f4c) -> 0000000000000000\r\n1:M 01 May 2023 03:08:16.963 # (00007f3d42368f4b) -> 00007f3c9c408640\r\n1:M 01 May 2023 03:08:16.963 # (00007f3d42368f4a) -> 000055875744090a\r\n1:M 01 May 2023 03:08:16.963 # (00007f3d42368f49) -> 00007f3cf0800900\r\n1:M 01 May 2023 03:08:16.963 # (00007f3d42368f48) -> 000000000000000e\r\n\r\n------ INFO OUTPUT ------\r\n# Server\r\nredis_version:6.2.6\r\nredis_git_sha1:00000000\r\nredis_git_dirty:0\r\nredis_build_id:9c335ca9779faba5\r\nredis_mode:standalone\r\nos:Linux 4.18.0-240.22.1.el8_3.x86_64 x86_64\r\narch_bits:64\r\nmultiplexing_api:epoll\r\natomicvar_api:atomic-builtin\r\ngcc_version:10.2.1\r\nprocess_id:1\r\nprocess_supervised:no\r\nrun_id:8dde864fee303f83cb354cb71175fe6a5be0bd31\r\ntcp_port:6379\r\nserver_time_usec:1682881696930986\r\nuptime_in_seconds:191450\r\nuptime_in_days:2\r\nhz:10\r\nconfigured_hz:10\r\nlru_clock:5160096\r\nexecutable:/data/redis-server\r\nconfig_file:/etc/redis.conf\r\nio_threads_active:0\r\n\r\n# Clients\r\nconnected_clients:569\r\ncluster_connections:0\r\nmaxclients:10000\r\nclient_recent_max_input_buffer:513147\r\nclient_recent_max_output_buffer:0\r\nblocked_clients:3\r\ntracking_clients:0\r\nclients_in_timeout_table:0\r\n\r\n# Memory\r\nused_memory:277295104\r\nused_memory_human:264.45M\r\nused_memory_rss:2005962752\r\nused_memory_rss_human:1.87G\r\nused_memory_peak:361693104\r\nused_memory_peak_human:344.94M\r\nused_memory_peak_perc:76.67%\r\nused_memory_overhead:15298551\r\nused_memory_startup:843288\r\nused_memory_dataset:261996241\r\nused_memory_dataset_perc:94.77%\r\nallocator_allocated:282610912\r\nallocator_active:347422720\r\nallocator_resident:568406016\r\ntotal_system_memory:126715236352\r\ntotal_system_memory_human:118.01G\r\nused_memory_lua:37888\r\nused_memory_lua_human:37.00K\r\nused_memory_scripts:0\r\nused_memory_scripts_human:0B\r\nnumber_of_cached_scripts:0\r\nmaxmemory:0\r\nmaxmemory_human:0B\r\nmaxmemory_policy:noeviction\r\nallocator_frag_ratio:1.23\r\nallocator_frag_bytes:64811808\r\nallocator_rss_ratio:1.64\r\nallocator_rss_bytes:220983296\r\nrss_overhead_ratio:3.53\r\nrss_overhead_bytes:1437556736\r\nmem_fragmentation_ratio:7.34\r\nmem_fragmentation_bytes:1732605016\r\nmem_not_counted_for_evict:0\r\nmem_replication_backlog:0\r\nmem_clients_slaves:0\r\nmem_clients_normal:14259287\r\nmem_aof_buffer:0\r\nmem_allocator:jemalloc-5.1.0\r\nactive_defrag_running:0\r\nlazyfree_pending_objects:0\r\nlazyfreed_objects:0\r\n\r\n# Persistence\r\nloading:0\r\ncurrent_cow_size:0\r\ncurrent_cow_size_age:0\r\ncurrent_fork_perc:0.00\r\ncurrent_save_keys_processed:0\r\ncurrent_save_keys_total:0\r\nrdb_changes_since_last_save:21404\r\nrdb_bgsave_in_progress:0\r\nrdb_last_save_time:1682881649\r\nrdb_last_bgsave_status:ok\r\nrdb_last_bgsave_time_sec:1\r\nrdb_current_bgsave_time_sec:-1\r\nrdb_last_cow_size:16158720\r\naof_enabled:0\r\naof_rewrite_in_progress:0\r\naof_rewrite_scheduled:0\r\naof_last_rewrite_time_sec:-1\r\naof_current_rewrite_time_sec:-1\r\naof_last_bgrewrite_status:ok\r\naof_last_write_status:ok\r\naof_last_cow_size:0\r\nmodule_fork_in_progress:0\r\nmodule_fork_last_cow_size:0\r\n\r\n# Stats\r\ntotal_connections_received:15465469\r\ntotal_commands_processed:521063861\r\ninstantaneous_ops_per_sec:470\r\ntotal_net_input_bytes:142457368955\r\ntotal_net_output_bytes:124857637780\r\ninstantaneous_input_kbps:2794.11\r\ninstantaneous_output_kbps:23.95\r\nrejected_connections:0\r\nsync_full:0\r\nsync_partial_ok:0\r\nsync_partial_err:0\r\nexpired_keys:8700\r\nexpired_stale_perc:0.00\r\nexpired_time_cap_reached_count:0\r\nexpire_cycle_cpu_milliseconds:14320\r\nevicted_keys:0\r\nkeyspace_hits:790798240\r\nkeyspace_misses:299631\r\npubsub_channels:1\r\npubsub_patterns:0\r\nlatest_fork_usec:148431\r\ntotal_forks:3088\r\nmigrate_cached_sockets:0\r\nslave_expires_tracked_keys:0\r\nactive_defrag_hits:0\r\nactive_defrag_misses:0\r\nactive_defrag_key_hits:0\r\nactive_defrag_key_misses:0\r\ntracking_total_keys:0\r\ntracking_total_items:0\r\ntracking_total_prefixes:0\r\nunexpected_error_replies:0\r\ntotal_error_replies:2\r\ndump_payload_sanitizations:0\r\ntotal_reads_processed:538172457\r\ntotal_writes_processed:631336832\r\nio_threaded_reads_processed:0\r\nio_threaded_writes_processed:0\r\n\r\n# Replication\r\nrole:master\r\nconnected_slaves:0\r\nmaster_failover_state:no-failover\r\nmaster_replid:69bcc0ef31ed8956eb233cc9f157e7ee1b91b206\r\nmaster_replid2:0000000000000000000000000000000000000000\r\nmaster_repl_offset:0\r\nsecond_repl_offset:-1\r\nrepl_backlog_active:0\r\nrepl_backlog_size:1048576\r\nrepl_backlog_first_byte_offset:0\r\nrepl_backlog_histlen:0\r\n\r\n# CPU\r\nused_cpu_sys:45056.374618\r\nused_cpu_user:136617.481482\r\nused_cpu_sys_children:714.350286\r\nused_cpu_user_children:2147.717292\r\nused_cpu_sys_main_thread:91.548911\r\nused_cpu_user_main_thread:1296.221893\r\n\r\n# Modules\r\nmodule:name=graph,ver=20414,api=1,filters=0,usedby=[],using=[],options=[]\r\n\r\n# Commandstats\r\ncmdstat_keys:calls=192543,usec=91784121,usec_per_call=476.69,rejected_calls=0,failed_calls=0\r\ncmdstat_graph.RO_QUERY:calls=208203,usec=8483456,usec_per_call=40.75,rejected_calls=0,failed_calls=0\r\ncmdstat_hget:calls=3783,usec=14106,usec_per_call=3.73,rejected_calls=0,failed_calls=0\r\ncmdstat_setex:calls=13918714,usec=105836180,usec_per_call=7.60,rejected_calls=0,failed_calls=0\r\ncmdstat_get:calls=35923093,usec=122307020,usec_per_call=3.40,rejected_calls=0,failed_calls=0\r\ncmdstat_ping:calls=55336,usec=25375,usec_per_call=0.46,rejected_calls=0,failed_calls=0\r\ncmdstat_auth:calls=15465428,usec=44721062,usec_per_call=2.89,rejected_calls=0,failed_calls=0\r\ncmdstat_setnx:calls=2932316,usec=7215197,usec_per_call=2.46,rejected_calls=0,failed_calls=0\r\ncmdstat_hgetall:calls=57548,usec=1635440,usec_per_call=28.42,rejected_calls=0,failed_calls=0\r\ncmdstat_mget:calls=124947,usec=19406648,usec_per_call=155.32,rejected_calls=0,failed_calls=0\r\ncmdstat_hset:calls=3007,usec=14074,usec_per_call=4.68,rejected_calls=0,failed_calls=0\r\ncmdstat_graph.QUERY:calls=376486329,usec=8274227715,usec_per_call=21.98,rejected_calls=0,failed_calls=0\r\ncmdstat_subscribe:calls=64,usec=294,usec_per_call=4.59,rejected_calls=0,failed_calls=0\r\ncmdstat_expire:calls=127485,usec=651998,usec_per_call=5.11,rejected_calls=0,failed_calls=0\r\ncmdstat_set:calls=69747688,usec=371428130,usec_per_call=5.33,rejected_calls=0,failed_calls=0\r\ncmdstat_del:calls=8053,usec=119393,usec_per_call=14.83,rejected_calls=0,failed_calls=0\r\ncmdstat_hdel:calls=1362,usec=9964,usec_per_call=7.32,rejected_calls=0,failed_calls=0\r\ncmdstat_graph.DELETE:calls=1827,usec=862210,usec_per_call=471.93,rejected_calls=0,failed_calls=2\r\ncmdstat_publish:calls=5806135,usec=72764828,usec_per_call=12.53,rejected_calls=0,failed_calls=0\r\n\r\n# Errorstats\r\nerrorstat_ERR:count=2\r\n\r\n# Cluster\r\ncluster_enabled:0\r\n\r\n# Keyspace\r\ndb0:keys=2226,expires=1725,avg_ttl=11327\r\n\r\n------ CLIENT LIST OUTPUT ------",
  "state": "closed",
  "created_at": "2023-05-06T07:23:38Z",
  "updated_at": "2023-05-07T06:05:11Z",
  "closed_at": "2023-05-07T06:05:11Z",
  "labels": [],
  "comments_data": [
    {
      "id": 1537089168,
      "user": "sundb",
      "created_at": "2023-05-06T08:28:11Z",
      "body": "Are you using docker on MAC M1?\r\nDo you see the keyword `qemu` in the full logs?"
    },
    {
      "id": 1537110976,
      "user": "rtmyway",
      "created_at": "2023-05-06T10:25:33Z",
      "body": "> Are you using docker on MAC M1? Do you see the keyword `qemu` in the full logs?\r\n\r\nredis server is running in openshift4 container, i can't fetch more logs."
    },
    {
      "id": 1537119952,
      "user": "sundb",
      "created_at": "2023-05-06T11:19:12Z",
      "body": "@rtmyway Is it Arm instance?"
    },
    {
      "id": 1537120511,
      "user": "rtmyway",
      "created_at": "2023-05-06T11:22:23Z",
      "body": "no，i'm sure it's x86_64\n\n\n\n                                                                陶镇\n                                                                2023-05-06\n\n\n\n\n---- Replied Message ----\n| From | ***@***.***> |\n| Date | 05/06/2023 19:19 |\n| To | ***@***.***> |\n| Cc | ***@***.***>***@***.***> |\n| Subject | Re: [redis/redis] [BUG]Redis 6.2.6 crashed by signal: 11, si_code: 1 (Issue #12134) |\n\n@rtmyway Is it Arm instance?\n\n—\nReply to this email directly, view it on GitHub, or unsubscribe.\nYou are receiving this because you were mentioned.Message ID: ***@***.***>"
    },
    {
      "id": 1537301498,
      "user": "oranagra",
      "created_at": "2023-05-07T06:05:11Z",
      "body": "please report in https://github.com/RedisGraph/RedisGraph"
    }
  ]
}