{
  "issue_number": 13247.0,
  "title": "[CRASH] Redis 7.0.12 crashed in zsetDel",
  "body": "Crashed in https://github.com/redis/redis/blob/7.0.12/src/t_zset.c#L1473\r\n```\r\n=== REDIS BUG REPORT START: Cut & paste starting from here ===\r\n9:S 29 Apr 2024 04:19:48.479 # === ASSERTION FAILED ===\r\n9:S 29 Apr 2024 04:19:48.479 # ==> t_zset.c:1473 'retval' is not true\r\n\r\n------ STACK TRACE ------\r\n\r\nBacktrace:\r\n/usr/bin/redis-server *:6379 [cluster][0x48cee7]\r\n/usr/bin/redis-server *:6379 [cluster](zsetDel+0x2d)[0x48f3bd]\r\n/usr/bin/redis-server *:6379 [cluster](zremCommand+0x82)[0x48ff42]\r\n/usr/bin/redis-server *:6379 [cluster](call+0xc0)[0x44cce0]\r\n/usr/bin/redis-server *:6379 [cluster](execCommand+0x1b1)[0x4a52f1]\r\n/usr/bin/redis-server *:6379 [cluster](call+0xc0)[0x44cce0]\r\n/usr/bin/redis-server *:6379 [cluster](processCommand+0x875)[0x44f2c5]\r\n/usr/bin/redis-server *:6379 [cluster](processCommandAndResetClient+0x1c)[0x4650ec]\r\n/usr/bin/redis-server *:6379 [cluster](processInputBuffer+0xd0)[0x467b50]\r\n/usr/bin/redis-server *:6379 [cluster](readQueryFromClient+0x2a8)[0x46ae98]\r\n/usr/bin/redis-server *:6379 [cluster][0x506bd8]\r\n/usr/bin/redis-server *:6379 [cluster](aeProcessEvents+0x1c9)[0x444619]\r\n/usr/bin/redis-server *:6379 [cluster](aeMain+0x1d)[0x4449ad]\r\n/usr/bin/redis-server *:6379 [cluster](main+0x30f)[0x4408df]\r\n/lib64/libc.so.6(__libc_start_main+0xe5)[0x7fbe9f3d7d85]\r\n/usr/bin/redis-server *:6379 [cluster](_start+0x2e)[0x440f2e]\r\n\r\n------ INFO OUTPUT ------\r\n# Server\r\nredis_version:7.0.12\r\nredis_git_sha1:e9be2f9a\r\nredis_git_dirty:0\r\nredis_build_id:7a0155b8bb55f6e9\r\nredis_mode:cluster\r\nos:Linux 4.18.0-513.24.1.el8_9.x86_64 x86_64\r\narch_bits:64\r\nmonotonic_clock:POSIX clock_gettime\r\nmultiplexing_api:epoll\r\natomicvar_api:c11-builtin\r\ngcc_version:8.5.0\r\nprocess_id:9\r\nprocess_supervised:no\r\nrun_id:3ab29ebac6d2a5ec56e8b4e0f62406ef4020c3a3\r\ntcp_port:6379\r\nserver_time_usec:1714335588479728\r\nuptime_in_seconds:40241\r\nuptime_in_days:0\r\nhz:10\r\nconfigured_hz:10\r\nlru_clock:3059556\r\nexecutable:/usr/bin/redis-server\r\nconfig_file:/redisdb/conf/server.conf\r\nio_threads_active:0\r\n\r\n# Clients\r\nconnected_clients:3\r\ncluster_connections:26\r\nmaxclients:10000\r\nclient_recent_max_input_buffer:20480\r\nclient_recent_max_output_buffer:0\r\nblocked_clients:0\r\ntracking_clients:0\r\nclients_in_timeout_table:0\r\n\r\n# Memory\r\nused_memory:2859252072\r\nused_memory_human:2.66G\r\nused_memory_rss:3042582528\r\nused_memory_rss_human:2.83G\r\nused_memory_peak:2859290920\r\nused_memory_peak_human:2.66G\r\nused_memory_peak_perc:100.00%\r\nused_memory_overhead:923467928\r\nused_memory_startup:1669168\r\nused_memory_dataset:1935784144\r\nused_memory_dataset_perc:67.74%\r\nallocator_allocated:2859502664\r\nallocator_active:2979434496\r\nallocator_resident:3021402112\r\ntotal_system_memory:67246452736\r\ntotal_system_memory_human:62.63G\r\nused_memory_lua:31744\r\nused_memory_vm_eval:31744\r\nused_memory_lua_human:31.00K\r\nused_memory_scripts_eval:0\r\nnumber_of_cached_scripts:0\r\nnumber_of_functions:0\r\nnumber_of_libraries:0\r\nused_memory_vm_functions:32768\r\nused_memory_vm_total:64512\r\nused_memory_vm_total_human:63.00K\r\nused_memory_functions:184\r\nused_memory_scripts:184\r\nused_memory_scripts_human:184B\r\nmaxmemory:28991029248\r\nmaxmemory_human:27.00G\r\nmaxmemory_policy:noeviction\r\nallocator_frag_ratio:1.04\r\nallocator_frag_bytes:119931832\r\nallocator_rss_ratio:1.01\r\nallocator_rss_bytes:41967616\r\nrss_overhead_ratio:1.01\r\nrss_overhead_bytes:21180416\r\nmem_fragmentation_ratio:1.06\r\nmem_fragmentation_bytes:183339256\r\nmem_not_counted_for_evict:0\r\nmem_replication_backlog:594623400\r\nmem_total_replication_buffers:594616000\r\nmem_clients_slaves:0\r\nmem_clients_normal:35592\r\nmem_cluster_links:28288\r\nmem_aof_buffer:0\r\nmem_allocator:jemalloc-5.2.1\r\nactive_defrag_running:0\r\nlazyfree_pending_objects:0\r\nlazyfreed_objects:0\r\n\r\n# Persistence\r\nloading:0\r\nasync_loading:0\r\ncurrent_cow_peak:0\r\ncurrent_cow_size:0\r\ncurrent_cow_size_age:0\r\ncurrent_fork_perc:0.00\r\ncurrent_save_keys_processed:0\r\ncurrent_save_keys_total:0\r\nrdb_changes_since_last_save:4350950\r\nrdb_bgsave_in_progress:0\r\nrdb_last_save_time:1714295347\r\nrdb_last_bgsave_status:ok\r\nrdb_last_bgsave_time_sec:-1\r\nrdb_current_bgsave_time_sec:-1\r\nrdb_saves:0\r\nrdb_last_cow_size:0\r\nrdb_last_load_keys_expired:0\r\nrdb_last_load_keys_loaded:4642889\r\naof_enabled:0\r\naof_rewrite_in_progress:0\r\naof_rewrite_scheduled:0\r\naof_last_rewrite_time_sec:-1\r\naof_current_rewrite_time_sec:-1\r\naof_last_bgrewrite_status:ok\r\naof_rewrites:0\r\naof_rewrites_consecutive_failures:0\r\naof_last_write_status:ok\r\naof_last_cow_size:0\r\nmodule_fork_in_progress:0\r\nmodule_fork_last_cow_size:0\r\n\r\n# Stats\r\ntotal_connections_received:3306\r\ntotal_commands_processed:3263886\r\ninstantaneous_ops_per_sec:92\r\ntotal_net_input_bytes:1489975963\r\ntotal_net_output_bytes:975590575\r\ntotal_net_repl_input_bytes:1485974642\r\ntotal_net_repl_output_bytes:0\r\ninstantaneous_input_kbps:17.52\r\ninstantaneous_output_kbps:14.09\r\ninstantaneous_input_repl_kbps:17.46\r\ninstantaneous_output_repl_kbps:0.00\r\nrejected_connections:0\r\nsync_full:0\r\nsync_partial_ok:0\r\nsync_partial_err:0\r\nexpired_keys:0\r\nexpired_stale_perc:0.00\r\nexpired_time_cap_reached_count:0\r\nexpire_cycle_cpu_milliseconds:0\r\nevicted_keys:0\r\nevicted_clients:0\r\ntotal_eviction_exceeded_time:0\r\ncurrent_eviction_exceeded_time:0\r\nkeyspace_hits:0\r\nkeyspace_misses:0\r\npubsub_channels:0\r\npubsub_patterns:0\r\npubsubshard_channels:0\r\nlatest_fork_usec:0\r\ntotal_forks:0\r\nmigrate_cached_sockets:0\r\nslave_expires_tracked_keys:0\r\nactive_defrag_hits:0\r\nactive_defrag_misses:0\r\nactive_defrag_key_hits:0\r\nactive_defrag_key_misses:0\r\ntotal_active_defrag_time:0\r\ncurrent_active_defrag_time:0\r\ntracking_total_keys:0\r\ntracking_total_items:0\r\ntracking_total_prefixes:0\r\nunexpected_error_replies:0\r\ntotal_error_replies:13\r\ndump_payload_sanitizations:0\r\ntotal_reads_processed:1361058\r\ntotal_writes_processed:271056\r\nio_threaded_reads_processed:0\r\nio_threaded_writes_processed:0\r\nreply_buffer_shrinks:14993\r\nreply_buffer_expands:29434\r\n\r\n# Replication\r\nrole:slave\r\nmaster_host:10.234.64.229\r\nmaster_port:6379\r\nmaster_link_status:up\r\nmaster_last_io_seconds_ago:0\r\nmaster_sync_in_progress:0\r\nslave_read_repl_offset:2922241695\r\nslave_repl_offset:2922241457\r\nslave_priority:100\r\nslave_read_only:1\r\nreplica_announced:1\r\nconnected_slaves:0\r\nmaster_failover_state:no-failover\r\nmaster_replid:09cb64333ec3a480cd2c1525838b55eddca2439b\r\nmaster_replid2:0000000000000000000000000000000000000000\r\nmaster_repl_offset:2922241457\r\nsecond_repl_offset:-1\r\nrepl_backlog_active:1\r\nrepl_backlog_size:1610612736\r\nrepl_backlog_first_byte_offset:2329496266\r\nrepl_backlog_histlen:592745192\r\n\r\n# CPU\r\nused_cpu_sys:109.258162\r\nused_cpu_user:146.800325\r\nused_cpu_sys_children:0.341688\r\nused_cpu_user_children:1.036207\r\nused_cpu_sys_main_thread:107.410617\r\nused_cpu_user_main_thread:145.344967\r\n\r\n# Modules\r\nmodule:name=auditlog,ver=3,api=1,filters=0,usedby=[],using=[],options=[handle-io-errors|handle-repl-async-load]\r\nmodule:name=NtasBcsSdb,ver=1,api=1,filters=0,usedby=[],using=[],options=[]\r\n\r\n# Commandstats\r\ncmdstat_multi:calls=431386,usec=222788,usec_per_call=0.52,rejected_calls=0,failed_calls=0\r\ncmdstat_acl|log:calls=399120,usec=1058821,usec_per_call=2.65,rejected_calls=0,failed_calls=0\r\ncmdstat_del:calls=215691,usec=2998097,usec_per_call=13.90,rejected_calls=0,failed_calls=0\r\ncmdstat_cluster|info:calls=40088,usec=1990710,usec_per_call=49.66,rejected_calls=11,failed_calls=0\r\ncmdstat_auth:calls=3306,usec=18958,usec_per_call=5.73,rejected_calls=0,failed_calls=0\r\ncmdstat_hdel:calls=214891,usec=2397296,usec_per_call=11.16,rejected_calls=0,failed_calls=0\r\ncmdstat_info:calls=179719,usec=10900191,usec_per_call=60.65,rejected_calls=0,failed_calls=0\r\ncmdstat_select:calls=1,usec=1,usec_per_call=1.00,rejected_calls=0,failed_calls=0\r\ncmdstat_client|setname:calls=3,usec=18,usec_per_call=6.00,rejected_calls=0,failed_calls=0\r\ncmdstat_zadd:calls=215695,usec=6580856,usec_per_call=30.51,rejected_calls=0,failed_calls=0\r\ncmdstat_zrem:calls=215690,usec=2038551,usec_per_call=9.45,rejected_calls=0,failed_calls=0\r\ncmdstat_hset:calls=904875,usec=23631561,usec_per_call=26.12,rejected_calls=0,failed_calls=0\r\ncmdstat_exec:calls=431385,usec=24885358,usec_per_call=57.69,rejected_calls=0,failed_calls=0\r\ncmdstat_ping:calls=12036,usec=15149,usec_per_call=1.26,rejected_calls=2,failed_calls=0\r\n\r\n# Errorstats\r\nerrorstat_LOADING:count=13\r\n\r\n# Latencystats\r\nlatency_percentiles_usec_multi:p50=0.001,p99=2.007,p99.9=10.047\r\nlatency_percentiles_usec_acl|log:p50=2.007,p99=7.007,p99.9=30.079\r\nlatency_percentiles_usec_del:p50=13.055,p99=39.167,p99.9=72.191\r\nlatency_percentiles_usec_cluster|info:p50=48.127,p99=88.063,p99.9=144.383\r\nlatency_percentiles_usec_auth:p50=3.007,p99=22.015,p99.9=61.183\r\nlatency_percentiles_usec_hdel:p50=10.047,p99=30.079,p99.9=53.247\r\nlatency_percentiles_usec_info:p50=47.103,p99=156.671,p99.9=207.871\r\nlatency_percentiles_usec_select:p50=1.003,p99=1.003,p99.9=1.003\r\nlatency_percentiles_usec_client|setname:p50=3.007,p99=12.031,p99.9=12.031\r\nlatency_percentiles_usec_zadd:p50=25.087,p99=103.423,p99.9=174.079\r\nlatency_percentiles_usec_zrem:p50=8.031,p99=34.047,p99.9=83.455\r\nlatency_percentiles_usec_hset:p50=19.071,p99=105.471,p99.9=169.983\r\nlatency_percentiles_usec_exec:p50=46.079,p99=179.199,p99.9=274.431\r\nlatency_percentiles_usec_ping:p50=1.003,p99=3.007,p99.9=20.095\r\n\r\n# Cluster\r\ncluster_enabled:1\r\n\r\n# Keyspace\r\ndb0:keys=4642900,expires=0,avg_ttl=0\r\n\r\n------ CLIENT LIST OUTPUT ------\r\nid=15 addr=[::1]:53692 laddr=[::1]:6379 fd=38 name=local_monitor age=40212 idle=3 flags=N db=0 sub=0 psub=0 ssub=0 multi=-1 qbuf=0 qbuf-free=0 argv-mem=0 multi-mem=0 rbs=2048 rbp=1024 obl=0 oll=0 omem=0 tot-mem=2824 events=r cmd=info user=probe-user redir=-1 resp=2\r\nid=24 addr=10.234.64.229:6379 laddr=10.254.96.3:53376 fd=33 name= age=40206 idle=0 flags=Mx db=0 sub=0 psub=0 ssub=0 multi=2 qbuf=238 qbuf-free=40716 argv-mem=4 multi-mem=209 rbs=1024 rbp=44 obl=0 oll=0 omem=0 tot-mem=43037 events=r cmd=exec user=(superuser) redir=-1 resp=2\r\nid=25 addr=[::1]:55222 laddr=[::1]:6379 fd=39 name= age=40206 idle=0 flags=N db=0 sub=0 psub=0 ssub=0 multi=-1 qbuf=0 qbuf-free=20474 argv-mem=0 multi-mem=0 rbs=8192 rbp=5604 obl=0 oll=0 omem=0 tot-mem=29440 events=r cmd=info user=probe-user redir=-1 resp=2\r\n\r\n------ CURRENT CLIENT INFO ------\r\nid=24 addr=10.234.64.229:6379 laddr=10.254.96.3:53376 fd=33 name= age=40206 idle=0 flags=Mx db=0 sub=0 psub=0 ssub=0 multi=2 qbuf=238 qbuf-free=40716 argv-mem=4 multi-mem=209 rbs=1024 rbp=44 obl=0 oll=0 omem=0 tot-mem=43037 events=r cmd=exec user=(superuser) redir=-1 resp=2\r\nargv[0]: '\\\"ZREM\\\"'\r\nargv[1]: '\\\"sdb:bcs0:partyList:spi:{2Lm}\\\"'\r\nargv[2]: '\\\"5000014555\\\"'\r\n9:S 29 Apr 2024 04:19:48.482 # key 'sdb:bcs0:partyList:spi:{2Lm}' found in DB containing the following object:\r\n9:S 29 Apr 2024 04:19:48.482 # Object type: 3\r\n9:S 29 Apr 2024 04:19:48.482 # Object encoding: 7\r\n9:S 29 Apr 2024 04:19:48.482 # Object refcount: 1\r\n\r\n------ MODULES INFO OUTPUT ------\r\n\r\n------ CONFIG DEBUG OUTPUT ------\r\nrepl-diskless-load disabled\r\nio-threads-do-reads no\r\nactivedefrag no\r\nreplica-read-only yes\r\nlazyfree-lazy-eviction no\r\nclient-query-buffer-limit 1gb\r\nlazyfree-lazy-server-del no\r\nproto-max-bulk-len 512mb\r\nrepl-diskless-sync yes\r\nlazyfree-lazy-expire no\r\nlist-compress-depth 0\r\nio-threads 1\r\nsanitize-dump-payload no\r\nlazyfree-lazy-user-del no\r\nlazyfree-lazy-user-flush no\r\nslave-read-only yes\r\n\r\n------ FAST MEMORY TEST ------\r\n9:S 29 Apr 2024 04:19:48.482 # Bio thread for job type #0 terminated\r\n9:S 29 Apr 2024 04:19:48.482 # Bio thread for job type #1 terminated\r\n9:S 29 Apr 2024 04:19:48.483 # Bio thread for job type #2 terminated\r\n*** Preparing to test memory region 88a000 (2306048 bytes)\r\n*** Preparing to test memory region c05000 (2072576 bytes)\r\n*** Preparing to test memory region 7fbdb87ff000 (1006632960 bytes)\r\n*** Preparing to test memory region 7fbdf4800000 (8388608 bytes)\r\n*** Preparing to test memory region 7fbdf5000000 (2533494784 bytes)\r\n*** Preparing to test memory region 7fbe90200000 (8388608 bytes)\r\n*** Preparing to test memory region 7fbe90a80000 (47710208 bytes)\r\n*** Preparing to test memory region 7fbe93a00000 (8388608 bytes)\r\n*** Preparing to test memory region 7fbe94200000 (4194304 bytes)\r\n*** Preparing to test memory region 7fbe9476a000 (8388608 bytes)\r\n*** Preparing to test memory region 7fbe94f6b000 (8388608 bytes)\r\n*** Preparing to test memory region 7fbe9576c000 (8388608 bytes)\r\n*** Preparing to test memory region 7fbe95f6d000 (8388608 bytes)\r\n*** Preparing to test memory region 7fbe9676e000 (8388608 bytes)\r\n*** Preparing to test memory region 7fbe9721c000 (8192 bytes)\r\n*** Preparing to test memory region 7fbe97c25000 (4096 bytes)\r\n*** Preparing to test memory region 7fbe99c91000 (4096 bytes)\r\n*** Preparing to test memory region 7fbe9a159000 (4096 bytes)\r\n*** Preparing to test memory region 7fbe9ab45000 (4096 bytes)\r\n*** Preparing to test memory region 7fbe9b25f000 (8192 bytes)\r\n*** Preparing to test memory region 7fbe9b80b000 (12288 bytes)\r\n*** Preparing to test memory region 7fbe9c56a000 (274432 bytes)\r\n*** Preparing to test memory region 7fbe9c9d6000 (524288 bytes)\r\n*** Preparing to test memory region 7fbe9cc75000 (262144 bytes)\r\n*** Preparing to test memory region 7fbe9d2df000 (561152 bytes)\r\n*** Preparing to test memory region 7fbe9e2bf000 (200704 bytes)\r\n*** Preparing to test memory region 7fbe9e500000 (11534336 bytes)\r\n*** Preparing to test memory region 7fbe9f005000 (1572864 bytes)\r\n*** Preparing to test memory region 7fbe9f39c000 (4096 bytes)\r\n*** Preparing to test memory region 7fbe9f75e000 (16384 bytes)\r\n*** Preparing to test memory region 7fbe9f97e000 (16384 bytes)\r\n*** Preparing to test memory region 7fbe9fe67000 (20480 bytes)\r\n*** Preparing to test memory region 7fbea00ff000 (4096 bytes)\r\n*** Preparing to test memory region 7fbea08d7000 (1572864 bytes)\r\n*** Preparing to test memory region 7fbea0aaa000 (32768 bytes)\r\n*** Preparing to test memory region 7fbea0ab4000 (8192 bytes)\r\n.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O.O\r\nFast memory test PASSED, however your memory can still be broken. Please run a memory test for several hours if possible.\r\n\r\n=== REDIS BUG REPORT END. Make sure to include from START to END. ===\r\n```",
  "state": "open",
  "created_at": "2024-05-03T12:27:27Z",
  "updated_at": "2024-06-13T06:24:29Z",
  "closed_at": null,
  "labels": [
    "crash report"
  ],
  "comments_data": [
    {
      "id": 2139346331,
      "user": "SarthakSahu",
      "created_at": "2024-05-30T11:25:25Z",
      "body": "Hi Team, Can we get a support here "
    },
    {
      "id": 2139385943,
      "user": "sundb",
      "created_at": "2024-05-30T11:50:28Z",
      "body": "@SarthakSahu hi, see you again, thanks for your report again.\r\ndo you have any clues? "
    },
    {
      "id": 2140441152,
      "user": "astruble58",
      "created_at": "2024-05-30T17:45:36Z",
      "body": "We are seeing this issue occasionally, and still seeing it now on 7.0.15.  Only on replicas.  I have a fear that it may be memory corruption related to cluster bus messaging, as our application does attempt to send messages from replica to master, using a background thread, to verify synchronization of application non-database variables.  (We have another thread discussing the unreliability of these messages.)  On the other hand, those traces don't make sense for that if everything is transaction-locked -- but come to think of it, as we're not writing to the database there might not be any lockout on our message send.  Or the message receipt and callback,\r\n\r\nThe various crashes occur in different locations.  Here's one from a 12-hour stability run session today/yesterday.  (Our tester said two restarts across our seven replicas, but only gave me a log for one.)\r\n\r\n9:S 29 May 2024 23:37:47.452 # !!! Software Failure. Press left mouse button !\r\nto continue\r\n9:S 29 May 2024 23:37:47.452 # Guru Meditation: Unknown hash encoding #t_hash!\r\n.c:309\r\n\r\n------ STACK TRACE ------\r\n\r\nBacktrace:\r\n/usr/bin/redis-server *:6379 [cluster][0x4954ff]\r\n/usr/bin/redis-server *:6379 [cluster](hashTypeSet+0x34f)[0x495fcf]\r\n/usr/bin/redis-server *:6379 [cluster](hsetCommand+0x8b)[0x4965fb]\r\n/usr/bin/redis-server *:6379 [cluster](call+0xc0)[0x44cda0]\r\n/usr/bin/redis-server *:6379 [cluster](processCommand+0x875)[0x44f385]\r\n/usr/bin/redis-server *:6379 [cluster](processCommandAndResetClient+0x1c)[0x4!\r\n6519c]\r\n/usr/bin/redis-server *:6379 [cluster](processInputBuffer+0xd0)[0x467c00]\r\n/usr/bin/redis-server *:6379 [cluster](readQueryFromClient+0x2a8)[0x46af48]\r\n/usr/bin/redis-server *:6379 [cluster][0x506d78]\r\n/usr/bin/redis-server *:6379 [cluster](aeProcessEvents+0x1c9)[0x444779]\r\n/usr/bin/redis-server *:6379 [cluster](aeMain+0x1d)[0x444b0d]\r\n/usr/bin/redis-server *:6379 [cluster](main+0x30f)[0x440a3f]\r\n/lib64/libc.so.6(__libc_start_main+0xe5)[0x7f8a6de81d85]\r\n/usr/bin/redis-server *:6379 [cluster](_start+0x2e)[0x44108e]\r\n\r\n------ INFO OUTPUT ------\r\n# Server\r\nredis_version:7.0.15\r\nredis_git_sha1:8d67d205\r\nredis_git_dirty:0\r\n(I have the rest of this Bug output, I'm just not convinced it's helpful.)"
    },
    {
      "id": 2141188713,
      "user": "sundb",
      "created_at": "2024-05-31T03:55:45Z",
      "body": "> We are seeing this issue occasionally, and still seeing it now on 7.0.15. Only on replicas. I have a fear that it may be memory corruption related to cluster bus messaging, as our application does attempt to send messages from replica to master, using a background thread, to verify synchronization of application non-database variables. (We have another thread discussing the unreliability of these messages.) On the other hand, those traces don't make sense for that if everything is transaction-locked -- but come to think of it, as we're not writing to the database there might not be any lockout on our message send. Or the message receipt and callback,\r\n\r\nhow did you use a background thread to send message from replica to master? did you implement by changing the source code?"
    },
    {
      "id": 2143795011,
      "user": "astruble58",
      "created_at": "2024-06-02T10:37:59Z",
      "body": "Module code, so \"no and yes\" -- redis source not touched, but it is application code running on the redis server.  But the crashes don't occur in the module code itself, or we'd have a chance to debug it on our own."
    },
    {
      "id": 2143841481,
      "user": "sundb",
      "created_at": "2024-06-02T12:52:49Z",
      "body": "@astruble58 can you share an example of what the module does?  thanks."
    }
  ]
}