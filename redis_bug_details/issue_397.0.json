{
  "issue_number": 397.0,
  "title": "install_server.sh(2.4.9) does not install on Ubuntu 10.04 TLS",
  "body": "first of all I needed to install chkconfig. Once that was installed I reran the install script and git a host of warning messages.\n\n. . .\n\njob, but lsb-header is not supported for Upstart jobs.\ninsserv: warning: script 'procps' missing LSB tags and overrides\nThe script you are attempting to invoke has been converted to an Upstart\njob, but lsb-header is not supported for Upstart jobs.\ninsserv: warning: script 'plymouth-log' missing LSB tags and overrides\nThe script you are attempting to invoke has been converted to an Upstart\njob, but lsb-header is not supported for Upstart jobs.\ninsserv: warning: script 'plymouth' missing LSB tags and overrides\ninsserv: warning: current start runlevel(s) (0 6) of script `umountnfs.sh' overwrites defaults (empty).\ninsserv: There is a loop between service rsyslog and lighttpd if stopped\ninsserv:  loop involving service lighttpd at depth 3\ninsserv:  loop involving service rsyslog at depth 2\ninsserv:  loop involving service udev at depth 1\ninsserv: There is a loop between service lighttpd and rsyslog if stopped\ninsserv: exiting now without changing boot order!\n/sbin/insserv failed, exit code 1\nredis_6379                0:off  1:off  2:off  3:off  4:off  5:off  6:off\n./install_server.sh: 168: chkconfig--level: not found\n/etc/init.d/redis_6379: 1: -e: not found\nStarting Redis server...\nInstallation successful!\nroot@ngsw1:/tmp/redis-2.4.9/utils# \nroot@ngsw1:/tmp/redis-2.4.9/utils# cat /etc/_version\nsqueeze/sid\nroot@ngsw1:/tmp/redis-2.4.9/utils# cat /etc/_release\n",
  "state": "closed",
  "created_at": "2012-03-21T21:39:55Z",
  "updated_at": "2012-10-05T08:27:01Z",
  "closed_at": "2012-04-24T17:14:28Z",
  "labels": [
    "non critical bug"
  ],
  "comments_data": [
    {
      "id": 4772049,
      "user": "fero46",
      "created_at": "2012-03-28T17:08:28Z",
      "body": "same issue on ubuntu 11.10\n\nThis is the output from install_server.sh:\n\n``` shell\n~/redis-2.4.9/utils# ./install_server.sh \n....\nInstalling service...\n./install_server.sh: 168: [[: not found\ninsserv: Script redis_6379 is broken: incomplete LSB comment.\ninsserv: missing `Provides:' entry: please add.\ninsserv: missing `Required-Start:' entry: please add even if empty.\ninsserv: missing `Required-Stop:'  entry: please add even if empty.\ninsserv: missing `Default-Start:'  entry: please add even if empty.\ninsserv: missing `Default-Stop:'   entry: please add even if empty.\ninsserv: Default-Start undefined, assuming empty start runlevel(s) for script `redis_6379'\ninsserv: Default-Stop  undefined, assuming empty stop  runlevel(s) for script `redis_6379'\nThe script you are attempting to invoke has been converted to an Upstart\njob, but lsb-header is not supported for Upstart jobs.\ninsserv: warning: script 'plymouth-log' missing LSB tags and overrides\ninsserv: Default-Start undefined, assuming empty start runlevel(s) for script `plymouth-log'\ninsserv: Default-Stop  undefined, assuming empty stop  runlevel(s) for script `plymouth-log'\nThe script you are attempting to invoke has been converted to an Upstart\njob, but lsb-header is not supported for Upstart jobs.\ninsserv: warning: script 'atd' missing LSB tags and overrides\ninsserv: Default-Start undefined, assuming empty start runlevel(s) for script `atd'\ninsserv: Default-Stop  undefined, assuming empty stop  runlevel(s) for script `atd'\nThe script you are attempting to invoke has been converted to an Upstart\njob, but lsb-header is not supported for Upstart jobs.\ninsserv: warning: script 'procps' missing LSB tags and overrides\ninsserv: Default-Start undefined, assuming empty start runlevel(s) for script `procps'\ninsserv: Default-Stop  undefined, assuming empty stop  runlevel(s) for script `procps'\nThe script you are attempting to invoke has been converted to an Upstart\njob, but lsb-header is not supported for Upstart jobs.\ninsserv: warning: script 'screen-cleanup' missing LSB tags and overrides\ninsserv: Default-Start undefined, assuming empty start runlevel(s) for script `screen-cleanup'\ninsserv: Default-Stop  undefined, assuming empty stop  runlevel(s) for script `screen-cleanup'\nThe script you are attempting to invoke has been converted to an Upstart\njob, but lsb-header is not supported for Upstart jobs.\ninsserv: warning: script 'udev-finish' missing LSB tags and overrides\ninsserv: Default-Start undefined, assuming empty start runlevel(s) for script `udev-finish'\ninsserv: Default-Stop  undefined, assuming empty stop  runlevel(s) for script `udev-finish'\nThe script you are attempting to invoke has been converted to an Upstart\njob, but lsb-header is not supported for Upstart jobs.\ninsserv: warning: script 'plymouth-splash' missing LSB tags and overrides\ninsserv: Default-Start undefined, assuming empty start runlevel(s) for script `plymouth-splash'\ninsserv: Default-Stop  undefined, assuming empty stop  runlevel(s) for script `plymouth-splash'\nThe script you are attempting to invoke has been converted to an Upstart\njob, but lsb-header is not supported for Upstart jobs.\ninsserv: warning: script 'plymouth-stop' missing LSB tags and overrides\ninsserv: Default-Start undefined, assuming empty start runlevel(s) for script `plymouth-stop'\ninsserv: Default-Stop  undefined, assuming empty stop  runlevel(s) for script `plymouth-stop'\nThe script you are attempting to invoke has been converted to an Upstart\njob, but lsb-header is not supported for Upstart jobs.\ninsserv: warning: script 'cron' missing LSB tags and overrides\ninsserv: Default-Start undefined, assuming empty start runlevel(s) for script `cron'\ninsserv: Default-Stop  undefined, assuming empty stop  runlevel(s) for script `cron'\nThe script you are attempting to invoke has been converted to an Upstart\njob, but lsb-header is not supported for Upstart jobs.\ninsserv: warning: script 'hwclock' missing LSB tags and overrides\ninsserv: Default-Start undefined, assuming empty start runlevel(s) for script `hwclock'\ninsserv: Default-Stop  undefined, assuming empty stop  runlevel(s) for script `hwclock'\nThe script you are attempting to invoke has been converted to an Upstart\njob, but lsb-header is not supported for Upstart jobs.\ninsserv: warning: script 'hostname' missing LSB tags and overrides\ninsserv: Default-Start undefined, assuming empty start runlevel(s) for script `hostname'\ninsserv: Default-Stop  undefined, assuming empty stop  runlevel(s) for script `hostname'\nThe script you are attempting to invoke has been converted to an Upstart\njob, but lsb-header is not supported for Upstart jobs.\ninsserv: warning: script 'acpid' missing LSB tags and overrides\ninsserv: Default-Start undefined, assuming empty start runlevel(s) for script `acpid'\ninsserv: Default-Stop  undefined, assuming empty stop  runlevel(s) for script `acpid'\nThe script you are attempting to invoke has been converted to an Upstart\njob, but lsb-header is not supported for Upstart jobs.\ninsserv: warning: script 'irqbalance' missing LSB tags and overrides\ninsserv: Default-Start undefined, assuming empty start runlevel(s) for script `irqbalance'\ninsserv: Default-Stop  undefined, assuming empty stop  runlevel(s) for script `irqbalance'\nThe script you are attempting to invoke has been converted to an Upstart\njob, but lsb-header is not supported for Upstart jobs.\ninsserv: warning: script 'plymouth' missing LSB tags and overrides\ninsserv: Default-Start undefined, assuming empty start runlevel(s) for script `plymouth'\ninsserv: Default-Stop  undefined, assuming empty stop  runlevel(s) for script `plymouth'\nThe script you are attempting to invoke has been converted to an Upstart\njob, but lsb-header is not supported for Upstart jobs.\ninsserv: warning: script 'console-setup' missing LSB tags and overrides\ninsserv: Default-Start undefined, assuming empty start runlevel(s) for script `console-setup'\ninsserv: Default-Stop  undefined, assuming empty stop  runlevel(s) for script `console-setup'\nThe script you are attempting to invoke has been converted to an Upstart\njob, but lsb-header is not supported for Upstart jobs.\ninsserv: warning: script 'dmesg' missing LSB tags and overrides\ninsserv: Default-Start undefined, assuming empty start runlevel(s) for script `dmesg'\ninsserv: Default-Stop  undefined, assuming empty stop  runlevel(s) for script `dmesg'\nThe script you are attempting to invoke has been converted to an Upstart\njob, but lsb-header is not supported for Upstart jobs.\ninsserv: warning: script 'dbus' missing LSB tags and overrides\ninsserv: Default-Start undefined, assuming empty start runlevel(s) for script `dbus'\ninsserv: Default-Stop  undefined, assuming empty stop  runlevel(s) for script `dbus'\nThe script you are attempting to invoke has been converted to an Upstart\njob, but lsb-header is not supported for Upstart jobs.\ninsserv: warning: script 'plymouth-upstart-bridge' missing LSB tags and overrides\ninsserv: Default-Start undefined, assuming empty start runlevel(s) for script `plymouth-upstart-bridge'\ninsserv: Default-Stop  undefined, assuming empty stop  runlevel(s) for script `plymouth-upstart-bridge'\nThe script you are attempting to invoke has been converted to an Upstart\njob, but lsb-header is not supported for Upstart jobs.\ninsserv: warning: script 'ufw' missing LSB tags and overrides\ninsserv: Default-Start undefined, assuming empty start runlevel(s) for script `ufw'\ninsserv: Default-Stop  undefined, assuming empty stop  runlevel(s) for script `ufw'\nThe script you are attempting to invoke has been converted to an Upstart\njob, but lsb-header is not supported for Upstart jobs.\ninsserv: warning: script 'apport' missing LSB tags and overrides\ninsserv: Default-Start undefined, assuming empty start runlevel(s) for script `apport'\ninsserv: Default-Stop  undefined, assuming empty stop  runlevel(s) for script `apport'\nThe script you are attempting to invoke has been converted to an Upstart\njob, but lsb-header is not supported for Upstart jobs.\ninsserv: warning: script 'udevmonitor' missing LSB tags and overrides\ninsserv: Default-Start undefined, assuming empty start runlevel(s) for script `udevmonitor'\ninsserv: Default-Stop  undefined, assuming empty stop  runlevel(s) for script `udevmonitor'\nThe script you are attempting to invoke has been converted to an Upstart\njob, but lsb-header is not supported for Upstart jobs.\ninsserv: warning: script 'rsyslog' missing LSB tags and overrides\ninsserv: Default-Start undefined, assuming empty start runlevel(s) for script `rsyslog'\ninsserv: Default-Stop  undefined, assuming empty stop  runlevel(s) for script `rsyslog'\nThe script you are attempting to invoke has been converted to an Upstart\njob, but lsb-header is not supported for Upstart jobs.\ninsserv: warning: script 'udev' missing LSB tags and overrides\ninsserv: Default-Start undefined, assuming empty start runlevel(s) for script `udev'\ninsserv: Default-Stop  undefined, assuming empty stop  runlevel(s) for script `udev'\nThe script you are attempting to invoke has been converted to an Upstart\njob, but lsb-header is not supported for Upstart jobs.\ninsserv: warning: script 'udevtrigger' missing LSB tags and overrides\ninsserv: Default-Start undefined, assuming empty start runlevel(s) for script `udevtrigger'\ninsserv: Default-Stop  undefined, assuming empty stop  runlevel(s) for script `udevtrigger'\nThe script you are attempting to invoke has been converted to an Upstart\njob, but lsb-header is not supported for Upstart jobs.\ninsserv: warning: script 'module-init-tools' missing LSB tags and overrides\ninsserv: Default-Start undefined, assuming empty start runlevel(s) for script `module-init-tools'\ninsserv: Default-Stop  undefined, assuming empty stop  runlevel(s) for script `module-init-tools'\nThe script you are attempting to invoke has been converted to an Upstart\njob, but lsb-header is not supported for Upstart jobs.\ninsserv: warning: script 'udev-fallback-graphics' missing LSB tags and overrides\ninsserv: Default-Start undefined, assuming empty start runlevel(s) for script `udev-fallback-graphics'\ninsserv: Default-Stop  undefined, assuming empty stop  runlevel(s) for script `udev-fallback-graphics'\nThe script you are attempting to invoke has been converted to an Upstart\njob, but lsb-header is not supported for Upstart jobs.\ninsserv: warning: script 'friendly-recovery' missing LSB tags and overrides\ninsserv: Default-Start undefined, assuming empty start runlevel(s) for script `friendly-recovery'\ninsserv: Default-Stop  undefined, assuming empty stop  runlevel(s) for script `friendly-recovery'\nThe script you are attempting to invoke has been converted to an Upstart\njob, but lsb-header is not supported for Upstart jobs.\ninsserv: warning: script 'network-interface' missing LSB tags and overrides\ninsserv: Default-Start undefined, assuming empty start runlevel(s) for script `network-interface'\ninsserv: Default-Stop  undefined, assuming empty stop  runlevel(s) for script `network-interface'\nThe script you are attempting to invoke has been converted to an Upstart\njob, but lsb-header is not supported for Upstart jobs.\ninsserv: warning: script 'dovecot' missing LSB tags and overrides\ninsserv: Default-Start undefined, assuming empty start runlevel(s) for script `dovecot'\ninsserv: Default-Stop  undefined, assuming empty stop  runlevel(s) for script `dovecot'\nThe script you are attempting to invoke has been converted to an Upstart\njob, but lsb-header is not supported for Upstart jobs.\ninsserv: warning: script 'hwclock-save' missing LSB tags and overrides\ninsserv: Default-Start undefined, assuming empty start runlevel(s) for script `hwclock-save'\ninsserv: Default-Stop  undefined, assuming empty stop  runlevel(s) for script `hwclock-save'\nThe script you are attempting to invoke has been converted to an Upstart\njob, but lsb-header is not supported for Upstart jobs.\ninsserv: warning: script 'network-interface-security' missing LSB tags and overrides\ninsserv: Default-Start undefined, assuming empty start runlevel(s) for script `network-interface-security'\ninsserv: Default-Stop  undefined, assuming empty stop  runlevel(s) for script `network-interface-security'\nThe script you are attempting to invoke has been converted to an Upstart\njob, but lsb-header is not supported for Upstart jobs.\ninsserv: warning: script 'setvtrgb' missing LSB tags and overrides\ninsserv: Default-Start undefined, assuming empty start runlevel(s) for script `setvtrgb'\ninsserv: Default-Stop  undefined, assuming empty stop  runlevel(s) for script `setvtrgb'\nredis_6379                0:off  1:off  2:off  3:off  4:off  5:off  6:off\nSuccessfully added to chkconfig!\n./install_server.sh: 168: chkconfig--level: not found\n/etc/init.d/redis_6379: 1: -e: not found\nStarting Redis server...\nInstallation successful!\n```\n\nIt says successful but I can't start the init script.\n\n```\n~/redis-2.4.9/utils# /etc/init.d/redis_6379 start\n/etc/init.d/redis_6379: line 1: -e: command not found\nStarting Redis server...\n~/redis-2.4.9/utils# cat /etc/init.d/redis_6379 \n-e #/bin/sh\n #Configurations injected by install_server below....\n\n EXEC=/usr/local/bin/redis-server\n CLIEXEC=/usr/local/bin/redis-cli   \n```\n"
    },
    {
      "id": 4774117,
      "user": "fero46",
      "created_at": "2012-03-28T17:37:13Z",
      "body": "So now redis  is working. I cleaned up the first line in etc/init.d/redis_6379 from -e #/bin/sh to #!/bin/sh \n\nIn the install_server.sh at line 168 there is no space between chkconfig and --level that fix that bug.\n\nBut I still have the strange output from install_server.sh. \n"
    },
    {
      "id": 5310085,
      "user": "antirez",
      "created_at": "2012-04-24T17:14:28Z",
      "body": "Fixed (see commit). Thanks, closing.\n"
    },
    {
      "id": 9168715,
      "user": "ralyodio",
      "created_at": "2012-10-05T08:27:01Z",
      "body": "i had same issue on debian. I removed the '-e' from '-e #!/bin/bash' in /etc/init.d/redis_6379 and it worked after that.\n"
    }
  ]
}