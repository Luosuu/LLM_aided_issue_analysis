{
  "issue_number": 12594.0,
  "title": "[BUG] Can not build from source Mac OS 13.5.2 ",
  "body": "**Describe the bug**\r\n\r\nI am installing version `6.0.16` from source on new Mac OS 13.5.2\r\n\r\n```sh\r\nreplication.c:1236:31: error: variable has incomplete type 'struct stat64'\r\n            struct redis_stat buf;\r\n                              ^\r\nreplication.c:1236:20: note: forward declaration of 'struct stat64'\r\n            struct redis_stat buf;\r\n                   ^\r\n./config.h:45:20: note: expanded from macro 'redis_stat'\r\n#define redis_stat stat64\r\n                   ^\r\nreplication.c:1283:21: error: call to undeclared function 'fstat64'; ISO C99 and later do not support implicit function declarations [-Wimplicit-function-declaration]\r\n                    redis_fstat(slave->repldbfd,&buf) == -1) {\r\n                    ^\r\n```\r\n\r\n```\r\nApple clang version 14.0.3 (clang-1403.0.22.14.1)\r\nTarget: arm64-apple-darwin22.6.0\r\nThread model: posix\r\nInstalledDir: /Library/Developer/CommandLineTools/usr/bin\r\n```\r\n\r\n**To reproduce**\r\n\r\n```sh\r\ncd ~\r\ncurl https://download.redis.io/releases/redis-6.0.16.tar.gz -o \"redis-6.0.16.tar.gz\"\r\ntar xzf redis-6.0.16.tar.gz\r\ncd redis-6.0.16\r\nmake\r\n```\r\n\r\n**Expected behavior**\r\n\r\nInstall should work. \r\n\r\n**Additional information**\r\n\r\nOutput of `make` is:\r\n```sh\r\ncd src && /Library/Developer/CommandLineTools/usr/bin/make all\r\n/bin/sh: line 0: cd: src: No such file or directory\r\nmake: *** [all] Error 1\r\nkevinfox@Kevins-MacBook-Pro redis-6.0.16 % cd ..\r\nkevinfox@Kevins-MacBook-Pro ~ % tar xzf redis-6.0.16.tar.gz\r\nkevinfox@Kevins-MacBook-Pro ~ % cd redis-6.0.16\r\nkevinfox@Kevins-MacBook-Pro redis-6.0.16 % make\r\ncd src && /Library/Developer/CommandLineTools/usr/bin/make all\r\n    CC Makefile.dep\r\nrm -rf redis-server redis-sentinel redis-cli redis-benchmark redis-check-rdb redis-check-aof *.o *.gcda *.gcno *.gcov redis.info lcov-html Makefile.dep dict-benchmark\r\nrm -f adlist.d quicklist.d ae.d anet.d dict.d server.d sds.d zmalloc.d lzf_c.d lzf_d.d pqsort.d zipmap.d sha1.d ziplist.d release.d networking.d util.d object.d db.d replication.d rdb.d t_string.d t_list.d t_set.d t_zset.d t_hash.d config.d aof.d pubsub.d multi.d debug.d sort.d intset.d syncio.d cluster.d crc16.d endianconv.d slowlog.d scripting.d bio.d rio.d rand.d memtest.d crcspeed.d crc64.d bitops.d sentinel.d notify.d setproctitle.d blocked.d hyperloglog.d latency.d sparkline.d redis-check-rdb.d redis-check-aof.d geo.d lazyfree.d module.d evict.d expire.d geohash.d geohash_helper.d childinfo.d defrag.d siphash.d rax.d t_stream.d listpack.d localtime.d lolwut.d lolwut5.d lolwut6.d acl.d gopher.d tracking.d connection.d tls.d sha256.d timeout.d setcpuaffinity.d mt19937-64.d anet.d adlist.d dict.d redis-cli.d zmalloc.d release.d ae.d crcspeed.d crc64.d siphash.d crc16.d mt19937-64.d ae.d anet.d redis-benchmark.d adlist.d dict.d zmalloc.d siphash.d mt19937-64.d\r\n(cd ../deps && /Library/Developer/CommandLineTools/usr/bin/make distclean)\r\n(cd hiredis && /Library/Developer/CommandLineTools/usr/bin/make clean) > /dev/null || true\r\n(cd linenoise && /Library/Developer/CommandLineTools/usr/bin/make clean) > /dev/null || true\r\n(cd lua && /Library/Developer/CommandLineTools/usr/bin/make clean) > /dev/null || true\r\n(cd jemalloc && [ -f Makefile ] && /Library/Developer/CommandLineTools/usr/bin/make distclean) > /dev/null || true\r\n(rm -f .make-*)\r\n(rm -f .make-*)\r\necho STD=-std=c11 -pedantic -DREDIS_STATIC='' >> .make-settings\r\necho WARN=-Wall -W -Wno-missing-field-initializers >> .make-settings\r\necho OPT=-O2 >> .make-settings\r\necho MALLOC=libc >> .make-settings\r\necho BUILD_TLS= >> .make-settings\r\necho USE_SYSTEMD= >> .make-settings\r\necho CFLAGS= >> .make-settings\r\necho LDFLAGS= >> .make-settings\r\necho REDIS_CFLAGS= >> .make-settings\r\necho REDIS_LDFLAGS= >> .make-settings\r\necho PREV_FINAL_CFLAGS=-std=c11 -pedantic -DREDIS_STATIC='' -Wall -W -Wno-missing-field-initializers -O2 -g -ggdb   -I../deps/hiredis -I../deps/linenoise -I../deps/lua/src >> .make-settings\r\necho PREV_FINAL_LDFLAGS=  -g -ggdb >> .make-settings\r\n(cd ../deps && /Library/Developer/CommandLineTools/usr/bin/make hiredis linenoise lua)\r\n(cd hiredis && /Library/Developer/CommandLineTools/usr/bin/make clean) > /dev/null || true\r\n(cd linenoise && /Library/Developer/CommandLineTools/usr/bin/make clean) > /dev/null || true\r\n(cd lua && /Library/Developer/CommandLineTools/usr/bin/make clean) > /dev/null || true\r\n(cd jemalloc && [ -f Makefile ] && /Library/Developer/CommandLineTools/usr/bin/make distclean) > /dev/null || true\r\n(rm -f .make-*)\r\n(echo \"\" > .make-ldflags)\r\n(echo \"\" > .make-cflags)\r\nMAKE hiredis\r\ncd hiredis && /Library/Developer/CommandLineTools/usr/bin/make static\r\ncc -std=c99 -pedantic -c -O3 -fPIC  -I/usr/local/opt/openssl/include -Wall -W -Wstrict-prototypes -Wwrite-strings -Wno-missing-field-initializers -g -ggdb net.c\r\ncc -std=c99 -pedantic -c -O3 -fPIC  -I/usr/local/opt/openssl/include -Wall -W -Wstrict-prototypes -Wwrite-strings -Wno-missing-field-initializers -g -ggdb hiredis.c\r\ncc -std=c99 -pedantic -c -O3 -fPIC  -I/usr/local/opt/openssl/include -Wall -W -Wstrict-prototypes -Wwrite-strings -Wno-missing-field-initializers -g -ggdb sds.c\r\ncc -std=c99 -pedantic -c -O3 -fPIC  -I/usr/local/opt/openssl/include -Wall -W -Wstrict-prototypes -Wwrite-strings -Wno-missing-field-initializers -g -ggdb async.c\r\ncc -std=c99 -pedantic -c -O3 -fPIC  -I/usr/local/opt/openssl/include -Wall -W -Wstrict-prototypes -Wwrite-strings -Wno-missing-field-initializers -g -ggdb read.c\r\ncc -std=c99 -pedantic -c -O3 -fPIC  -I/usr/local/opt/openssl/include -Wall -W -Wstrict-prototypes -Wwrite-strings -Wno-missing-field-initializers -g -ggdb sockcompat.c\r\nar rcs libhiredis.a net.o hiredis.o sds.o async.o read.o sockcompat.o\r\nMAKE linenoise\r\ncd linenoise && /Library/Developer/CommandLineTools/usr/bin/make\r\ncc  -Wall -Os -g  -c linenoise.c\r\nMAKE lua\r\ncd lua/src && /Library/Developer/CommandLineTools/usr/bin/make all CFLAGS=\"-O2 -Wall -DLUA_ANSI -DENABLE_CJSON_GLOBAL -DREDIS_STATIC='' \" MYLDFLAGS=\"\" AR=\"ar rcu\"\r\ncc -O2 -Wall -DLUA_ANSI -DENABLE_CJSON_GLOBAL -DREDIS_STATIC=''    -c -o lapi.o lapi.c\r\ncc -O2 -Wall -DLUA_ANSI -DENABLE_CJSON_GLOBAL -DREDIS_STATIC=''    -c -o lcode.o lcode.c\r\ncc -O2 -Wall -DLUA_ANSI -DENABLE_CJSON_GLOBAL -DREDIS_STATIC=''    -c -o ldebug.o ldebug.c\r\ncc -O2 -Wall -DLUA_ANSI -DENABLE_CJSON_GLOBAL -DREDIS_STATIC=''    -c -o ldo.o ldo.c\r\nldo.c:496:7: warning: unused variable 'c' [-Wunused-variable]\r\n  int c = luaZ_lookahead(p->z);\r\n      ^\r\n1 warning generated.\r\ncc -O2 -Wall -DLUA_ANSI -DENABLE_CJSON_GLOBAL -DREDIS_STATIC=''    -c -o ldump.o ldump.c\r\ncc -O2 -Wall -DLUA_ANSI -DENABLE_CJSON_GLOBAL -DREDIS_STATIC=''    -c -o lfunc.o lfunc.c\r\ncc -O2 -Wall -DLUA_ANSI -DENABLE_CJSON_GLOBAL -DREDIS_STATIC=''    -c -o lgc.o lgc.c\r\ncc -O2 -Wall -DLUA_ANSI -DENABLE_CJSON_GLOBAL -DREDIS_STATIC=''    -c -o llex.o llex.c\r\ncc -O2 -Wall -DLUA_ANSI -DENABLE_CJSON_GLOBAL -DREDIS_STATIC=''    -c -o lmem.o lmem.c\r\ncc -O2 -Wall -DLUA_ANSI -DENABLE_CJSON_GLOBAL -DREDIS_STATIC=''    -c -o lobject.o lobject.c\r\ncc -O2 -Wall -DLUA_ANSI -DENABLE_CJSON_GLOBAL -DREDIS_STATIC=''    -c -o lopcodes.o lopcodes.c\r\ncc -O2 -Wall -DLUA_ANSI -DENABLE_CJSON_GLOBAL -DREDIS_STATIC=''    -c -o lparser.o lparser.c\r\ncc -O2 -Wall -DLUA_ANSI -DENABLE_CJSON_GLOBAL -DREDIS_STATIC=''    -c -o lstate.o lstate.c\r\ncc -O2 -Wall -DLUA_ANSI -DENABLE_CJSON_GLOBAL -DREDIS_STATIC=''    -c -o lstring.o lstring.c\r\ncc -O2 -Wall -DLUA_ANSI -DENABLE_CJSON_GLOBAL -DREDIS_STATIC=''    -c -o ltable.o ltable.c\r\ncc -O2 -Wall -DLUA_ANSI -DENABLE_CJSON_GLOBAL -DREDIS_STATIC=''    -c -o ltm.o ltm.c\r\ncc -O2 -Wall -DLUA_ANSI -DENABLE_CJSON_GLOBAL -DREDIS_STATIC=''    -c -o lundump.o lundump.c\r\ncc -O2 -Wall -DLUA_ANSI -DENABLE_CJSON_GLOBAL -DREDIS_STATIC=''    -c -o lvm.o lvm.c\r\ncc -O2 -Wall -DLUA_ANSI -DENABLE_CJSON_GLOBAL -DREDIS_STATIC=''    -c -o lzio.o lzio.c\r\ncc -O2 -Wall -DLUA_ANSI -DENABLE_CJSON_GLOBAL -DREDIS_STATIC=''    -c -o strbuf.o strbuf.c\r\ncc -O2 -Wall -DLUA_ANSI -DENABLE_CJSON_GLOBAL -DREDIS_STATIC=''    -c -o fpconv.o fpconv.c\r\ncc -O2 -Wall -DLUA_ANSI -DENABLE_CJSON_GLOBAL -DREDIS_STATIC=''    -c -o lauxlib.o lauxlib.c\r\nlauxlib.c:577:61: warning: while loop has empty body [-Wempty-body]\r\n   while ((c = getc(lf.f)) != EOF && c != LUA_SIGNATURE[0]) ;\r\n                                                            ^\r\nlauxlib.c:577:61: note: put the semicolon on a separate line to silence this warning\r\n1 warning generated.\r\ncc -O2 -Wall -DLUA_ANSI -DENABLE_CJSON_GLOBAL -DREDIS_STATIC=''    -c -o lbaselib.o lbaselib.c\r\ncc -O2 -Wall -DLUA_ANSI -DENABLE_CJSON_GLOBAL -DREDIS_STATIC=''    -c -o ldblib.o ldblib.c\r\ncc -O2 -Wall -DLUA_ANSI -DENABLE_CJSON_GLOBAL -DREDIS_STATIC=''    -c -o liolib.o liolib.c\r\ncc -O2 -Wall -DLUA_ANSI -DENABLE_CJSON_GLOBAL -DREDIS_STATIC=''    -c -o lmathlib.o lmathlib.c\r\ncc -O2 -Wall -DLUA_ANSI -DENABLE_CJSON_GLOBAL -DREDIS_STATIC=''    -c -o loslib.o loslib.c\r\nloslib.c:60:3: warning: 'tmpnam' is deprecated: This function is provided for compatibility reasons only.  Due to security concerns inherent in the design of tmpnam(3), it is highly recommended that you use mkstemp(3) instead. [-Wdeprecated-declarations]\r\n  lua_tmpnam(buff, err);\r\n  ^\r\n./luaconf.h:657:33: note: expanded from macro 'lua_tmpnam'\r\n#define lua_tmpnam(b,e)         { e = (tmpnam(b) == NULL); }\r\n                                       ^\r\n/Library/Developer/CommandLineTools/SDKs/MacOSX14.0.sdk/usr/include/stdio.h:189:1: note: 'tmpnam' has been explicitly marked deprecated here\r\n__deprecated_msg(\"This function is provided for compatibility reasons only.  Due to security concerns inherent in the design of tmpnam(3), it is highly recommended that you use mkstemp(3) instead.\")\r\n^\r\n/Library/Developer/CommandLineTools/SDKs/MacOSX14.0.sdk/usr/include/sys/cdefs.h:215:48: note: expanded from macro '__deprecated_msg'\r\n        #define __deprecated_msg(_msg) __attribute__((__deprecated__(_msg)))\r\n                                                      ^\r\n1 warning generated.\r\ncc -O2 -Wall -DLUA_ANSI -DENABLE_CJSON_GLOBAL -DREDIS_STATIC=''    -c -o ltablib.o ltablib.c\r\ncc -O2 -Wall -DLUA_ANSI -DENABLE_CJSON_GLOBAL -DREDIS_STATIC=''    -c -o lstrlib.o lstrlib.c\r\ncc -O2 -Wall -DLUA_ANSI -DENABLE_CJSON_GLOBAL -DREDIS_STATIC=''    -c -o loadlib.o loadlib.c\r\ncc -O2 -Wall -DLUA_ANSI -DENABLE_CJSON_GLOBAL -DREDIS_STATIC=''    -c -o linit.o linit.c\r\ncc -O2 -Wall -DLUA_ANSI -DENABLE_CJSON_GLOBAL -DREDIS_STATIC=''    -c -o lua_cjson.o lua_cjson.c\r\ncc -O2 -Wall -DLUA_ANSI -DENABLE_CJSON_GLOBAL -DREDIS_STATIC=''    -c -o lua_struct.o lua_struct.c\r\ncc -O2 -Wall -DLUA_ANSI -DENABLE_CJSON_GLOBAL -DREDIS_STATIC=''    -c -o lua_cmsgpack.o lua_cmsgpack.c\r\ncc -O2 -Wall -DLUA_ANSI -DENABLE_CJSON_GLOBAL -DREDIS_STATIC=''    -c -o lua_bit.o lua_bit.c\r\nar rcu liblua.a lapi.o lcode.o ldebug.o ldo.o ldump.o lfunc.o lgc.o llex.o lmem.o lobject.o lopcodes.o lparser.o lstate.o lstring.o ltable.o ltm.o lundump.o lvm.o lzio.o strbuf.o fpconv.o lauxlib.o lbaselib.o ldblib.o liolib.o lmathlib.o loslib.o ltablib.o lstrlib.o loadlib.o linit.o lua_cjson.o lua_struct.o lua_cmsgpack.o lua_bit.o\t# DLL needs all object files\r\nranlib liblua.a\r\ncc -O2 -Wall -DLUA_ANSI -DENABLE_CJSON_GLOBAL -DREDIS_STATIC=''    -c -o lua.o lua.c\r\ncc -o lua  lua.o liblua.a -lm\r\ncc -O2 -Wall -DLUA_ANSI -DENABLE_CJSON_GLOBAL -DREDIS_STATIC=''    -c -o luac.o luac.c\r\ncc -O2 -Wall -DLUA_ANSI -DENABLE_CJSON_GLOBAL -DREDIS_STATIC=''    -c -o print.o print.c\r\ncc -o luac  luac.o print.o liblua.a -lm\r\n    CC adlist.o\r\nIn file included from adlist.c:34:\r\n./zmalloc.h:90:19: warning: a function declaration without a prototype is deprecated in all versions of C [-Wstrict-prototypes]\r\nint jemalloc_purge();\r\n                  ^\r\n                   void\r\n1 warning generated.\r\n    CC quicklist.o\r\nIn file included from quicklist.c:34:\r\n./zmalloc.h:90:19: warning: a function declaration without a prototype is deprecated in all versions of C [-Wstrict-prototypes]\r\nint jemalloc_purge();\r\n                  ^\r\n                   void\r\n1 warning generated.\r\n    CC ae.o\r\nIn file included from ae.c:44:\r\n./zmalloc.h:90:19: warning: a function declaration without a prototype is deprecated in all versions of C [-Wstrict-prototypes]\r\nint jemalloc_purge();\r\n                  ^\r\n                   void\r\n1 warning generated.\r\n    CC anet.o\r\n    CC dict.o\r\nIn file included from dict.c:47:\r\n./zmalloc.h:90:19: warning: a function declaration without a prototype is deprecated in all versions of C [-Wstrict-prototypes]\r\nint jemalloc_purge();\r\n                  ^\r\n                   void\r\n1 warning generated.\r\n    CC server.o\r\nIn file included from server.c:30:\r\nIn file included from ./server.h:36:\r\nIn file included from ./rio.h:38:\r\n./connection.h:206:29: warning: a function declaration without a prototype is deprecated in all versions of C [-Wstrict-prototypes]\r\nconnection *connCreateSocket();\r\n                            ^\r\n                             void\r\n./connection.h:209:26: warning: a function declaration without a prototype is deprecated in all versions of C [-Wstrict-prototypes]\r\nconnection *connCreateTLS();\r\n                         ^\r\n                          void\r\n./connection.h:234:22: warning: a function declaration without a prototype is deprecated in all versions of C [-Wstrict-prototypes]\r\nint tlsHasPendingData();\r\n                     ^\r\n                      void\r\n./connection.h:235:26: warning: a function declaration without a prototype is deprecated in all versions of C [-Wstrict-prototypes]\r\nint tlsProcessPendingData();\r\n                         ^\r\n                          void\r\nIn file included from server.c:30:\r\nIn file included from ./server.h:64:\r\n./zmalloc.h:90:19: warning: a function declaration without a prototype is deprecated in all versions of C [-Wstrict-prototypes]\r\nint jemalloc_purge();\r\n                  ^\r\n                   void\r\nIn file included from server.c:30:\r\n./server.h:1639:35: warning: a function declaration without a prototype is deprecated in all versions of C [-Wstrict-prototypes]\r\nint moduleAllDatatypesHandleErrors();\r\n                                  ^\r\n                                   void\r\n./server.h:1919:25: warning: a function declaration without a prototype is deprecated in all versions of C [-Wstrict-prototypes]\r\nvoid restartAOFAfterSYNC();\r\n                        ^\r\n                         void\r\n./server.h:1929:26: warning: a function declaration without a prototype is deprecated in all versions of C [-Wstrict-prototypes]\r\nint hasActiveChildProcess();\r\n                         ^\r\n                          void\r\n./server.h:1955:28: warning: a function declaration without a prototype is deprecated in all versions of C [-Wstrict-prototypes]\r\nuser *ACLCreateUnlinkedUser();\r\n                           ^\r\n                            void\r\n./server.h:2025:37: warning: a function declaration without a prototype is deprecated in all versions of C [-Wstrict-prototypes]\r\nsize_t freeMemoryGetNotCountedMemory();\r\n                                    ^\r\n                                     void\r\n./server.h:2133:22: warning: a function declaration without a prototype is deprecated in all versions of C [-Wstrict-prototypes]\r\nvoid initConfigValues();\r\n                     ^\r\n                      void\r\n./server.h:2173:32: warning: a function declaration without a prototype is deprecated in all versions of C [-Wstrict-prototypes]\r\nlong long dbTotalServerKeyCount();\r\n                               ^\r\n                                void\r\nserver.c:1479:26: warning: a function declaration without a prototype is deprecated in all versions of C [-Wstrict-prototypes]\r\nint hasActiveChildProcess() {\r\n                         ^\r\n                          void\r\nserver.c:3045:20: warning: a function declaration without a prototype is deprecated in all versions of C [-Wstrict-prototypes]\r\nvoid InitServerLast() {\r\n                   ^\r\n                    void\r\nserver.c:5105:39: warning: a function declaration without a prototype is deprecated in all versions of C [-Wstrict-prototypes]\r\nvoid closeClildUnusedResourceAfterFork() {\r\n                                      ^\r\n                                       void\r\n15 warnings generated.\r\n    CC sds.o\r\nIn file included from sds.c:40:\r\nIn file included from ./sdsalloc.h:42:\r\n./zmalloc.h:90:19: warning: a function declaration without a prototype is deprecated in all versions of C [-Wstrict-prototypes]\r\nint jemalloc_purge();\r\n                  ^\r\n                   void\r\n1 warning generated.\r\n    CC zmalloc.o\r\nIn file included from zmalloc.c:47:\r\n./zmalloc.h:90:19: warning: a function declaration without a prototype is deprecated in all versions of C [-Wstrict-prototypes]\r\nint jemalloc_purge();\r\n                  ^\r\n                   void\r\nzmalloc.c:409:19: warning: a function declaration without a prototype is deprecated in all versions of C [-Wstrict-prototypes]\r\nint jemalloc_purge() {\r\n                  ^\r\n                   void\r\n2 warnings generated.\r\n    CC lzf_c.o\r\n    CC lzf_d.o\r\n    CC pqsort.o\r\npqsort.c:106:7: warning: performing pointer subtraction with a null pointer has undefined behavior [-Wnull-pointer-subtraction]\r\nloop:   SWAPINIT(a, es);\r\n        ^~~~~~~~~~~~~~~\r\npqsort.c:65:47: note: expanded from macro 'SWAPINIT'\r\n#define SWAPINIT(a, es) swaptype = ((char *)a - (char *)0) % sizeof(long) || \\\r\n                                              ^ ~~~~~~~~~\r\n1 warning generated.\r\n    CC zipmap.o\r\nIn file included from zipmap.c:80:\r\n./zmalloc.h:90:19: warning: a function declaration without a prototype is deprecated in all versions of C [-Wstrict-prototypes]\r\nint jemalloc_purge();\r\n                  ^\r\n                   void\r\n1 warning generated.\r\n    CC sha1.o\r\n    CC ziplist.o\r\nIn file included from ziplist.c:187:\r\n./zmalloc.h:90:19: warning: a function declaration without a prototype is deprecated in all versions of C [-Wstrict-prototypes]\r\nint jemalloc_purge();\r\n                  ^\r\n                   void\r\n1 warning generated.\r\n    CC release.o\r\n    CC networking.o\r\nIn file included from networking.c:30:\r\nIn file included from ./server.h:36:\r\nIn file included from ./rio.h:38:\r\n./connection.h:206:29: warning: a function declaration without a prototype is deprecated in all versions of C [-Wstrict-prototypes]\r\nconnection *connCreateSocket();\r\n                            ^\r\n                             void\r\n./connection.h:209:26: warning: a function declaration without a prototype is deprecated in all versions of C [-Wstrict-prototypes]\r\nconnection *connCreateTLS();\r\n                         ^\r\n                          void\r\n./connection.h:234:22: warning: a function declaration without a prototype is deprecated in all versions of C [-Wstrict-prototypes]\r\nint tlsHasPendingData();\r\n                     ^\r\n                      void\r\n./connection.h:235:26: warning: a function declaration without a prototype is deprecated in all versions of C [-Wstrict-prototypes]\r\nint tlsProcessPendingData();\r\n                         ^\r\n                          void\r\nIn file included from networking.c:30:\r\nIn file included from ./server.h:64:\r\n./zmalloc.h:90:19: warning: a function declaration without a prototype is deprecated in all versions of C [-Wstrict-prototypes]\r\nint jemalloc_purge();\r\n                  ^\r\n                   void\r\nIn file included from networking.c:30:\r\n./server.h:1639:35: warning: a function declaration without a prototype is deprecated in all versions of C [-Wstrict-prototypes]\r\nint moduleAllDatatypesHandleErrors();\r\n                                  ^\r\n                                   void\r\n./server.h:1919:25: warning: a function declaration without a prototype is deprecated in all versions of C [-Wstrict-prototypes]\r\nvoid restartAOFAfterSYNC();\r\n                        ^\r\n                         void\r\n./server.h:1929:26: warning: a function declaration without a prototype is deprecated in all versions of C [-Wstrict-prototypes]\r\nint hasActiveChildProcess();\r\n                         ^\r\n                          void\r\n./server.h:1955:28: warning: a function declaration without a prototype is deprecated in all versions of C [-Wstrict-prototypes]\r\nuser *ACLCreateUnlinkedUser();\r\n                           ^\r\n                            void\r\n./server.h:2025:37: warning: a function declaration without a prototype is deprecated in all versions of C [-Wstrict-prototypes]\r\nsize_t freeMemoryGetNotCountedMemory();\r\n                                    ^\r\n                                     void\r\n./server.h:2133:22: warning: a function declaration without a prototype is deprecated in all versions of C [-Wstrict-prototypes]\r\nvoid initConfigValues();\r\n                     ^\r\n                      void\r\n./server.h:2173:32: warning: a function declaration without a prototype is deprecated in all versions of C [-Wstrict-prototypes]\r\nlong long dbTotalServerKeyCount();\r\n                               ^\r\n                                void\r\n12 warnings generated.\r\n    CC util.o\r\n    CC object.o\r\nIn file included from object.c:31:\r\nIn file included from ./server.h:36:\r\nIn file included from ./rio.h:38:\r\n./connection.h:206:29: warning: a function declaration without a prototype is deprecated in all versions of C [-Wstrict-prototypes]\r\nconnection *connCreateSocket();\r\n                            ^\r\n                             void\r\n./connection.h:209:26: warning: a function declaration without a prototype is deprecated in all versions of C [-Wstrict-prototypes]\r\nconnection *connCreateTLS();\r\n                         ^\r\n                          void\r\n./connection.h:234:22: warning: a function declaration without a prototype is deprecated in all versions of C [-Wstrict-prototypes]\r\nint tlsHasPendingData();\r\n                     ^\r\n                      void\r\n./connection.h:235:26: warning: a function declaration without a prototype is deprecated in all versions of C [-Wstrict-prototypes]\r\nint tlsProcessPendingData();\r\n                         ^\r\n                          void\r\nIn file included from object.c:31:\r\nIn file included from ./server.h:64:\r\n./zmalloc.h:90:19: warning: a function declaration without a prototype is deprecated in all versions of C [-Wstrict-prototypes]\r\nint jemalloc_purge();\r\n                  ^\r\n                   void\r\nIn file included from object.c:31:\r\n./server.h:1639:35: warning: a function declaration without a prototype is deprecated in all versions of C [-Wstrict-prototypes]\r\nint moduleAllDatatypesHandleErrors();\r\n                                  ^\r\n                                   void\r\n./server.h:1919:25: warning: a function declaration without a prototype is deprecated in all versions of C [-Wstrict-prototypes]\r\nvoid restartAOFAfterSYNC();\r\n                        ^\r\n                         void\r\n./server.h:1929:26: warning: a function declaration without a prototype is deprecated in all versions of C [-Wstrict-prototypes]\r\nint hasActiveChildProcess();\r\n                         ^\r\n                          void\r\n./server.h:1955:28: warning: a function declaration without a prototype is deprecated in all versions of C [-Wstrict-prototypes]\r\nuser *ACLCreateUnlinkedUser();\r\n                           ^\r\n                            void\r\n./server.h:2025:37: warning: a function declaration without a prototype is deprecated in all versions of C [-Wstrict-prototypes]\r\nsize_t freeMemoryGetNotCountedMemory();\r\n                                    ^\r\n                                     void\r\n./server.h:2133:22: warning: a function declaration without a prototype is deprecated in all versions of C [-Wstrict-prototypes]\r\nvoid initConfigValues();\r\n                     ^\r\n                      void\r\n./server.h:2173:32: warning: a function declaration without a prototype is deprecated in all versions of C [-Wstrict-prototypes]\r\nlong long dbTotalServerKeyCount();\r\n                               ^\r\n                                void\r\n12 warnings generated.\r\n    CC db.o\r\nIn file included from db.c:30:\r\nIn file included from ./server.h:36:\r\nIn file included from ./rio.h:38:\r\n./connection.h:206:29: warning: a function declaration without a prototype is deprecated in all versions of C [-Wstrict-prototypes]\r\nconnection *connCreateSocket();\r\n                            ^\r\n                             void\r\n./connection.h:209:26: warning: a function declaration without a prototype is deprecated in all versions of C [-Wstrict-prototypes]\r\nconnection *connCreateTLS();\r\n                         ^\r\n                          void\r\n./connection.h:234:22: warning: a function declaration without a prototype is deprecated in all versions of C [-Wstrict-prototypes]\r\nint tlsHasPendingData();\r\n                     ^\r\n                      void\r\n./connection.h:235:26: warning: a function declaration without a prototype is deprecated in all versions of C [-Wstrict-prototypes]\r\nint tlsProcessPendingData();\r\n                         ^\r\n                          void\r\nIn file included from db.c:30:\r\nIn file included from ./server.h:64:\r\n./zmalloc.h:90:19: warning: a function declaration without a prototype is deprecated in all versions of C [-Wstrict-prototypes]\r\nint jemalloc_purge();\r\n                  ^\r\n                   void\r\nIn file included from db.c:30:\r\n./server.h:1639:35: warning: a function declaration without a prototype is deprecated in all versions of C [-Wstrict-prototypes]\r\nint moduleAllDatatypesHandleErrors();\r\n                                  ^\r\n                                   void\r\n./server.h:1919:25: warning: a function declaration without a prototype is deprecated in all versions of C [-Wstrict-prototypes]\r\nvoid restartAOFAfterSYNC();\r\n                        ^\r\n                         void\r\n./server.h:1929:26: warning: a function declaration without a prototype is deprecated in all versions of C [-Wstrict-prototypes]\r\nint hasActiveChildProcess();\r\n                         ^\r\n                          void\r\n./server.h:1955:28: warning: a function declaration without a prototype is deprecated in all versions of C [-Wstrict-prototypes]\r\nuser *ACLCreateUnlinkedUser();\r\n                           ^\r\n                            void\r\n./server.h:2025:37: warning: a function declaration without a prototype is deprecated in all versions of C [-Wstrict-prototypes]\r\nsize_t freeMemoryGetNotCountedMemory();\r\n                                    ^\r\n                                     void\r\n./server.h:2133:22: warning: a function declaration without a prototype is deprecated in all versions of C [-Wstrict-prototypes]\r\nvoid initConfigValues();\r\n                     ^\r\n                      void\r\n./server.h:2173:32: warning: a function declaration without a prototype is deprecated in all versions of C [-Wstrict-prototypes]\r\nlong long dbTotalServerKeyCount();\r\n                               ^\r\n                                void\r\ndb.c:538:32: warning: a function declaration without a prototype is deprecated in all versions of C [-Wstrict-prototypes]\r\nlong long dbTotalServerKeyCount() {\r\n                               ^\r\n                                void\r\n13 warnings generated.\r\n    CC replication.o\r\nIn file included from replication.c:32:\r\nIn file included from ./server.h:36:\r\nIn file included from ./rio.h:38:\r\n./connection.h:206:29: warning: a function declaration without a prototype is deprecated in all versions of C [-Wstrict-prototypes]\r\nconnection *connCreateSocket();\r\n                            ^\r\n                             void\r\n./connection.h:209:26: warning: a function declaration without a prototype is deprecated in all versions of C [-Wstrict-prototypes]\r\nconnection *connCreateTLS();\r\n                         ^\r\n                          void\r\n./connection.h:234:22: warning: a function declaration without a prototype is deprecated in all versions of C [-Wstrict-prototypes]\r\nint tlsHasPendingData();\r\n                     ^\r\n                      void\r\n./connection.h:235:26: warning: a function declaration without a prototype is deprecated in all versions of C [-Wstrict-prototypes]\r\nint tlsProcessPendingData();\r\n                         ^\r\n                          void\r\nIn file included from replication.c:32:\r\nIn file included from ./server.h:64:\r\n./zmalloc.h:90:19: warning: a function declaration without a prototype is deprecated in all versions of C [-Wstrict-prototypes]\r\nint jemalloc_purge();\r\n                  ^\r\n                   void\r\nIn file included from replication.c:32:\r\n./server.h:1639:35: warning: a function declaration without a prototype is deprecated in all versions of C [-Wstrict-prototypes]\r\nint moduleAllDatatypesHandleErrors();\r\n                                  ^\r\n                                   void\r\n./server.h:1919:25: warning: a function declaration without a prototype is deprecated in all versions of C [-Wstrict-prototypes]\r\nvoid restartAOFAfterSYNC();\r\n                        ^\r\n                         void\r\n./server.h:1929:26: warning: a function declaration without a prototype is deprecated in all versions of C [-Wstrict-prototypes]\r\nint hasActiveChildProcess();\r\n                         ^\r\n                          void\r\n./server.h:1955:28: warning: a function declaration without a prototype is deprecated in all versions of C [-Wstrict-prototypes]\r\nuser *ACLCreateUnlinkedUser();\r\n                           ^\r\n                            void\r\n./server.h:2025:37: warning: a function declaration without a prototype is deprecated in all versions of C [-Wstrict-prototypes]\r\nsize_t freeMemoryGetNotCountedMemory();\r\n                                    ^\r\n                                     void\r\n./server.h:2133:22: warning: a function declaration without a prototype is deprecated in all versions of C [-Wstrict-prototypes]\r\nvoid initConfigValues();\r\n                     ^\r\n                      void\r\n./server.h:2173:32: warning: a function declaration without a prototype is deprecated in all versions of C [-Wstrict-prototypes]\r\nlong long dbTotalServerKeyCount();\r\n                               ^\r\n                                void\r\nreplication.c:1236:31: error: variable has incomplete type 'struct stat64'\r\n            struct redis_stat buf;\r\n                              ^\r\nreplication.c:1236:20: note: forward declaration of 'struct stat64'\r\n            struct redis_stat buf;\r\n                   ^\r\n./config.h:45:20: note: expanded from macro 'redis_stat'\r\n#define redis_stat stat64\r\n                   ^\r\nreplication.c:1283:21: error: call to undeclared function 'fstat64'; ISO C99 and later do not support implicit function declarations [-Wimplicit-function-declaration]\r\n                    redis_fstat(slave->repldbfd,&buf) == -1) {\r\n                    ^\r\n./config.h:44:21: note: expanded from macro 'redis_fstat'\r\n#define redis_fstat fstat64\r\n                    ^\r\nreplication.c:1401:25: warning: a function declaration without a prototype is deprecated in all versions of C [-Wstrict-prototypes]\r\nvoid restartAOFAfterSYNC() {\r\n                        ^\r\n                         void\r\nreplication.c:1418:27: warning: a function declaration without a prototype is deprecated in all versions of C [-Wstrict-prototypes]\r\nstatic int useDisklessLoad() {\r\n                          ^\r\n                           void\r\n14 warnings and 2 errors generated.\r\nmake[1]: *** [replication.o] Error 1\r\nmake: *** [all] Error 2\r\n```\r\n",
  "state": "closed",
  "created_at": "2023-09-20T16:13:52Z",
  "updated_at": "2023-09-20T16:17:21Z",
  "closed_at": "2023-09-20T16:17:20Z",
  "labels": [],
  "comments_data": [
    {
      "id": 1728054407,
      "user": "sundb",
      "created_at": "2023-09-20T16:15:37Z",
      "body": "same as #12585"
    },
    {
      "id": 1728056923,
      "user": "KFoxder",
      "created_at": "2023-09-20T16:17:20Z",
      "body": "Close since duplicate https://github.com/redis/redis/issues/12585"
    }
  ]
}